"use strict";const DYNAMIC_HASH_CACHE_NAME="log4u-sw-dynamic-hash-cache",DYNAMIC_ETAG_CACHE_NAME="log4u-sw-dynamic-etag-cache",DYNAMIC_ETAG_CACHE_REG_EXP=[/.png$/,/.gif$/,/.svg$/,/.json$/,/.css$/,/.js$/],checkJs=e=>{const n=e.length;return n>=3&&"js"===e[n-1]?"bundle"===e[n-2]||"chunk"===e[n-2]||"worker"===e[n-2]?(e.splice(n-3,1),e):(e.splice(n-2,1),e):null},checkJson=e=>{const n=e.length;return n>=3&&"json"===e[n-1]?(e.splice(n-2,1),e):null},checkCss=e=>{const n=e.length;return n>=3&&"css"===e[n-1]?"chunk"===e[n-2]?(e.splice(n-3,1),e):(e.splice(n-2,1),e):null},errorEventSource=[],logs=[];function log(e,n,t){logs.push({level:e,msg:n,meta:t})}let messageChannelPort;function onInstall(e){e.waitUntil((async()=>{const e=await caches.keys();return await Promise.all(e.filter((e=>e!==DYNAMIC_HASH_CACHE_NAME&&e!==DYNAMIC_ETAG_CACHE_NAME)).map((e=>caches.delete(e))))})())}function onFetch(e){"navigate"!==e.request.mode&&"websocket"!==e.request.mode&&e.respondWith(router(e.request))}async function router(e){const n=new URL(e.url),t=n.pathname,s=t.split(".");if("GET"===e.method&&n.origin===location.origin){e.method,new Headers(e.headers);const n=(checkJs(s)||checkCss(s)||checkJson(s))?.join(".");if(n){const s=await caches.open(DYNAMIC_HASH_CACHE_NAME),c=await s.match(n);if(c&&new URL(c.url).pathname===t)return c;const o=await fetch(e);return o.ok&&await s.put(n,o.clone()),o}}return fetch(e)}self.addEventListener("install",onInstall),self.addEventListener("fetch",onFetch);