"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[1147],{1147:(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});var s=r(5043),n=r(3216),i=r(9781),a=r(2836),l=r(5604),o=r(4535),c=r(310),d=r(7784),u=r(1962),h=r(7739),p=r(2420),x=r(6446),m=r(1806),b=r(3460),v=r(9650),g=r(4882),f=r(9090),j=r(8076),k=r(8093),A=r(5263),y=r(5865),C=r(3336),w=r(7392),S=r(2505),R=r(5540),O=r(3471),M=r(8242),P=r(1833),D=r(2088),E=r(8612),F=r(1079),N=r(9056),T=r(6431),_=r(7166),z=r(579);const L=[{id:"fullName",orderField:"fullName",getData:e=>({data:"".concat(e.fullName)}),numeric:!1,disablePadding:!0,label:"First\xa0name/Last\xa0name"},{id:"type",getData:e=>{const t="".concat((0,T.Pw)(e)," ");let r="";return"Driver"===e.type&&(r="Driver"),"OwnerDriver"===e.type&&(r="Owner/Driver"),"CoordinatorDriver"===e.type&&(r="Coordinator/Driver"),{data:(0,z.jsx)("span",{children:(0,z.jsx)("b",{children:t})}),title:r}},numeric:!1,disablePadding:!0,label:"Type"},{id:"phone",getData:e=>{const t="".concat(e.phone),r="".concat(e.phone2?e.phone2:"");return{data:(0,z.jsxs)("span",{children:[(0,z.jsx)("a",{href:"tel:".concat(t),target:"_blank",onClick:_.d,children:t}),(0,z.jsx)("br",{}),(0,z.jsx)("a",{href:r?"tel:".concat(r):void 0,target:"_blank",onClick:_.d,children:r||"\xa0"})]}),title:t+"\n"+r}},numeric:!1,disablePadding:!0,label:"Mobile\xa0phone"},{id:"email",getData:e=>{if(e.email){const t="".concat(e.email);return{data:(0,z.jsx)("span",{children:(0,z.jsx)("a",{href:"mailto:".concat(t),target:"_blank",onClick:_.d,children:t})}),title:t}}return{data:""}},numeric:!1,disablePadding:!0,label:"Email"},{id:"address",getData:e=>{if(e.address){const t="".concat(e.address);return{data:(0,z.jsx)("span",{children:t}),title:t}}return{data:""}},numeric:!1,disablePadding:!0,label:"Home\xa0address"},{id:"onTruck",getData:e=>{if(e.driveTrucks&&e.driveTrucks.length){const t=e.driveTrucks[0];return{data:(0,z.jsxs)("span",{children:[(0,z.jsx)("a",{href:"/trucks/view/".concat(t.id),target:"_blank",onClick:_.d,children:"".concat(t.truckNumber)}),(0,z.jsx)("br",{}),(0,z.jsx)("a",{href:t.owner?"/".concat((0,T.Yn)(t.owner),"/view/").concat(t.owner.id):void 0,target:"_blank",onClick:_.d,children:t.owner?"".concat(t.owner.fullName):"\xa0"})]}),title:"".concat(t.truckNumber).concat(t.owner?"\n".concat(t.owner.fullName):"")}}return{data:""}},numeric:!1,disablePadding:!0,label:"ON\xa0TRUCK"}],U=(0,o.Ay)(g.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),I=(0,o.Ay)(p.A)((e=>{let{theme:t}=e;return{maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}));function K(e){const{onSelectAllClick:t,order:r,orderBy:s,numSelected:n,rowCount:i,onRequestSort:a}=e;return(0,z.jsx)(U,{children:(0,z.jsxs)(j.A,{children:[(0,z.jsx)(I,{padding:"checkbox",children:(0,z.jsx)(u.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:n>0&&n<i,checked:i>0&&n===i,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),L.map((e=>{return(0,z.jsx)(I,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:s===e.id&&r,children:(0,z.jsxs)(k.A,{active:e.orderField&&s===e.orderField,hideSortIcon:!e.orderField,direction:s===e.orderField?r:"asc",onClick:e.orderField?(t=e.orderField,e=>{a(e,t)}):()=>{},children:[e.label,e.orderField&&s===e.orderField?(0,z.jsx)(x.A,{component:"span",sx:D.A,children:"desc"===r?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function q(e){const{selected:t,setQueryParams:r}=e,[l,o]=s.useState(""),[u,p]=s.useState(""),[m,b]=s.useState(0),[v,g]=s.useState(!1),f=(0,n.zy)(),j=(0,n.Zp)(),k=(0,i.jE)(),C=(0,N.dh)(),{mutate:D,isLoading:T}=(0,a.n)(F.wL,{onSuccess:()=>{C({severity:"success",message:"Deleted"}),k.invalidateQueries(["drivers"])},onError:e=>{C({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),_=()=>{g(!1),o(""),p(""),b(0),r({})},L=()=>{g(!1);const e={};l&&(e.fullName=l),u&&(e.allPhone=u),m&&(e.truckNumber=m),r(e)},U=e=>{"Enter"===e.key&&(l||u||m?L():_())};return(0,z.jsxs)(A.A,{sx:{overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1},...t.length>0&&{bgcolor:e=>(0,c.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[t.length>0?(0,z.jsxs)(y.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,z.jsx)(y.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Drivers"}),(0,z.jsx)(x.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,z.jsx)(d.A,{label:"First name/Last name",value:l,onChange:e=>{o(e.target.value),g(!0)},onKeyUp:U,size:"small"})}),(0,z.jsx)(x.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,z.jsx)(d.A,{label:"Phone",value:u,onChange:e=>{p(e.target.value),g(!0)},onKeyUp:U,size:"small"})}),(0,z.jsx)(x.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,z.jsx)(d.A,{label:"Truck Number",value:m||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(b(Number(e.target.value)),g(!0))},onKeyUp:U,size:"small"})}),(0,z.jsx)(h.A,{title:"Filter list",children:!v&&(l||m||u)||v&&!l&&v&&!m&&v&&!u?(0,z.jsx)("span",{children:(0,z.jsx)(w.A,{onClick:_,children:(0,z.jsx)(P.A,{})})}):(0,z.jsx)("span",{children:(0,z.jsx)(w.A,{disabled:!l&&!m,onClick:L,children:(0,z.jsx)(M.A,{})})})}),(0,z.jsxs)(x.A,{sx:{p:1,display:"inline-flex"},children:[(0,z.jsx)(h.A,{title:"Create",children:(0,z.jsx)("span",{children:(0,z.jsx)(w.A,{onClick:()=>{j("./create",{relative:"path",state:{from:f},replace:!1})},children:(0,z.jsx)(S.A,{})})})}),(0,z.jsx)(h.A,{title:"Edit",children:(0,z.jsx)("span",{children:(0,z.jsx)(w.A,{disabled:1!==t.length,onClick:()=>{j("./edit/".concat(t[0]),{relative:"path",state:{from:f},replace:!1})},children:(0,z.jsx)(R.A,{})})})}),(0,z.jsx)(h.A,{title:"Delete",children:(0,z.jsx)("span",{children:(0,z.jsx)(w.A,{disabled:1!==t.length,onClick:()=>{D("".concat(t[0]))},children:(0,z.jsx)(O.A,{})})})})]}),(0,z.jsx)(E.A,{visible:T})]})}function B(){const[e,t]=s.useState("asc"),[r,i]=s.useState("fullName"),[a,o]=s.useState([]),[c,d]=s.useState(0),[h,p]=s.useState(15),[g,k]=s.useState({}),A=s.useRef(null),y=(0,n.zy)(),w=(0,n.Zp)(),S=(0,N.dh)(),{isLoading:R,isFetching:O,data:{items:M,total:P}={items:[],total:0}}=(0,l.I)({queryKey:["drivers",c,h,r,e,g],queryFn:F.If,keepPreviousData:!0,retry:!1,onError:e=>{S({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),D=M||[];s.useEffect((()=>{if(A.current){A.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[D]),s.useEffect((()=>{const e=[];a.forEach((t=>{D.find((e=>e.id===t))&&e.push(t)})),o(e)}),[D]);return(0,z.jsxs)(x.A,{sx:{width:"100%",height:"100%"},children:[(0,z.jsxs)(C.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,z.jsx)(q,{selected:a,setQueryParams:e=>{k(e),d(0)}}),(0,z.jsx)(v.A,{ref:A,sx:{height:"calc(100% - 115px)"},children:(0,z.jsxs)(m.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,z.jsx)(K,{numSelected:a.length,order:e,orderBy:r,onSelectAllClick:e=>{if(e.target.checked){const e=D.map((e=>e.id));o(e)}else o([])},onRequestSort:(s,n)=>{const a=r===n&&"asc"===e;r===n&&"desc"===e?(t(void 0),i(void 0)):(t(a?"desc":"asc"),i(n))},rowCount:D.length}),(0,z.jsx)(b.A,{children:D.map(((e,t)=>{const r=(s="".concat(e.id),-1!==a.indexOf(s));var s;const n="enhanced-table-checkbox-".concat(t);return(0,z.jsxs)(j.A,{hover:!0,onDoubleClick:t=>{return r=e,void w("../".concat((0,T.Yn)(r),"/view/").concat(r.id),{relative:"path",state:{from:y},replace:!1});var r},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,sx:{cursor:"pointer"},children:[(0,z.jsx)(I,{padding:"checkbox",children:(0,z.jsx)(u.A,{id:"".concat(n),color:"primary",checked:r,inputProps:{"aria-labelledby":n},onClick:t=>((e,t)=>{e.stopPropagation();const r=a.indexOf(t);let s=[];-1===r?s=s.concat(a,t):0===r?s=s.concat(a.slice(1)):r===a.length-1?s=s.concat(a.slice(0,-1)):r>0&&(s=s.concat(a.slice(0,r),a.slice(r+1))),o(s)})(t,"".concat(e.id))})}),L.map((t=>{const r=t.getData(e);return(0,z.jsx)(I,{title:r.title,align:t.numeric?"right":"center",children:r.data},t.id)}))]},e.id)}))})]})}),(0,z.jsx)(f.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:P,rowsPerPage:h,page:c,onPageChange:(e,t)=>{d(t)},onRowsPerPageChange:e=>{p(parseInt(e.target.value,10)),d(0)}})]}),(0,z.jsx)(E.A,{visible:R||O})]})}},7166:(e,t,r)=>{function s(e){e.stopPropagation()}r.d(t,{d:()=>s})},3471:(e,t,r)=>{var s=r(4994);t.A=void 0;var n=s(r(39)),i=r(579);t.A=(0,n.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},5540:(e,t,r)=>{var s=r(4994);t.A=void 0;var n=s(r(39)),i=r(579);t.A=(0,n.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},2836:(e,t,r)=>{r.d(t,{n:()=>h});var s=r(5043),n=r(8664),i=r(116),a=r(9939),l=r(2078);class o extends l.Q{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const r=this.options;this.options=this.client.defaultMutationOptions(e),(0,n.f8)(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(t=this.currentMutation)||t.setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null==(e=this.currentMutation)||e.removeObserver(this))}onMutationUpdate(e){this.updateResult();const t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:"undefined"!==typeof e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:(0,i.$)(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){a.j.batch((()=>{var t,r,s,n;if(this.mutateOptions&&this.hasListeners())if(e.onSuccess)null==(t=(r=this.mutateOptions).onSuccess)||t.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(s=(n=this.mutateOptions).onSettled)||s.call(n,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(e.onError){var i,a,l,o;null==(i=(a=this.mutateOptions).onError)||i.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(l=(o=this.mutateOptions).onSettled)||l.call(o,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}e.listeners&&this.listeners.forEach((e=>{let{listener:t}=e;t(this.currentResult)}))}))}}var c=r(8873),d=r(9781),u=r(4084);function h(e,t,r){const i=(0,n.GR)(e,t,r),l=(0,d.jE)({context:i.context}),[h]=s.useState((()=>new o(l,i)));s.useEffect((()=>{h.setOptions(i)}),[h,i]);const x=(0,c.r)(s.useCallback((e=>h.subscribe(a.j.batchCalls(e))),[h]),(()=>h.getCurrentResult()),(()=>h.getCurrentResult())),m=s.useCallback(((e,t)=>{h.mutate(e,t).catch(p)}),[h]);if(x.error&&(0,u.G)(h.options.useErrorBoundary,[x.error]))throw x.error;return{...x,mutate:m,mutateAsync:x.mutate}}function p(){}}}]);
//# sourceMappingURL=1147.11d40f52.chunk.js.map