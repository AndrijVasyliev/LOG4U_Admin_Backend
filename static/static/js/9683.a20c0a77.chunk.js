"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[9683],{9683:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var n=a(5043),r=a(3216),i=a(9781),c=a(2836),s=a(5604),o=a(4535),d=a(310),l=a(1962),u=a(2420),h=a(6446),p=a(1806),g=a(3460),x=a(9650),m=a(4882),b=a(9090),f=a(8076),j=a(8093),A=a(5263),v=a(5865),k=a(3336),y=a(2088),S=a(8612),w=a(1079),P=a(9056),C=a(6431),F=a(7166),D=a(579);const E=[{id:"state",orderField:"state",getData:e=>({data:"".concat(e.state)}),numeric:!1,disablePadding:!0,label:"Email\xa0State"},{id:"createdAt",orderField:"createdAt",getData:e=>{const t=new Date(e.createdAt).toLocaleString();return{data:(0,D.jsx)("span",{children:"".concat(t)}),title:t}},numeric:!1,disablePadding:!0,label:"Created\xa0At"},{id:"updatedAt",orderField:"updatedAt",getData:e=>{const t=new Date(e.updatedAt).toLocaleString();return{data:(0,D.jsx)("span",{children:"".concat(t)}),title:t}},numeric:!1,disablePadding:!0,label:"Updated\xa0At"},{id:"from",getData:e=>{const t=e.from;return{data:(0,D.jsx)("span",{children:"".concat(t)}),title:t}},numeric:!1,disablePadding:!0,label:"From"},{id:"subject",getData:e=>{const t=e.subject;return{data:(0,D.jsx)("span",{children:"".concat(t)}),title:t}},numeric:!1,disablePadding:!0,label:"Subject"},{id:"to",getData:e=>{const t=e.to&&e.to[0];if("Person"===(null===t||void 0===t?void 0:t.toType)){const e=t.to,a="".concat(e.fullName),n="".concat((0,C.Pw)(e)),r="./".concat((0,C.Yn)(e),"/view/").concat(e.id);return{data:(0,D.jsxs)("span",{children:[(0,D.jsx)("a",{href:r,target:"_blank",onClick:F.d,children:"".concat(a)}),(0,D.jsx)("br",{}),"".concat(n)]}),title:a+"\n"+n}}if("User"===(null===t||void 0===t?void 0:t.toType)){const e=t.to,a="".concat(e.fullName),n="".concat(e.userRole),r="./users/view/".concat(e.id);return{data:(0,D.jsxs)("span",{children:[(0,D.jsx)("a",{href:r,target:"_blank",onClick:F.d,children:"".concat(a)}),(0,D.jsx)("br",{}),"".concat(n)]}),title:a+"\n"+n}}return{data:""}},numeric:!1,disablePadding:!0,label:"First\xa0To"}],O=(0,o.Ay)(m.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),_=(0,o.Ay)(u.A)((()=>({maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})));function T(e){const{onSelectAllClick:t,order:a,orderBy:n,numSelected:r,rowCount:i,onRequestSort:c}=e;return(0,D.jsx)(O,{children:(0,D.jsxs)(f.A,{children:[(0,D.jsx)(_,{padding:"checkbox",children:(0,D.jsx)(l.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:r>0&&r<i,checked:i>0&&r===i,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),E.map((e=>{return(0,D.jsx)(_,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:n===e.id&&a,children:(0,D.jsxs)(j.A,{active:e.orderField&&n===e.orderField,hideSortIcon:!e.orderField,direction:n===e.orderField?a:"asc",onClick:e.orderField?(t=e.orderField,e=>{c(e,t)}):()=>{},children:[e.label,e.orderField&&n===e.orderField?(0,D.jsx)(h.A,{component:"span",sx:y.A,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function R(e){const{selected:t,setQueryParams:a}=e,[s,o]=n.useState(""),[l,u]=n.useState(!1),p=((0,r.zy)(),(0,r.Zp)(),(0,i.jE)()),g=(0,P.dh)(),{mutate:x,isLoading:m}=(0,c.n)(w.$l,{onSuccess:()=>{g({severity:"success",message:"Deleted"}),p.invalidateQueries(["email"])},onError:e=>{g({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}});return(0,D.jsxs)(A.A,{sx:{overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1},...t.length>0&&{bgcolor:e=>(0,d.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[t.length>0?(0,D.jsxs)(v.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,D.jsx)(v.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Emails"}),(0,D.jsx)(h.A,{sx:{p:1,display:"inline-flex"}}),(0,D.jsx)(S.A,{visible:m})]})}function q(){const[e,t]=n.useState("desc"),[a,i]=n.useState("createdAt"),[c,o]=n.useState([]),[d,u]=n.useState(0),[m,j]=n.useState(15),[A,v]=n.useState({}),y=n.useRef(null),C=((0,r.zy)(),(0,r.Zp)(),(0,P.dh)()),{isLoading:F,isFetching:O,data:{items:q,total:I}={items:[],total:0}}=(0,s.I)({queryKey:["emails",d,m,a,e,A],queryFn:w.au,keepPreviousData:!0,retry:!1,onError:e=>{C({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),L=q||[];n.useEffect((()=>{if(y.current){y.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[L]),n.useEffect((()=>{const e=[];c.forEach((t=>{L.find((e=>e.id===t))&&e.push(t)})),o(e)}),[L]);return(0,D.jsxs)(h.A,{sx:{width:"100%",height:"100%"},children:[(0,D.jsxs)(k.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,D.jsx)(R,{selected:c,setQueryParams:e=>{v(e),u(0)}}),(0,D.jsx)(x.A,{ref:y,sx:{height:"calc(100% - 115px)"},children:(0,D.jsxs)(p.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,D.jsx)(T,{numSelected:c.length,order:e,orderBy:a,onSelectAllClick:e=>{if(e.target.checked){const e=L.map((e=>e.id));o(e)}else o([])},onRequestSort:(n,r)=>{const c=a===r&&"asc"===e;a===r&&"desc"===e?(t(void 0),i(void 0)):(t(c?"desc":"asc"),i(r))},rowCount:L.length}),(0,D.jsx)(g.A,{children:L.map(((e,t)=>{const a=(n="".concat(e.id),-1!==c.indexOf(n));var n;const r="enhanced-table-checkbox-".concat(t);return(0,D.jsxs)(f.A,{hover:!0,onDoubleClick:e=>{},role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,sx:{cursor:"pointer"},children:[(0,D.jsx)(_,{padding:"checkbox",children:(0,D.jsx)(l.A,{id:"".concat(r),color:"primary",checked:a,inputProps:{"aria-labelledby":r},onClick:t=>((e,t)=>{e.stopPropagation();const a=c.indexOf(t);let n=[];-1===a?n=n.concat(c,t):0===a?n=n.concat(c.slice(1)):a===c.length-1?n=n.concat(c.slice(0,-1)):a>0&&(n=n.concat(c.slice(0,a),c.slice(a+1))),o(n)})(t,"".concat(e.id))})}),E.map((t=>{const a=t.getData(e);return(0,D.jsx)(_,{title:a.title,align:t.numeric?"right":"center",children:a.data},t.id)}))]},e.id)}))})]})}),(0,D.jsx)(b.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:I,rowsPerPage:m,page:d,onPageChange:(e,t)=>{u(t)},onRowsPerPageChange:e=>{j(parseInt(e.target.value,10)),u(0)}})]}),(0,D.jsx)(S.A,{visible:F||O})]})}}}]);
//# sourceMappingURL=9683.a20c0a77.chunk.js.map