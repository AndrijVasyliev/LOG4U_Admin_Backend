"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[946],{4946:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var i=t(1413),r=t(9439),a=t(2791),l=t(7689),c=t(6403),o=t(3418),s=t(2917),d=t(6934),u=t(2065),h=t(8550),f=t(4454),x=t(68),p=t(3994),g=t(4554),m=t(9836),v=t(3382),Z=t(9281),j=t(6890),b=t(3033),k=t(5855),y=t(720),C=t(4663),P=t(890),S=t(5527),w=t(3400),F=t(2419),D=t(1286),E=t(7247),N=t(1903),T=t(1528),O=t(5573),R=t(1605),z=t(344),H=t(4682),_=t(184),q=[{id:"fullName",orderField:"fullName",getData:function(e){return{data:"".concat(e.fullName)}},numeric:!1,disablePadding:!0,label:"Full\xa0Name"},{id:"email",orderField:"email",getData:function(e){return{data:"".concat(e.email)}},numeric:!1,disablePadding:!0,label:"Email"},{id:"userRole",orderField:"userRole",getData:function(e){return{data:"".concat(e.userRole)}},numeric:!1,disablePadding:!0,label:"User\xa0Role"},{id:"jobTitle",orderField:"jobTitle",getData:function(e){return{data:"".concat(e.jobTitle)}},numeric:!1,disablePadding:!0,label:"Job\xa0Title"}],L=(0,d.ZP)(j.Z)((function(e){return{backgroundColor:e.theme.palette.background.default}})),M=(0,d.ZP)(p.Z)((function(){return{maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}));function V(e){var n=e.onSelectAllClick,t=e.order,i=e.orderBy,r=e.numSelected,a=e.rowCount,l=e.onRequestSort;return(0,_.jsx)(L,{children:(0,_.jsxs)(k.Z,{children:[(0,_.jsx)(M,{padding:"checkbox",children:(0,_.jsx)(f.Z,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:r>0&&r<a,checked:a>0&&r===a,onChange:n,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),q.map((function(e){return(0,_.jsx)(M,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:i===e.id&&t,children:(0,_.jsxs)(y.Z,{active:e.orderField&&i===e.orderField,hideSortIcon:!e.orderField,direction:i===e.orderField?t:"asc",onClick:e.orderField?(n=e.orderField,function(e){l(e,n)}):function(){},children:[e.label,e.orderField&&i===e.orderField?(0,_.jsx)(g.Z,{component:"span",sx:O.Z,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}function A(e){var n=e.selected,t=e.setQueryParams,s=a.useState(""),d=(0,r.Z)(s,2),f=d[0],p=d[1],m=a.useState(!1),v=(0,r.Z)(m,2),Z=v[0],j=v[1],b=(0,l.TH)(),k=(0,l.s0)(),y=(0,c.NL)(),S=(0,H.Ds)(),O=(0,o.D)(z.uW,{onSuccess:function(){S({severity:"success",message:"Deleted"}),y.invalidateQueries(["user"])},onError:function(e){S({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),q=O.mutate,L=O.isLoading,M=function(){j(!1),p(""),t({})},V=function(){j(!1),t({fullName:f})};return(0,_.jsxs)(C.Z,{sx:(0,i.Z)({pl:{sm:2},pr:{xs:1,sm:1}},n.length>0&&{bgcolor:function(e){return(0,u.Fq)(e.palette.primary.main,e.palette.action.activatedOpacity)}}),children:[n.length>0?(0,_.jsxs)(P.Z,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[n.length," selected"]}):(0,_.jsx)(P.Z,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Users"}),(0,_.jsx)(h.Z,{label:"Full Name",value:f,onChange:function(e){p(e.target.value),j(!0)},onKeyUp:function(e){"Enter"===e.key&&(f?V():M())},size:"small"}),(0,_.jsx)(x.Z,{title:"Filter list",children:!Z&&f||Z&&!f?(0,_.jsx)("span",{children:(0,_.jsx)(w.Z,{onClick:M,children:(0,_.jsx)(T.Z,{})})}):(0,_.jsx)("span",{children:(0,_.jsx)(w.Z,{disabled:!f,onClick:V,children:(0,_.jsx)(N.Z,{})})})}),(0,_.jsxs)(g.Z,{sx:{p:1,display:"inline-flex"},children:[(0,_.jsx)(x.Z,{title:"Create",children:(0,_.jsx)("span",{children:(0,_.jsx)(w.Z,{onClick:function(){k("./create",{relative:"path",state:{from:b},replace:!1})},children:(0,_.jsx)(F.Z,{})})})}),(0,_.jsx)(x.Z,{title:"Edit",children:(0,_.jsx)("span",{children:(0,_.jsx)(w.Z,{disabled:1!==n.length,onClick:function(){k("./edit/".concat(n[0]),{relative:"path",state:{from:b},replace:!1})},children:(0,_.jsx)(D.Z,{})})})}),(0,_.jsx)(x.Z,{title:"Delete",children:(0,_.jsx)("span",{children:(0,_.jsx)(w.Z,{disabled:1!==n.length,onClick:function(){q("".concat(n[0]))},children:(0,_.jsx)(E.Z,{})})})})]}),(0,_.jsx)(R.Z,{visible:L})]})}function B(){var e=a.useState("asc"),n=(0,r.Z)(e,2),t=n[0],i=n[1],c=a.useState("fullName"),o=(0,r.Z)(c,2),d=o[0],u=o[1],h=a.useState([]),x=(0,r.Z)(h,2),p=x[0],j=x[1],y=a.useState(0),C=(0,r.Z)(y,2),P=C[0],w=C[1],F=a.useState(15),D=(0,r.Z)(F,2),E=D[0],N=D[1],T=a.useState({}),O=(0,r.Z)(T,2),L=O[0],B=O[1],I=a.useRef(null),J=(0,l.TH)(),Q=(0,l.s0)(),U=(0,H.Ds)(),W=(0,s.a)({queryKey:["user",P,E,d,t,L],queryFn:z.np,keepPreviousData:!0,retry:!1,onError:function(e){U({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),K=W.isLoading,G=W.isFetching,X=W.data,Y=void 0===X?{items:[],total:0}:X,$=Y.items,ee=Y.total,ne=$||[];a.useEffect((function(){I.current&&I.current.scrollTo({top:0,left:0,behavior:"smooth"})}),[ne]),a.useEffect((function(){var e=[];p.forEach((function(n){ne.find((function(e){return e.id===n}))&&e.push(n)})),j(e)}),[ne]);return(0,_.jsxs)(g.Z,{sx:{width:"100%",height:"100%"},children:[(0,_.jsxs)(S.Z,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,_.jsx)(A,{selected:p,setQueryParams:function(e){B(e),w(0)}}),(0,_.jsx)(Z.Z,{ref:I,sx:{height:"calc(100% - 115px)"},children:(0,_.jsxs)(m.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,_.jsx)(V,{numSelected:p.length,order:t,orderBy:d,onSelectAllClick:function(e){if(e.target.checked){var n=ne.map((function(e){return e.id}));j(n)}else j([])},onRequestSort:function(e,n){var r=d===n&&"asc"===t;d===n&&"desc"===t?(i(void 0),u(void 0)):(i(r?"desc":"asc"),u(n))},rowCount:ne.length}),(0,_.jsx)(v.Z,{children:ne.map((function(e,n){var t,i=(t="".concat(e.id),-1!==p.indexOf(t)),r="enhanced-table-checkbox-".concat(n);return(0,_.jsxs)(k.Z,{hover:!0,onClick:function(n){Q("./view/".concat(e.id),{relative:"path",state:{from:J},replace:!1})},role:"checkbox","aria-checked":i,tabIndex:-1,selected:i,sx:{cursor:"pointer"},children:[(0,_.jsx)(M,{padding:"checkbox",children:(0,_.jsx)(f.Z,{id:"".concat(r),color:"primary",checked:i,inputProps:{"aria-labelledby":r},onClick:function(n){return function(e,n){e.stopPropagation();var t=p.indexOf(n),i=[];-1===t?i=i.concat(p,n):0===t?i=i.concat(p.slice(1)):t===p.length-1?i=i.concat(p.slice(0,-1)):t>0&&(i=i.concat(p.slice(0,t),p.slice(t+1))),j(i)}(n,"".concat(e.id))}})}),q.map((function(n){var t=n.getData(e);return(0,_.jsx)(M,{title:t.title,align:n.numeric?"right":"center",children:t.data},n.id)}))]},e.id)}))})]})}),(0,_.jsx)(b.Z,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:ee,rowsPerPage:E,page:P,onPageChange:function(e,n){w(n)},onRowsPerPageChange:function(e){N(parseInt(e.target.value,10)),w(0)}})]}),(0,_.jsx)(R.Z,{visible:K||G})]})}},2419:function(e,n,t){var i=t(4836);n.Z=void 0;var r=i(t(5649)),a=t(184),l=(0,r.default)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");n.Z=l},7247:function(e,n,t){var i=t(4836);n.Z=void 0;var r=i(t(5649)),a=t(184),l=(0,r.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");n.Z=l},1286:function(e,n,t){var i=t(4836);n.Z=void 0;var r=i(t(5649)),a=t(184),l=(0,r.default)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");n.Z=l}}]);
//# sourceMappingURL=946.49e060ee.chunk.js.map