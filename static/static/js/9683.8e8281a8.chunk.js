"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[9683],{9683:(t,e,s)=>{s.r(e),s.d(e,{default:()=>L});var n=s(5043),r=s(3216),i=s(9781),a=s(2836),o=s(5604),c=s(4535),l=s(310),d=s(1962),u=s(2420),h=s(6446),p=s(1806),b=s(3460),g=s(9650),x=s(4882),m=s(9090),f=s(8076),v=s(8093),j=s(5263),y=s(5865),A=s(3336),S=s(2088),k=s(8612),R=s(1079),w=s(6603),C=s(6431),O=s(7166),P=s(579);const E=[{id:"state",orderField:"state",getData:t=>({data:"".concat(t.state)}),numeric:!1,disablePadding:!0,label:"Email\xa0State"},{id:"createdAt",orderField:"createdAt",getData:t=>{const e=new Date(t.createdAt).toLocaleString();return{data:(0,P.jsx)("span",{children:"".concat(e)}),title:e}},numeric:!1,disablePadding:!0,label:"Created\xa0At"},{id:"updatedAt",orderField:"updatedAt",getData:t=>{const e=new Date(t.updatedAt).toLocaleString();return{data:(0,P.jsx)("span",{children:"".concat(e)}),title:e}},numeric:!1,disablePadding:!0,label:"Updated\xa0At"},{id:"from",getData:t=>{const e=t.from;return{data:(0,P.jsx)("span",{children:"".concat(e)}),title:e}},numeric:!1,disablePadding:!0,label:"From"},{id:"subject",getData:t=>{const e=t.subject;return{data:(0,P.jsx)("span",{children:"".concat(e)}),title:e}},numeric:!1,disablePadding:!0,label:"Subject"},{id:"to",getData:t=>{const e=t.to&&t.to[0];if("Person"===(null===e||void 0===e?void 0:e.toType)){const t=e.to,s="".concat(t.fullName),n="".concat((0,C.Pw)(t)),r="./".concat((0,C.Yn)(t),"/view/").concat(t.id);return{data:(0,P.jsxs)("span",{children:[(0,P.jsx)("a",{href:r,target:"_blank",onClick:O.d,children:"".concat(s)}),(0,P.jsx)("br",{}),"".concat(n)]}),title:s+"\n"+n}}if("User"===(null===e||void 0===e?void 0:e.toType)){const t=e.to,s="".concat(t.fullName),n="".concat(t.userRole),r="./users/view/".concat(t.id);return{data:(0,P.jsxs)("span",{children:[(0,P.jsx)("a",{href:r,target:"_blank",onClick:O.d,children:"".concat(s)}),(0,P.jsx)("br",{}),"".concat(n)]}),title:s+"\n"+n}}return{data:""}},numeric:!1,disablePadding:!0,label:"First\xa0To"}],M=(0,c.Ay)(x.A)((t=>{let{theme:e}=t;return{backgroundColor:e.palette.background.default}})),F=(0,c.Ay)(u.A)((()=>({maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})));function D(t){const{onSelectAllClick:e,order:s,orderBy:n,numSelected:r,rowCount:i,onRequestSort:a}=t;return(0,P.jsx)(M,{children:(0,P.jsxs)(f.A,{children:[(0,P.jsx)(F,{padding:"checkbox",children:(0,P.jsx)(d.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:r>0&&r<i,checked:i>0&&r===i,onChange:e,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),E.map((t=>{return(0,P.jsx)(F,{align:t.numeric?"right":"center",padding:t.disablePadding?"none":"normal",sortDirection:n===t.id&&s,children:(0,P.jsxs)(v.A,{active:t.orderField&&n===t.orderField,hideSortIcon:!t.orderField,direction:n===t.orderField?s:"asc",onClick:t.orderField?(e=t.orderField,t=>{a(t,e)}):()=>{},children:[t.label,t.orderField&&n===t.orderField?(0,P.jsx)(h.A,{component:"span",sx:S.A,children:"desc"===s?"sorted descending":"sorted ascending"}):null]})},t.id);var e}))]})})}function _(t){const{selected:e,setQueryParams:s}=t,[o,c]=n.useState(""),[d,u]=n.useState(!1),p=((0,r.zy)(),(0,r.Zp)(),(0,i.jE)()),b=(0,w.dh)(),{mutate:g,isLoading:x}=(0,a.n)(R.$l,{onSuccess:()=>{b({severity:"success",message:"Deleted"}),p.invalidateQueries(["email"])},onError:t=>{b({severity:"error",message:t instanceof Error?t.message:JSON.stringify(t)})}});return(0,P.jsxs)(j.A,{sx:{overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1},...e.length>0&&{bgcolor:t=>(0,l.X4)(t.palette.primary.main,t.palette.action.activatedOpacity)}},children:[e.length>0?(0,P.jsxs)(y.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[e.length," selected"]}):(0,P.jsx)(y.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Emails"}),(0,P.jsx)(h.A,{sx:{p:1,display:"inline-flex"}}),(0,P.jsx)(k.A,{visible:x})]})}function L(){const[t,e]=n.useState("desc"),[s,i]=n.useState("createdAt"),[a,c]=n.useState([]),[l,u]=n.useState(0),[x,v]=n.useState(15),[j,y]=n.useState({}),S=n.useRef(null),C=((0,r.zy)(),(0,r.Zp)(),(0,w.dh)()),{isLoading:O,isFetching:M,data:{items:L,total:T}={items:[],total:0}}=(0,o.I)({queryKey:["email",l,x,s,t,j],queryFn:R.au,keepPreviousData:!0,retry:!1,onError:t=>{C({severity:"error",message:t instanceof Error?t.message:JSON.stringify(t)})}}),I=L||[];n.useEffect((()=>{if(S.current){S.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[I]),n.useEffect((()=>{const t=[];a.forEach((e=>{I.find((t=>t.id===e))&&t.push(e)})),c(t)}),[I]);return(0,P.jsxs)(h.A,{sx:{width:"100%",height:"100%"},children:[(0,P.jsxs)(A.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,P.jsx)(_,{selected:a,setQueryParams:t=>{y(t),u(0)}}),(0,P.jsx)(g.A,{ref:S,sx:{height:"calc(100% - 115px)"},children:(0,P.jsxs)(p.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,P.jsx)(D,{numSelected:a.length,order:t,orderBy:s,onSelectAllClick:t=>{if(t.target.checked){const t=I.map((t=>t.id));c(t)}else c([])},onRequestSort:(n,r)=>{const a=s===r&&"asc"===t;s===r&&"desc"===t?(e(void 0),i(void 0)):(e(a?"desc":"asc"),i(r))},rowCount:I.length}),(0,P.jsx)(b.A,{children:I.map(((t,e)=>{const s=(n="".concat(t.id),-1!==a.indexOf(n));var n;const r="enhanced-table-checkbox-".concat(e);return(0,P.jsxs)(f.A,{hover:!0,onDoubleClick:t=>{},role:"checkbox","aria-checked":s,tabIndex:-1,selected:s,sx:{cursor:"pointer"},children:[(0,P.jsx)(F,{padding:"checkbox",children:(0,P.jsx)(d.A,{id:"".concat(r),color:"primary",checked:s,inputProps:{"aria-labelledby":r},onClick:e=>((t,e)=>{t.stopPropagation();const s=a.indexOf(e);let n=[];-1===s?n=n.concat(a,e):0===s?n=n.concat(a.slice(1)):s===a.length-1?n=n.concat(a.slice(0,-1)):s>0&&(n=n.concat(a.slice(0,s),a.slice(s+1))),c(n)})(e,"".concat(t.id))})}),E.map((e=>{const s=e.getData(t);return(0,P.jsx)(F,{title:s.title,align:e.numeric?"right":"center",children:s.data},e.id)}))]},t.id)}))})]})}),(0,P.jsx)(m.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:T,rowsPerPage:x,page:l,onPageChange:(t,e)=>{u(e)},onRowsPerPageChange:t=>{v(parseInt(t.target.value,10)),u(0)}})]}),(0,P.jsx)(k.A,{visible:O||M})]})}},7166:(t,e,s)=>{function n(t){t.stopPropagation()}s.d(e,{d:()=>n})},2836:(t,e,s)=>{s.d(e,{n:()=>h});var n=s(5043),r=s(8664),i=s(116),a=s(9939),o=s(2078);class c extends o.Q{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const s=this.options;this.options=this.client.defaultMutationOptions(t),(0,r.f8)(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.currentMutation)||t.removeObserver(this))}onMutationUpdate(t){this.updateResult();const e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:"undefined"!==typeof t?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:(0,i.$)(),e={...t,isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};this.currentResult=e}notify(t){a.j.batch((()=>{var e,s,n,r;if(this.mutateOptions&&this.hasListeners())if(t.onSuccess)null==(e=(s=this.mutateOptions).onSuccess)||e.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(n=(r=this.mutateOptions).onSettled)||n.call(r,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(t.onError){var i,a,o,c;null==(i=(a=this.mutateOptions).onError)||i.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(o=(c=this.mutateOptions).onSettled)||o.call(c,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}t.listeners&&this.listeners.forEach((t=>{let{listener:e}=t;e(this.currentResult)}))}))}}var l=s(8873),d=s(9781),u=s(4084);function h(t,e,s){const i=(0,r.GR)(t,e,s),o=(0,d.jE)({context:i.context}),[h]=n.useState((()=>new c(o,i)));n.useEffect((()=>{h.setOptions(i)}),[h,i]);const b=(0,l.r)(n.useCallback((t=>h.subscribe(a.j.batchCalls(t))),[h]),(()=>h.getCurrentResult()),(()=>h.getCurrentResult())),g=n.useCallback(((t,e)=>{h.mutate(t,e).catch(p)}),[h]);if(b.error&&(0,u.G)(h.options.useErrorBoundary,[b.error]))throw b.error;return{...b,mutate:g,mutateAsync:b.mutate}}function p(){}}}]);
//# sourceMappingURL=9683.8e8281a8.chunk.js.map