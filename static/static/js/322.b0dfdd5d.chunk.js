"use strict";(self.webpackChunkadmin_frontend=self.webpackChunkadmin_frontend||[]).push([[322,15],{344:function(e,r,t){t.d(r,{E8:function(){return P},Wn:function(){return L},k4:function(){return R},BB:function(){return k},oO:function(){return g},P9:function(){return y},kg:function(){return x},Mo:function(){return p},rz:function(){return f},W9:function(){return b},A0:function(){return v},He:function(){return m},kD:function(){return Z},_H:function(){return N},RS:function(){return h},g7:function(){return d},nh:function(){return E},uW:function(){return j},fE:function(){return S},c5:function(){return C},np:function(){return w}});var n=t(5987),a=t(9439),i=t(1413),o=t(3619),s=["id"],u=["id"],c=new URL(window.location.href).origin,l=function(e){var r,t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,i.Z)((0,i.Z)({},n),{},{headers:new Headers});return a.headers.set("Authorization","Basic "+btoa((null===(r=o.b.user)||void 0===r?void 0:r.username)+":"+(null===(t=o.b.user)||void 0===t?void 0:t.password))),a.body&&(a.headers.set("Accept","application/json"),a.headers.set("Content-Type","application/json")),fetch(e,a).catch((function(e){var r=new Error;throw r.cause=e,r.name="Fetch error",r.message="Network error has occurred",r})).then((function(e){if(200!==e.status&&201!==e.status){var r=new Error;if(r.cause=e,e.status)switch(r.name=e.status+" "+e.statusText,e.status){case 403:r.message="Insufficient permissions";break;case 404:r.message="Not found";break;default:r.message="Some server error has occurred"}else r.message="Network error has occurred";throw r}return e.json().catch((function(e){var r=new Error;throw r.cause=e,r.name="Fetch error",r.message="Server responded with incorrect data",r}))}))},d=function(e){var r=(0,a.Z)(e.queryKey,6),t=(r[0],r[1]),n=r[2],i=r[3],o=r[4],s=r[5],u=new URL("/truck",c);return u.searchParams.append("limit","".concat(n)),u.searchParams.append("offset","".concat(n*t)),i&&o&&(u.searchParams.append("orderby","".concat(i)),u.searchParams.append("direction","".concat(o))),null!==s&&void 0!==s&&s.truckNumber&&u.searchParams.append("truckNumber","".concat(s.truckNumber)),null!==s&&void 0!==s&&s.lastLocation&&null!==s&&void 0!==s&&s.distance&&(u.searchParams.append("lastLocation","".concat(s.lastLocation)),u.searchParams.append("distance","".concat(s.distance))),l(u)},h=function(e){var r=new URL("/truck/".concat(e),c);return l(r,{method:"DELETE"})},m=function(e){var r=(0,a.Z)(e.queryKey,6),t=(r[0],r[1]),n=r[2],i=r[3],o=r[4],s=r[5],u=new URL("/location",c);return u.searchParams.append("limit","".concat(n)),u.searchParams.append("offset","".concat(n*t)),i&&o&&(u.searchParams.append("orderby","".concat(i)),u.searchParams.append("direction","".concat(o))),null!==s&&void 0!==s&&s.search&&u.searchParams.append("search","".concat(s.search)),null!==s&&void 0!==s&&s.name&&u.searchParams.append("name","".concat(s.name)),l(u)},f=function(e){var r=new URL("/location/".concat(e),c);return l(r,{method:"DELETE"})},p=function(e){var r=new URL("/location",c);return l(r,{method:"POST",body:JSON.stringify(e)})},v=function(e){var r=e.id,t=(0,n.Z)(e,s),a=new URL("/location/".concat(r),c);return l(a,{method:"PATCH",body:JSON.stringify(t)})},b=function(e){var r=new URL("/location/".concat(e.queryKey[1]),c);return l(r,{method:"GET"})},x=function(e){var r=(0,a.Z)(e.queryKey,6),t=(r[0],r[1]),n=r[2],i=r[3],o=r[4],s=r[5],u=new URL("/load",c);return u.searchParams.append("limit","".concat(n)),u.searchParams.append("offset","".concat(n*t)),i&&o&&(u.searchParams.append("orderby","".concat(i)),u.searchParams.append("direction","".concat(o))),null!==s&&void 0!==s&&s.loadNumber&&u.searchParams.append("loadNumber","".concat(s.loadNumber)),null!==s&&void 0!==s&&s.truckNumber&&u.searchParams.append("truckNumber","".concat(s.truckNumber)),l(u)},y=function(e){var r=new URL("/load/".concat(e),c);return l(r,{method:"DELETE"})},g=function(e){var r=new URL("/load",c);return l(r,{method:"POST",body:JSON.stringify(e)})},N=function(e){var r=(0,a.Z)(e.queryKey,6),t=(r[0],r[1]),n=r[2],i=r[3],o=r[4],s=r[5],u=new URL("/owner",c);return u.searchParams.append("limit","".concat(n)),u.searchParams.append("offset","".concat(n*t)),i&&o&&(u.searchParams.append("orderby","".concat(i)),u.searchParams.append("direction","".concat(o))),null!==s&&void 0!==s&&s.fullName&&u.searchParams.append("fullName","".concat(s.fullName)),null!==s&&void 0!==s&&s.truckNumber&&u.searchParams.append("truckNumber","".concat(s.truckNumber)),l(u)},Z=function(e){var r=new URL("/owner/".concat(e),c);return l(r,{method:"DELETE"})},k=function(e){var r=(0,a.Z)(e.queryKey,6),t=(r[0],r[1]),n=r[2],i=r[3],o=r[4],s=r[5],u=new URL("/driver",c);return u.searchParams.append("limit","".concat(n)),u.searchParams.append("offset","".concat(n*t)),i&&o&&(u.searchParams.append("orderby","".concat(i)),u.searchParams.append("direction","".concat(o))),null!==s&&void 0!==s&&s.fullName&&u.searchParams.append("fullName","".concat(s.fullName)),null!==s&&void 0!==s&&s.truckNumber&&u.searchParams.append("truckNumber","".concat(s.truckNumber)),l(u)},R=function(e){var r=new URL("/driver/".concat(e),c);return l(r,{method:"DELETE"})},L=function(e){var r=(0,a.Z)(e.queryKey,6),t=(r[0],r[1]),n=r[2],i=r[3],o=r[4],s=r[5],u=new URL("/coordinator",c);return u.searchParams.append("limit","".concat(n)),u.searchParams.append("offset","".concat(n*t)),i&&o&&(u.searchParams.append("orderby","".concat(i)),u.searchParams.append("direction","".concat(o))),null!==s&&void 0!==s&&s.fullName&&u.searchParams.append("fullName","".concat(s.fullName)),null!==s&&void 0!==s&&s.truckNumber&&u.searchParams.append("truckNumber","".concat(s.truckNumber)),l(u)},P=function(e){var r=new URL("/coordinator/".concat(e),c);return l(r,{method:"DELETE"})},w=function(e){var r=(0,a.Z)(e.queryKey,6),t=(r[0],r[1]),n=r[2],i=r[3],o=r[4],s=r[5],u=new URL("/user",c);return u.searchParams.append("limit","".concat(n)),u.searchParams.append("offset","".concat(n*t)),i&&o&&(u.searchParams.append("orderby","".concat(i)),u.searchParams.append("direction","".concat(o))),null!==s&&void 0!==s&&s.fullName&&u.searchParams.append("fullName","".concat(s.fullName)),l(u)},j=function(e){var r=new URL("/user/".concat(e),c);return l(r,{method:"DELETE"})},E=function(e){var r=new URL("/user",c);return l(r,{method:"POST",body:JSON.stringify(e)})},C=function(e){var r=e.id,t=(0,n.Z)(e,u),a=new URL("/user/".concat(r),c);return l(a,{method:"PATCH",body:JSON.stringify(t)})},S=function(e){var r=new URL("/user/".concat(e.queryKey[1]),c);return l(r,{method:"GET"})}},6015:function(e,r,t){t.r(r),t.d(r,{default:function(){return a}});t(2791);var n=t(184);function a(){return(0,n.jsx)("h3",{children:"404 Not Found"})}},1730:function(e,r,t){t.d(r,{aN:function(){return n.Z},Vr:function(){return u},mg:function(){return f},O6:function(){return b},nv:function(){return s}});var n=t(1605),a=(t(6015),t(7252),t(2791),t(8550)),i=t(4554),o=t(184);function s(e){var r=e.fieldName,t=e.label,n=e.disabled,s=e.formik;return(0,o.jsx)(i.Z,{sx:{height:"75px"},children:(0,o.jsx)(a.Z,{fullWidth:!0,size:"small",disabled:n,id:r,name:r,label:t,value:s.values[r]||"",onChange:s.handleChange,onBlur:s.handleBlur,error:s.touched[r]&&Boolean(s.errors[r]),helperText:s.touched[r]&&s.errors[r]})},r)}function u(e){var r=e.fieldName,t=e.label,n=e.disabled,s=e.formik,u=(0,o.jsx)(i.Z,{sx:{height:"75px"},children:(0,o.jsx)(a.Z,{fullWidth:!0,size:"small",disabled:n,id:"".concat(r,"longitude"),name:"".concat(r,"[0]"),label:"".concat(t[0]),value:isNaN(s.values[r][0])?"":s.values[r][0],onChange:s.handleChange,onBlur:s.handleBlur,error:s.touched[r]&&Boolean(s.errors[r]&&s.errors[r][0]),helperText:s.touched[r]&&s.errors[r]&&s.errors[r][0]})},"".concat(r,"longitude")),c=(0,o.jsx)(i.Z,{sx:{height:"75px"},children:(0,o.jsx)(a.Z,{fullWidth:!0,size:"small",disabled:n,id:"".concat(r,"longitude"),name:"".concat(r,"[1]"),label:"".concat(t[1]),value:isNaN(s.values[r][1])?"":s.values[r][1],onChange:s.handleChange,onBlur:s.handleBlur,error:s.touched[r]&&Boolean(s.errors[r]&&s.errors[r][1]),helperText:s.touched[r]&&s.errors[r]&&s.errors[r][1]})},"".concat(r,"longitude"));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Z,{sx:{p:1,width:"50%"},children:u},"left"),(0,o.jsx)(i.Z,{sx:{p:1,width:"50%"},children:c},"right")]})}var c=t(8096),l=t(4925),d=t(8406),h=t(3786),m=t(7071);function f(e){var r=e.fieldName,t=e.label,n=e.items,a=e.disabled,s=e.formik;return(0,o.jsx)(i.Z,{sx:{height:"75px"},children:(0,o.jsxs)(c.Z,{fullWidth:!0,size:"small",disabled:a,error:s.touched[r]&&Boolean(s.errors[r]),children:[(0,o.jsx)(l.Z,{id:r,children:"User Role"}),(0,o.jsx)(d.Z,{labelId:r,id:r,name:r,label:t,value:s.values[r],onChange:s.handleChange,onBlur:s.handleBlur,children:n.map((function(e){return(0,o.jsx)(h.Z,{value:e,children:e},e)}))}),(0,o.jsx)(m.Z,{children:s.touched[r]&&s.errors[r]})]})},r)}var p=t(9174),v=t(9900);function b(e){var r=e.fieldName,t=e.label,n=e.items,a=e.disabled,s=e.formik;return(0,o.jsx)(i.Z,{sx:{height:"75px"},children:(0,o.jsxs)(c.Z,{fullWidth:!0,size:"small",disabled:a,error:s.touched.truckType&&Boolean(s.errors.truckType),children:[(0,o.jsx)(l.Z,{id:r,children:"Truck Type"}),(0,o.jsx)(d.Z,{labelId:r,id:r,name:r,label:t,multiple:!0,value:s.values[r],renderValue:function(e){return e.join(", ")},onChange:s.handleChange,onBlur:s.handleBlur,children:n.map((function(e){return(0,o.jsxs)(h.Z,{value:e,children:[(0,o.jsx)(p.Z,{checked:s.values[r].indexOf(e)>-1}),(0,o.jsx)(v.Z,{primary:e})]},e)}))}),(0,o.jsx)(m.Z,{children:s.touched[r]&&s.errors[r]})]})},r)}},6322:function(e,r,t){t.r(r),t.d(r,{default:function(){return b}});var n=t(1413),a=(t(2791),t(7689)),i=t(6403),o=t(2917),s=t(3418),u=t(5705),c=t(8007),l=t(4554),d=t(6151),h=t(1730),m=t(344),f=t(4047),p=t(184),v=c.Ry({zipCode:c.Z_().required("Zip Code is required"),name:c.Z_().required("Name is required"),stateCode:c.Z_().required("State Code is required"),stateName:c.Z_().required("State Name is required"),location:c.bc([c.Rx().typeError("Latitude is required").min(-90,"Latitude must be grater than or equal: -90").max(90,"Latitude must be less than or equal: 90").required('Location should be in format "latitude, longitude"'),c.Rx().typeError("Longitude is required").min(-180,"Longitude must be grater than or equal: -180").max(180,"Longitude must be less than or equal: 180").required('Location should be in format "latitude, longitude"')]).required("Location is required")});function b(){var e=(0,a.TH)().pathname,r=(0,a.s0)(),t=(0,i.NL)(),c=(0,f.Ds)(),b=(0,o.a)({queryKey:["location",e.split("/")[3]],queryFn:m.W9,keepPreviousData:!0,onError:function(e){c({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),x=b.isLoading,y=b.isFetching,g=b.data,N=(0,s.D)(m.A0,{onSuccess:function(){c({severity:"success",message:"Saved"}),t.invalidateQueries(["locations"]),r(-1)},onError:function(e){c({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),Z=N.mutate,k=N.isLoading,R=(0,u.TA)({initialValues:(0,n.Z)({id:"",zipCode:"",name:"",stateCode:"",stateName:"",location:[NaN,NaN]},g),enableReinitialize:!0,validationSchema:v,onSubmit:function(e){Z(e)}});return(0,p.jsxs)(l.Z,{children:[(0,p.jsx)("form",{onSubmit:R.handleSubmit,onReset:R.handleReset,children:(0,p.jsxs)(l.Z,{sx:{p:3,display:"grid"},children:[(0,p.jsxs)(l.Z,{sx:{display:"inline-flex"},children:[(0,p.jsxs)(l.Z,{sx:{p:1,width:"50%"},children:[(0,p.jsx)(h.nv,{fieldName:"name",label:"Name",formik:R}),(0,p.jsx)(h.nv,{fieldName:"stateName",label:"State Name",formik:R})]},"left"),(0,p.jsxs)(l.Z,{sx:{p:1,width:"50%",height:"75px"},children:[(0,p.jsx)(h.nv,{fieldName:"zipCode",label:"Zip Code",formik:R}),(0,p.jsx)(h.nv,{fieldName:"stateCode",label:"State Code",formik:R})]},"right")]},"controls"),(0,p.jsx)(l.Z,{sx:{marginTop:-2,display:"inline-flex"},children:(0,p.jsx)(h.Vr,{fieldName:"location",label:["Latitude","Longitude"],formik:R})},"location"),(0,p.jsxs)(l.Z,{sx:{display:"inline-flex"},children:[(0,p.jsx)(l.Z,{sx:{p:1,paddingTop:0,width:"50%"},children:(0,p.jsx)(d.Z,{fullWidth:!0,variant:"contained",size:"small",color:"primary",type:"submit",disabled:!R.dirty,children:"Save"})},"left"),(0,p.jsx)(l.Z,{sx:{p:1,paddingTop:0,width:"50%"},children:(0,p.jsx)(d.Z,{fullWidth:!0,variant:"contained",size:"small",color:"primary",type:"button",onClick:function(){r(-1)},children:"Cancel"})},"right")]},"buttons")]})}),(0,p.jsx)(h.aN,{visible:k||x||y})]})}},3418:function(e,r,t){t.d(r,{D:function(){return b}});var n=t(1413),a=t(9439),i=t(2791),o=t(3734),s=t(5671),u=t(3144),c=t(136),l=t(7277),d=t(2565),h=t(9538),m=function(e){(0,c.Z)(t,e);var r=(0,l.Z)(t);function t(e,n){var a;return(0,s.Z)(this,t),(a=r.call(this)).client=e,a.setOptions(n),a.bindMethods(),a.updateResult(),a}return(0,u.Z)(t,[{key:"bindMethods",value:function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}},{key:"setOptions",value:function(e){var r,t=this.options;this.options=this.client.defaultMutationOptions(e),(0,o.VS)(t,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(r=this.currentMutation)||r.setOptions(this.options)}},{key:"onUnsubscribe",value:function(){var e;this.hasListeners()||(null==(e=this.currentMutation)||e.removeObserver(this))}},{key:"onMutationUpdate",value:function(e){this.updateResult();var r={listeners:!0};"success"===e.type?r.onSuccess=!0:"error"===e.type&&(r.onError=!0),this.notify(r)}},{key:"getCurrentResult",value:function(){return this.currentResult}},{key:"reset",value:function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}},{key:"mutate",value:function(e,r){return this.mutateOptions=r,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,(0,n.Z)((0,n.Z)({},this.options),{},{variables:"undefined"!==typeof e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()}},{key:"updateResult",value:function(){var e=this.currentMutation?this.currentMutation.state:(0,d.R)(),r=(0,n.Z)((0,n.Z)({},e),{},{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset});this.currentResult=r}},{key:"notify",value:function(e){var r=this;h.V.batch((function(){var t,n,a,i;if(r.mutateOptions&&r.hasListeners())if(e.onSuccess)null==(t=(n=r.mutateOptions).onSuccess)||t.call(n,r.currentResult.data,r.currentResult.variables,r.currentResult.context),null==(a=(i=r.mutateOptions).onSettled)||a.call(i,r.currentResult.data,null,r.currentResult.variables,r.currentResult.context);else if(e.onError){var o,s,u,c;null==(o=(s=r.mutateOptions).onError)||o.call(s,r.currentResult.error,r.currentResult.variables,r.currentResult.context),null==(u=(c=r.mutateOptions).onSettled)||u.call(c,void 0,r.currentResult.error,r.currentResult.variables,r.currentResult.context)}e.listeners&&r.listeners.forEach((function(e){(0,e.listener)(r.currentResult)}))}))}}]),t}(t(5511).l),f=t(7413),p=t(6403),v=t(9608);function b(e,r,t){var s=(0,o.lV)(e,r,t),u=(0,p.NL)({context:s.context}),c=i.useState((function(){return new m(u,s)})),l=(0,a.Z)(c,1)[0];i.useEffect((function(){l.setOptions(s)}),[l,s]);var d=(0,f.$)(i.useCallback((function(e){return l.subscribe(h.V.batchCalls(e))}),[l]),(function(){return l.getCurrentResult()}),(function(){return l.getCurrentResult()})),b=i.useCallback((function(e,r){l.mutate(e,r).catch(x)}),[l]);if(d.error&&(0,v.L)(l.options.useErrorBoundary,[d.error]))throw d.error;return(0,n.Z)((0,n.Z)({},d),{},{mutate:b,mutateAsync:d.mutate})}function x(){}}}]);
//# sourceMappingURL=322.b0dfdd5d.chunk.js.map