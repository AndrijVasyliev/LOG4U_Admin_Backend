"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[2018],{2018:(e,r,i)=>{i.r(r),i.d(r,{default:()=>w});var t=i(5043),s=i(9781),o=i(5604),d=i(2836),a=i(3892),l=i(899),n=i(4516),u=i(1906),c=i(9336),m=i(1403),f=i(6216),p=i(9893),q=i(4361),y=i(3189),h=i(1079),g=i(908),b=i(8833),k=i(6431),j=i(579);const x=l.Ik({type:l.Yj().oneOf([b.P7.FCFS,b.P7.ASAP,b.P7.APPT]).required("Type is required"),at:l.p6().when(["type"],((e,r)=>e[0]===b.P7.FCFS?r.oneOf([void 0]):r.required("At is required"))),from:l.p6().when(["type"],((e,r)=>e[0]!==b.P7.FCFS?r.oneOf([void 0]):r.required("From is required"))),to:l.p6().when(["type"],((e,r)=>e[0]!==b.P7.FCFS?r.oneOf([void 0]):r.required("To is required")))}),v=l.Ik({type:l.Yj().oneOf([b.P7.FCFS,b.P7.Direct,b.P7.APPT]).required("Type is required"),at:l.p6().when(["type"],((e,r)=>e[0]===b.P7.FCFS?r.oneOf([void 0]):r.required("At is required"))),from:l.p6().when(["type"],((e,r)=>e[0]!==b.P7.FCFS?r.oneOf([void 0]):r.required("From is required"))),to:l.p6().when(["type"],((e,r)=>e[0]!==b.P7.FCFS?r.oneOf([void 0]):r.required("To is required")))}),A=l.Ik({pieces:l.ai().integer().min(1).required("Pieces must be at least 1"),unitOfWeight:l.Yj().oneOf(b.Lv).required("Unit of weight is required"),weight:l.ai().moreThan(0).required("Weight is required"),unitOfLength:l.Yj().oneOf(b.Ny).required("Unit of length is required"),length:l.ai().moreThan(0).required("Length is required")}),S=l.Ik({bol:l.Yj().required("Bol is required"),pieces:l.ai().integer().min(1).required("Pieces must be at least 1"),unitOfWeight:l.Yj().oneOf(b.Lv).required("Unit of weight is required"),weight:l.ai().moreThan(0).required("Weight is required"),seal:l.Yj().required("Seal is required"),addressIsCorrect:l.zM().required("Address Is Correct is required")}),T=l.Ik({bol:l.Yj().required("Bol is required"),signedBy:l.Yj().required("Signed By is required")}),I=l.Ik({status:l.Yj().oneOf(b.h9).required("Stop Pick Up Status is required"),facility:l.Ik({id:l.Yj().required()}).typeError("Enter correct facility").required("Facility is required"),timeFrame:x.required("Time frame is required"),freightList:l.YO().of(A.required("Freight is required")).required("Stop pickup must contain al least one freight"),driversInfo:l.YO().of(S.required("Stop PickUp Drivers Info is required")).optional(),addInfo:l.Yj()}),F=l.Ik({status:l.Yj().oneOf(b.$W).required("Stop Delivery Status is required"),facility:l.Ik({id:l.Yj().required()}).typeError("Enter correct facility").required("Facility is required"),timeFrame:v.required("Time frame is required"),driversInfo:l.YO().of(T.required("Stop Delivery Drivers Info is required")).optional(),addInfo:l.Yj()}),Y=l.Ik({status:l.Yj().oneOf(b.Jf).required("Status is required"),ref:l.YO().of(l.Yj().required("Ref must not be empty")).min(1,"REF is required").max(3,"REF must contain not more then 3 items").required("REF is required"),stops:l.YO().of(l.RZ((e=>{switch(e.type){case b.lk.PickUp:return I.required("Stop pickup is required");case b.lk.Delivery:return F.required("Stop delivery is required");default:return l.gl().oneOf([void 0]).required('Type of stop must be "Pick Up" or "Delivery"')}}))).min(2).required("Stops are required"),weight:l.Yj().required("Weight is required"),truckType:l.YO(l.Yj().oneOf(b.Ju)).min(1,"Select at list one").required("Truck Type is required"),rate:l.ai().typeError("Rate must be a number"),totalCharges:l.ai().typeError("Total charges must be a number").required("Total charges is required"),currency:l.Yj().required("Currency is required"),bookedByUser:l.Ik({id:l.Yj().required()}).required("Booked by is required"),bookedByCompany:l.Yj(),assignTo:l.YO(l.Ik({id:l.Yj().required()}).typeError("Enter correct user")).min(1,"Assign To is required").required("Assign To is required"),checkInAs:l.Yj(),truck:l.Ik({id:l.Yj().required()}).typeError("Enter correct truck").nullable(),bookedWith:l.Ik({id:l.Yj().required()}).typeError("Enter correct customer").required("Booked with is required")}),C={id:"",status:"Available",ref:[],stops:[],weight:void 0,truckType:[],rate:void 0,totalCharges:void 0,currency:"USD",bookedByUser:null,bookedByCompany:void 0,assignTo:[],checkInAs:"4ULogistics",truck:null,bookedWith:null};function w(e){let{id:r,onClose:i}=e;const[l,x]=t.useState(C),v=(0,s.jE)(),A=(0,g.dh)(),{isLoading:S,isFetching:T,error:I,data:F}=(0,o.I)({queryKey:["load",r],queryFn:h.bQ,retry:!1});t.useEffect((()=>{I&&A({severity:"error",message:I instanceof Error?I.message:JSON.stringify(I)})}),[I]);const{mutate:w,isLoading:L}=(0,d.n)(h.QD,{onSuccess:e=>{A({severity:"success",message:"Saved"}),v.invalidateQueries(["load",r]),v.invalidateQueries(["loads"]),i("Save",e)},onError:e=>{A({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),O=(0,a.Wx)({initialValues:l,enableReinitialize:!0,validationSchema:Y,onSubmit:e=>{w(e)}});t.useEffect((()=>{x({...l,...(0,k.jv)(F,Object.keys(l))})}),[F]);return(0,j.jsxs)(n.A,{sx:{height:"100%"},children:[(0,j.jsx)("form",{onSubmit:O.handleSubmit,onReset:O.handleReset,style:{height:"100%"},children:(0,j.jsxs)(n.A,{sx:{p:3,height:"100%"},children:[(0,j.jsx)(c.A,{}),(0,j.jsxs)(n.A,{sx:{maxHeight:"calc(100% - 70px)",overflowX:"hidden",overflowY:"scroll"},children:[(0,j.jsxs)(n.A,{sx:{marginBottom:-1,p:1},children:[(0,j.jsx)(y.zM,{fieldName:"status",label:"Status",items:b.Jf,formik:O}),(0,j.jsx)(y.A_,{fieldName:"ref",label:"REF",multiline:!0,maxRows:3,formik:O}),(0,j.jsx)(q.A,{fieldName:"stops",formik:O})]},"topControls"),(0,j.jsxs)(n.A,{sx:{display:"inline-flex",width:"100%"},children:[(0,j.jsxs)(n.A,{sx:{p:1,width:"50%"},children:[(0,j.jsx)(y.A_,{fieldName:"weight",label:"Weight",formik:O}),(0,j.jsx)(y.yJ,{fieldName:"truckType",label:"Truck Type",items:b.Ju,formik:O}),(0,j.jsx)(y.Lw,{fieldName:"bookedByUser",label:"Booked By",getSelectedLabel:e=>`${e.fullName}`,getItemLabel:e=>`${e.fullName}`,getItemSecondLabel:e=>`${e.jobTitle}`,ListIcon:p.A,entityType:"User",queryFn:h.Fw,orderby:"fullName",order:"asc",formik:O}),(0,j.jsx)(y.Lw,{fieldName:"bookedWith",label:"Booked With",getSelectedLabel:e=>`${e.name}`,getItemLabel:e=>`${e.name}`,getItemSecondLabel:e=>`${e.type}`,ListIcon:f.A,entityType:"Customer",queryFn:h.sg,orderby:"name",order:"asc",formik:O}),(0,j.jsx)(y.Lw,{fieldName:"truck",label:"Truck",getSelectedLabel:e=>`${e.truckNumber}`,getItemLabel:e=>`${e.truckNumber}`,getItemSecondLabel:e=>`${e.status}, ${e.licencePlate}`,ListIcon:m.A,entityType:"Truck",queryFn:h.fG,orderby:"truckNumber",order:"asc",formik:O})]},"left"),(0,j.jsxs)(n.A,{sx:{p:1,width:"50%"},children:[(0,j.jsx)(y.A_,{fieldName:"rate",label:"Rate",number:!0,formik:O}),(0,j.jsx)(y.A_,{fieldName:"totalCharges",label:"Total Charges",placeholder:"Enter total rate",number:!0,formik:O}),(0,j.jsx)(y.A_,{fieldName:"currency",label:"Currency",formik:O}),(0,j.jsx)(y.A_,{fieldName:"checkInAs",label:"Check In As",formik:O}),(0,j.jsx)(y.A_,{fieldName:"bookedByCompany",label:"Booked By Company",formik:O})]},"right")]},"centerControls"),(0,j.jsxs)(n.A,{sx:{p:1,paddingBottom:0,paddingTop:0},children:[(0,j.jsx)(y.YY,{fieldName:"assignTo",label:"Assign To",getSelectedLabel:e=>`${e.fullName}`,getItemLabel:e=>`${e.fullName}`,getItemSecondLabel:e=>`${e.jobTitle}`,ListIcon:p.A,queryFn:h.Fw,orderby:"fullName",order:"asc",formik:O}),(0,j.jsx)(n.A,{sx:{paddingBottom:2,paddingTop:2}},"spacerRate"),(0,j.jsx)(y.$c,{objectId:null===F||void 0===F?void 0:F.id,objectType:"Load",label:"Rate Files",tags:{[`${null===F||void 0===F?void 0:F.id}`]:"Rate"}}),(0,j.jsx)(n.A,{sx:{paddingBottom:2,paddingTop:2}},"spacerBill"),(0,j.jsx)(y.$c,{objectId:null===F||void 0===F?void 0:F.id,objectType:"Load",label:"Bill Files",tags:{[`${null===F||void 0===F?void 0:F.id}`]:"Bill"}})]},"bottomControls")]},"controls"),(0,j.jsx)(c.A,{}),(0,j.jsxs)(n.A,{sx:{paddingTop:3,display:"flex"},children:[(0,j.jsx)(n.A,{sx:{p:1,paddingTop:0,width:"50%"},children:(0,j.jsx)(u.A,{fullWidth:!0,variant:"contained",size:"small",color:"primary",type:"submit",disabled:!O.dirty,children:"Save"})},"left"),(0,j.jsx)(n.A,{sx:{p:1,paddingTop:0,width:"50%"},children:(0,j.jsx)(u.A,{fullWidth:!0,variant:"contained",size:"small",color:"primary",type:"button",onClick:()=>{i("Close")},children:"Cancel"})},"right")]},"buttons")]})}),(0,j.jsx)(y.aH,{visible:L||S||T})]})}}}]);
//# sourceMappingURL=2018.8d317dfa.chunk.js.map