"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[9507],{9507:(e,t,r)=>{r.r(t),r.d(t,{default:()=>U});var n=r(5043),i=r(9781),a=r(2836),s=r(5604),d=r(4535),l=r(1546),o=r(7784),c=r(1962),u=r(7739),h=r(39),x=r(7353),p=r(1806),m=r(3460),g=r(9650),b=r(4882),A=r(9090),j=r(8076),f=r(8093),v=r(5263),k=r(4496),y=r(1596),w=r(7392),P=r(1809),S=r(9397),$=r(524),C=r(8612),F=r(1079),D=r(4944),T=r(7166),E=r(6431),N=r(9904),O=r(579);const _=[{id:"state",orderField:"state",getData:e=>({data:`${e.state}`}),numeric:!1,disablePadding:!0,label:"Push\xa0State"},{id:"createdAt",orderField:"createdAt",getData:e=>{const t=`${e.createdAt?N.k.format(new Date(e.createdAt)):""}`;return{data:(0,O.jsx)("span",{children:`${t}`}),title:t}},numeric:!1,disablePadding:!0,label:"Created\xa0At"},{id:"updatedAt",orderField:"updatedAt",getData:e=>{const t=`${e.updatedAt?N.k.format(new Date(e.updatedAt)):""}`;return{data:(0,O.jsx)("span",{children:`${t}`}),title:t}},numeric:!1,disablePadding:!0,label:"Updated\xa0At"},{id:"title",getData:e=>{const t=`${e.title||""}`,r=`${e.subtitle||""}`;return{data:(0,O.jsxs)("span",{children:[`${t}`,(0,O.jsx)("br",{}),`${r}`]}),title:t+"\n"+r}},numeric:!1,disablePadding:!0,label:"Title/Subtitle"},{id:"body",getData:e=>{const t=`${e.body||""}`;return{data:(0,O.jsx)("span",{children:`${t}`}),title:t}},numeric:!1,disablePadding:!0,label:"Body"},{id:"to",getData:e=>{const t=`${e.to.fullName}`,r=`${(0,E.Pw)(e.to)}`,n=`./${(0,E.Yn)(e.to)}/view/${e.to.id}`;return{data:(0,O.jsxs)("span",{children:[(0,O.jsx)("a",{href:n,target:"_blank",onClick:T.d,children:`${t}`}),(0,O.jsx)("br",{}),`${r}`]}),title:t+"\n"+r}},numeric:!1,disablePadding:!0,label:"To"}],I=(0,d.Ay)(b.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),q=(0,d.Ay)(h.A)((()=>({maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})));function B(e){const{onSelectAllClick:t,order:r,orderBy:n,numSelected:i,rowCount:a,onRequestSort:s}=e;return(0,O.jsx)(I,{children:(0,O.jsxs)(j.A,{children:[(0,O.jsx)(q,{padding:"checkbox",children:(0,O.jsx)(c.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:i>0&&i<a,checked:a>0&&i===a,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),_.map((e=>{return(0,O.jsx)(q,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:n===e.id&&r,children:(0,O.jsxs)(f.A,{active:e.orderField&&n===e.orderField,hideSortIcon:!e.orderField,direction:n===e.orderField?r:"asc",onClick:e.orderField?(t=e.orderField,e=>{s(e,t)}):()=>{},children:[e.label,e.orderField&&n===e.orderField?(0,O.jsx)(x.A,{component:"span",sx:$.A,children:"desc"===r?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function R(e){const{selected:t,setQueryParams:r}=e,[s,d]=n.useState(""),[c,h]=n.useState(0),[p,m]=n.useState(!1),g=(0,i.jE)(),b=(0,D.dh)(),{isLoading:A}=(0,a.n)(F.$l,{onSuccess:()=>{b({severity:"success",message:"Deleted"}),g.invalidateQueries(["push"])},onError:e=>{b({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),j=()=>{m(!1),d(""),h(0),r({})},f=()=>{m(!1);const e={};s&&(e.search=s),c&&(e.truckNumber=c),r(e)},y=e=>{"Enter"===e.key&&(s||c?f():j())};return(0,O.jsxs)(v.A,{sx:{overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1},...t.length>0&&{bgcolor:e=>(0,l.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[t.length>0?(0,O.jsxs)(k.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,O.jsx)(k.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Pushs"}),(0,O.jsx)(x.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,O.jsx)(o.A,{label:"Person",value:s,onChange:e=>{d(e.target.value),m(!0)},onKeyUp:y,size:"small"})}),(0,O.jsx)(x.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,O.jsx)(o.A,{label:"Truck Number",value:c||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(h(Number(e.target.value)),m(!0))},onKeyUp:y,size:"small"})}),(0,O.jsx)(u.A,{title:"Filter list",children:!p&&(s||c)||p&&!s&&p&&!c?(0,O.jsx)("span",{children:(0,O.jsx)(w.A,{onClick:j,children:(0,O.jsx)(S.A,{})})}):(0,O.jsx)("span",{children:(0,O.jsx)(w.A,{disabled:!s&&!c,onClick:f,children:(0,O.jsx)(P.A,{})})})}),(0,O.jsx)(x.A,{sx:{p:1,display:"inline-flex"}}),(0,O.jsx)(C.A,{visible:A})]})}function U(){const[e,t]=n.useState("desc"),[r,i]=n.useState("createdAt"),[a,d]=n.useState([]),[l,o]=n.useState(0),[u,h]=n.useState(15),[b,f]=n.useState({}),v=n.useRef(null),k=(0,D.dh)(),{isLoading:w,isFetching:P,error:S,data:{items:$,total:T}={items:[],total:0}}=(0,s.I)({queryKey:["pushs",l,u,r,e,b],queryFn:F.wA,keepPreviousData:!0,retry:!1});n.useEffect((()=>{S&&k({severity:"error",message:S instanceof Error?S.message:JSON.stringify(S)})}),[S]);const E=$||[];n.useEffect((()=>{if(v.current){v.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[E]),n.useEffect((()=>{const e=[];a.forEach((t=>{E.find((e=>e.id===t))&&e.push(t)})),d(e)}),[E]);return(0,O.jsxs)(x.A,{sx:{width:"100%",height:"100%"},children:[(0,O.jsxs)(y.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,O.jsx)(R,{selected:a,setQueryParams:e=>{f(e),o(0)}}),(0,O.jsx)(g.A,{ref:v,sx:{height:"calc(100% - 115px)"},children:(0,O.jsxs)(p.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,O.jsx)(B,{numSelected:a.length,order:e,orderBy:r,onSelectAllClick:e=>{if(e.target.checked){const e=E.map((e=>e.id));d(e)}else d([])},onRequestSort:(n,a)=>{const s=r===a&&"asc"===e;r===a&&"desc"===e?(t(void 0),i(void 0)):(t(s?"desc":"asc"),i(a))},rowCount:E.length}),(0,O.jsx)(m.A,{children:E.map(((e,t)=>{const r=(n=`${e.id}`,-1!==a.indexOf(n));var n;const i=`enhanced-table-checkbox-${t}`;return(0,O.jsxs)(j.A,{hover:!0,onDoubleClick:()=>{},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,sx:{cursor:"pointer"},children:[(0,O.jsx)(q,{padding:"checkbox",children:(0,O.jsx)(c.A,{id:`${i}`,color:"primary",checked:r,inputProps:{"aria-labelledby":i},onClick:t=>((e,t)=>{e.stopPropagation();const r=a.indexOf(t);let n=[];-1===r?n=n.concat(a,t):0===r?n=n.concat(a.slice(1)):r===a.length-1?n=n.concat(a.slice(0,-1)):r>0&&(n=n.concat(a.slice(0,r),a.slice(r+1))),d(n)})(t,`${e.id}`)})}),_.map((t=>{const r=t.getData(e);return(0,O.jsx)(q,{title:r.title,align:t.numeric?"right":"center",children:r.data},t.id)}))]},e.id)}))})]})}),(0,O.jsx)(A.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:T,rowsPerPage:u,page:l,onPageChange:(e,t)=>{o(t)},onRowsPerPageChange:e=>{h(parseInt(e.target.value,10)),o(0)}})]}),(0,O.jsx)(C.A,{visible:w||P})]})}},9904:(e,t,r)=>{r.d(t,{k:()=>n});const n=Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0})}}]);
//# sourceMappingURL=9507.8f32ac67.chunk.js.map