"use strict";(self.webpackChunkadmin_frontend=self.webpackChunkadmin_frontend||[]).push([[56],{9056:function(n,e,a){a.r(e),a.d(e,{default:function(){return E}});var r=a(5987),t=a(9439),c=a(1413),o=a(2791),i=a(8404),s=a(3543),u=a(4070),l=a(5931),d=a(5289),p=a(7123),m=a(9157),f=a(6151),h=a(1691),v=a(5661),P=a(4554),b=a(9259),k=a(1697),N=a(4765),w=a(344),g=a(184),j=["onCLick","clusterer","map","position"],x={lat:39.828922654821866,lng:-98.57947970000001},L=5,Z=o.forwardRef((function(n,e){return(0,g.jsx)(l.Z,(0,c.Z)({direction:"up",ref:e},n))}));function E(){var n=o.useState(null),e=(0,t.Z)(n,2),a=e[0],r=e[1],c=(0,i.a)({queryKey:["trucksMap"],queryFn:function(){return(0,w.g7)(0,25e3)},keepPreviousData:!0}),s=c.isLoading,u=c.isFetching,l=c.data,k=(void 0===l?{items:[]}:l).items||[],j=function(){r(null)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(P.Z,{component:"main",sx:{flexGrow:1,p:1,height:"100%",width:"100%"},children:(0,g.jsx)(b.Wrapper,{apiKey:"AIzaSyCXHo65x6xwfIPmz5GAZ2B2laVghupH7Dg",render:y,children:(0,g.jsx)(R,{center:x,zoom:L,children:(0,g.jsx)(C,{children:k.filter((function(n){return n.lastLocation})).map((function(n){return(0,g.jsx)(U,{onCLick:function(){return e=n.id,void r(k.find((function(n){return n.id===e}))||null);var e},optimized:!0,animation:window.google.maps.Animation&&window.google.maps.Animation.DROP,title:"".concat(n.truckNumber,"\n").concat(n.status),position:{lat:n.lastLocation[0],lng:n.lastLocation[1]}},n.id)}))})})})}),(0,g.jsxs)(d.Z,{open:!!a,TransitionComponent:Z,keepMounted:!0,onClose:j,"aria-describedby":"alert-dialog-slide-description",children:[(0,g.jsx)(v.Z,{children:(0,g.jsxs)("span",{children:["TRUCK NUMBER:\xa0",(0,g.jsx)("a",{href:"./trucks/".concat(null===a||void 0===a?void 0:a.id),target:"_blank",children:null===a||void 0===a?void 0:a.truckNumber})]})}),(0,g.jsx)(m.Z,{children:(0,g.jsx)(h.Z,{id:"alert-dialog-slide-description",children:"CURRENT STATUS: ".concat(null===a||void 0===a?void 0:a.status)})}),(0,g.jsx)(p.Z,{children:(0,g.jsx)(f.Z,{onClick:j,children:"Close"})})]}),(0,g.jsx)(N.Z,{visible:s||u})]})}var y=function(n){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(s.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:n===b.Status.FAILURE,TransitionComponent:Z,children:(0,g.jsx)(u.Z,{elevation:6,variant:"filled",severity:"error",sx:{width:"100%"},children:"Error loading maps!"})}),(0,g.jsx)(N.Z,{visible:n===b.Status.LOADING})]})};function R(n){var e=n.center,a=n.zoom,r=n.children,c=o.useRef(null),i=o.useState(),s=(0,t.Z)(i,2),u=s[0],l=s[1];o.useEffect((function(){c.current&&!u&&l(new window.google.maps.Map(c.current,{center:e,zoom:a}))}),[c,u]);var d=o.Children.only(r);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{height:"100%",width:"100%"},ref:c,id:"map"}),o.isValidElement(d)&&o.cloneElement(d,{map:u})]})}function C(n){var e=n.map,a=n.children,r=o.useState(),c=(0,t.Z)(r,2),i=c[0],s=c[1];return o.useEffect((function(){return i||s(new k.XL({})),function(){i&&i.setMap(null)}}),[i]),o.useEffect((function(){i&&e&&i.setMap(e)}),[e]),o.useEffect((function(){i&&i.render()}),[e,a]),null===i||void 0===i||i.render(),(0,g.jsx)(g.Fragment,{children:o.Children.map(a,(function(n){if(o.isValidElement(n))return o.cloneElement(n,{map:e,clusterer:i})}))})}var U=function(n){var e=n.onCLick,a=n.clusterer,c=n.map,i=n.position,s=(0,r.Z)(n,j),u=o.useState(),l=(0,t.Z)(u,2),d=l[0],p=l[1];return o.useEffect((function(){if(!d){var n=new window.google.maps.Marker;p(n),n.addListener("click",e)}return function(){d&&(d.setMap(null),null===a||void 0===a||a.removeMarker(d,!1))}}),[d]),o.useEffect((function(){d&&d.setMap(c||null)}),[d,c]),o.useEffect((function(){d&&d.setPosition(i)}),[d,i&&"".concat(null===i||void 0===i?void 0:i.lat,",").concat(null===i||void 0===i?void 0:i.lng)]),o.useEffect((function(){d&&(null===a||void 0===a||a.addMarker(d,!1))}),[d,a]),o.useEffect((function(){d&&d.setOptions(s)}),[d,s]),null}},344:function(n,e,a){a.d(e,{Wn:function(){return d},BB:function(){return l},kg:function(){return s},He:function(){return i},_H:function(){return u},g7:function(){return o},np:function(){return p}});var r=a(3619),t=new URL(window.location.href).origin,c=function(n){var e,a,t={headers:new Headers};return t.headers.set("Authorization","Basic "+btoa((null===(e=r.b.user)||void 0===e?void 0:e.username)+":"+(null===(a=r.b.user)||void 0===a?void 0:a.password))),fetch(n,t)},o=function(n,e,a,r,o){var i=new URL("/truck",t);return i.searchParams.append("limit","".concat(e)),i.searchParams.append("offset","".concat(e*n)),a&&r&&(i.searchParams.append("orderby","".concat(a)),i.searchParams.append("direction","".concat(r))),null!==o&&void 0!==o&&o.truckNumber&&i.searchParams.append("truckNumber","".concat(o.truckNumber)),null!==o&&void 0!==o&&o.lastLocation&&null!==o&&void 0!==o&&o.distance&&(i.searchParams.append("lastLocation","".concat(o.lastLocation)),i.searchParams.append("distance","".concat(o.distance))),c(i).then((function(n){return n.json()}))},i=function(n,e,a,r,o){var i=new URL("/location",t);return i.searchParams.append("limit","".concat(e)),i.searchParams.append("offset","".concat(e*n)),a&&r&&(i.searchParams.append("orderby","".concat(a)),i.searchParams.append("direction","".concat(r))),null!==o&&void 0!==o&&o.search&&i.searchParams.append("search","".concat(o.search)),null!==o&&void 0!==o&&o.name&&i.searchParams.append("name","".concat(o.name)),c(i).then((function(n){return n.json()}))},s=function(n,e,a,r,o){var i=new URL("/load",t);return i.searchParams.append("limit","".concat(e)),i.searchParams.append("offset","".concat(e*n)),a&&r&&(i.searchParams.append("orderby","".concat(a)),i.searchParams.append("direction","".concat(r))),null!==o&&void 0!==o&&o.loadNumber&&i.searchParams.append("loadNumber","".concat(o.loadNumber)),null!==o&&void 0!==o&&o.truckNumber&&i.searchParams.append("truckNumber","".concat(o.truckNumber)),c(i).then((function(n){return n.json()}))},u=function(n,e,a,r,o){var i=new URL("/owner",t);return i.searchParams.append("limit","".concat(e)),i.searchParams.append("offset","".concat(e*n)),a&&r&&(i.searchParams.append("orderby","".concat(a)),i.searchParams.append("direction","".concat(r))),null!==o&&void 0!==o&&o.fullName&&i.searchParams.append("fullName","".concat(o.fullName)),null!==o&&void 0!==o&&o.truckNumber&&i.searchParams.append("truckNumber","".concat(o.truckNumber)),c(i).then((function(n){return n.json()}))},l=function(n,e,a,r,o){var i=new URL("/driver",t);return i.searchParams.append("limit","".concat(e)),i.searchParams.append("offset","".concat(e*n)),a&&r&&(i.searchParams.append("orderby","".concat(a)),i.searchParams.append("direction","".concat(r))),null!==o&&void 0!==o&&o.fullName&&i.searchParams.append("fullName","".concat(o.fullName)),null!==o&&void 0!==o&&o.truckNumber&&i.searchParams.append("truckNumber","".concat(o.truckNumber)),c(i).then((function(n){return n.json()}))},d=function(n,e,a,r,o){var i=new URL("/coordinator",t);return i.searchParams.append("limit","".concat(e)),i.searchParams.append("offset","".concat(e*n)),a&&r&&(i.searchParams.append("orderby","".concat(a)),i.searchParams.append("direction","".concat(r))),null!==o&&void 0!==o&&o.fullName&&i.searchParams.append("fullName","".concat(o.fullName)),null!==o&&void 0!==o&&o.truckNumber&&i.searchParams.append("truckNumber","".concat(o.truckNumber)),c(i).then((function(n){return n.json()}))},p=function(n,e,a,r,o){var i=new URL("/user",t);return i.searchParams.append("limit","".concat(e)),i.searchParams.append("offset","".concat(e*n)),a&&r&&(i.searchParams.append("orderby","".concat(a)),i.searchParams.append("direction","".concat(r))),null!==o&&void 0!==o&&o.fullName&&i.searchParams.append("fullName","".concat(o.fullName)),c(i).then((function(n){return n.json()}))}}}]);
//# sourceMappingURL=56.3efad033.chunk.js.map