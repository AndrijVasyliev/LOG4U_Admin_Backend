"use strict";(self.webpackChunkadmin_frontend=self.webpackChunkadmin_frontend||[]).push([[56],{9056:function(e,n,r){r.r(n),r.d(n,{default:function(){return R}});var a=r(5987),t=r(9439),c=r(1413),o=r(2791),i=r(2917),u=r(5931),s=r(5289),d=r(7123),l=r(9157),m=r(6151),f=r(1691),p=r(5661),h=r(4554),v=r(9259),w=r(1697),P=r(1605),E=r(344),k=r(4047),b=r(184),N=["onCLick","clusterer","map","position"],g={lat:39.828922654821866,lng:-98.57947970000001},L=5,y=o.forwardRef((function(e,n){return(0,b.jsx)(u.Z,(0,c.Z)({direction:"up",ref:n},e))}));function R(){var e=o.useState(null),n=(0,t.Z)(e,2),r=n[0],a=n[1],c=(0,i.a)({queryKey:["trucksMap",0,25e3],queryFn:E.g7,keepPreviousData:!0}),u=c.isLoading,w=c.isFetching,k=c.data,N=(void 0===k?{items:[]}:k).items||[],R=function(){a(null)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Z,{component:"main",sx:{flexGrow:1,p:1,height:"100%",width:"100%"},children:(0,b.jsx)(v.Wrapper,{apiKey:"AIzaSyCXHo65x6xwfIPmz5GAZ2B2laVghupH7Dg",render:Z,children:(0,b.jsx)(x,{center:g,zoom:L,children:(0,b.jsx)(j,{children:N.filter((function(e){return e.lastLocation})).map((function(e){return(0,b.jsx)(U,{onCLick:function(){return n=e.id,void a(N.find((function(e){return e.id===n}))||null);var n},optimized:!0,animation:window.google.maps.Animation&&window.google.maps.Animation.DROP,title:"".concat(e.truckNumber,"\n").concat(e.status),position:{lat:e.lastLocation[0],lng:e.lastLocation[1]}},e.id)}))})})})}),(0,b.jsxs)(s.Z,{open:!!r,TransitionComponent:y,keepMounted:!0,onClose:R,"aria-describedby":"alert-dialog-slide-description",children:[(0,b.jsx)(p.Z,{children:(0,b.jsxs)("span",{children:["TRUCK NUMBER:\xa0",(0,b.jsx)("a",{href:"./trucks/".concat(null===r||void 0===r?void 0:r.id),target:"_blank",children:null===r||void 0===r?void 0:r.truckNumber})]})}),(0,b.jsx)(l.Z,{children:(0,b.jsx)(f.Z,{id:"alert-dialog-slide-description",children:"CURRENT STATUS: ".concat(null===r||void 0===r?void 0:r.status)})}),(0,b.jsx)(d.Z,{children:(0,b.jsx)(m.Z,{onClick:R,children:"Close"})})]}),(0,b.jsx)(P.Z,{visible:u||w})]})}var Z=function(e){var n=(0,k.Ds)();return e===v.Status.FAILURE&&n({severity:"error",message:"Error loading maps!"}),(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(P.Z,{visible:e===v.Status.LOADING})})};function x(e){var n=e.center,r=e.zoom,a=e.children,c=o.useRef(null),i=o.useState(),u=(0,t.Z)(i,2),s=u[0],d=u[1];o.useEffect((function(){c.current&&!s&&d(new window.google.maps.Map(c.current,{center:n,zoom:r}))}),[c,s]);var l=o.Children.only(a);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{height:"100%",width:"100%"},ref:c,id:"map"}),o.isValidElement(l)&&o.cloneElement(l,{map:s})]})}function j(e){var n=e.map,r=e.children,a=o.useState(),c=(0,t.Z)(a,2),i=c[0],u=c[1];return o.useEffect((function(){return i||u(new w.XL({})),function(){i&&i.setMap(null)}}),[i]),o.useEffect((function(){i&&n&&i.setMap(n)}),[n]),o.useEffect((function(){i&&i.render()}),[n,r]),null===i||void 0===i||i.render(),(0,b.jsx)(b.Fragment,{children:o.Children.map(r,(function(e){if(o.isValidElement(e))return o.cloneElement(e,{map:n,clusterer:i})}))})}var U=function(e){var n=e.onCLick,r=e.clusterer,c=e.map,i=e.position,u=(0,a.Z)(e,N),s=o.useState(),d=(0,t.Z)(s,2),l=d[0],m=d[1];return o.useEffect((function(){if(!l){var e=new window.google.maps.Marker;m(e),e.addListener("click",n)}return function(){l&&(l.setMap(null),null===r||void 0===r||r.removeMarker(l,!1))}}),[l]),o.useEffect((function(){l&&l.setMap(c||null)}),[l,c]),o.useEffect((function(){l&&l.setPosition(i)}),[l,i&&"".concat(null===i||void 0===i?void 0:i.lat,",").concat(null===i||void 0===i?void 0:i.lng)]),o.useEffect((function(){l&&(null===r||void 0===r||r.addMarker(l,!1))}),[l,r]),o.useEffect((function(){l&&l.setOptions(u)}),[l,u]),null}},344:function(e,n,r){r.d(n,{E8:function(){return b},Wn:function(){return k},k4:function(){return E},BB:function(){return P},P9:function(){return h},kg:function(){return p},rz:function(){return f},He:function(){return m},kD:function(){return w},_H:function(){return v},RS:function(){return l},g7:function(){return d},nh:function(){return L},uW:function(){return g},fE:function(){return R},c5:function(){return y},np:function(){return N}});var a=r(5987),t=r(9439),c=r(1413),o=r(3619),i=["id"],u=new URL(window.location.href).origin,s=function(e){var n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,c.Z)((0,c.Z)({},a),{},{headers:new Headers});return t.headers.set("Authorization","Basic "+btoa((null===(n=o.b.user)||void 0===n?void 0:n.username)+":"+(null===(r=o.b.user)||void 0===r?void 0:r.password))),t.body&&(t.headers.set("Accept","application/json"),t.headers.set("Content-Type","application/json")),fetch(e,t).catch((function(e){var n=new Error;throw n.cause=e,n.name="Fetch error",n.message="Network error has occurred",n})).then((function(e){if(200!==e.status&&201!==e.status){var n=new Error;if(n.cause=e,e.status)switch(n.name=e.status+" "+e.statusText,e.status){case 403:n.message="Insufficient permissions";break;case 404:n.message="Not found";break;default:n.message="Some server error has occurred"}else n.message="Network error has occurred";throw n}return e.json().catch((function(e){var n=new Error;throw n.cause=e,n.name="Fetch error",n.message="Server responded with incorrect data",n}))}))},d=function(e){var n=(0,t.Z)(e.queryKey,6),r=(n[0],n[1]),a=n[2],c=n[3],o=n[4],i=n[5],d=new URL("/truck",u);return d.searchParams.append("limit","".concat(a)),d.searchParams.append("offset","".concat(a*r)),c&&o&&(d.searchParams.append("orderby","".concat(c)),d.searchParams.append("direction","".concat(o))),null!==i&&void 0!==i&&i.truckNumber&&d.searchParams.append("truckNumber","".concat(i.truckNumber)),null!==i&&void 0!==i&&i.lastLocation&&null!==i&&void 0!==i&&i.distance&&(d.searchParams.append("lastLocation","".concat(i.lastLocation)),d.searchParams.append("distance","".concat(i.distance))),s(d)},l=function(e){var n=new URL("/truck/".concat(e),u);return s(n,{method:"DELETE"})},m=function(e){var n=(0,t.Z)(e.queryKey,6),r=(n[0],n[1]),a=n[2],c=n[3],o=n[4],i=n[5],d=new URL("/location",u);return d.searchParams.append("limit","".concat(a)),d.searchParams.append("offset","".concat(a*r)),c&&o&&(d.searchParams.append("orderby","".concat(c)),d.searchParams.append("direction","".concat(o))),null!==i&&void 0!==i&&i.search&&d.searchParams.append("search","".concat(i.search)),null!==i&&void 0!==i&&i.name&&d.searchParams.append("name","".concat(i.name)),s(d)},f=function(e){var n=new URL("/location/".concat(e),u);return s(n,{method:"DELETE"})},p=function(e){var n=(0,t.Z)(e.queryKey,6),r=(n[0],n[1]),a=n[2],c=n[3],o=n[4],i=n[5],d=new URL("/load",u);return d.searchParams.append("limit","".concat(a)),d.searchParams.append("offset","".concat(a*r)),c&&o&&(d.searchParams.append("orderby","".concat(c)),d.searchParams.append("direction","".concat(o))),null!==i&&void 0!==i&&i.loadNumber&&d.searchParams.append("loadNumber","".concat(i.loadNumber)),null!==i&&void 0!==i&&i.truckNumber&&d.searchParams.append("truckNumber","".concat(i.truckNumber)),s(d)},h=function(e){var n=new URL("/load/".concat(e),u);return s(n,{method:"DELETE"})},v=function(e){var n=(0,t.Z)(e.queryKey,6),r=(n[0],n[1]),a=n[2],c=n[3],o=n[4],i=n[5],d=new URL("/owner",u);return d.searchParams.append("limit","".concat(a)),d.searchParams.append("offset","".concat(a*r)),c&&o&&(d.searchParams.append("orderby","".concat(c)),d.searchParams.append("direction","".concat(o))),null!==i&&void 0!==i&&i.fullName&&d.searchParams.append("fullName","".concat(i.fullName)),null!==i&&void 0!==i&&i.truckNumber&&d.searchParams.append("truckNumber","".concat(i.truckNumber)),s(d)},w=function(e){var n=new URL("/owner/".concat(e),u);return s(n,{method:"DELETE"})},P=function(e){var n=(0,t.Z)(e.queryKey,6),r=(n[0],n[1]),a=n[2],c=n[3],o=n[4],i=n[5],d=new URL("/driver",u);return d.searchParams.append("limit","".concat(a)),d.searchParams.append("offset","".concat(a*r)),c&&o&&(d.searchParams.append("orderby","".concat(c)),d.searchParams.append("direction","".concat(o))),null!==i&&void 0!==i&&i.fullName&&d.searchParams.append("fullName","".concat(i.fullName)),null!==i&&void 0!==i&&i.truckNumber&&d.searchParams.append("truckNumber","".concat(i.truckNumber)),s(d)},E=function(e){var n=new URL("/driver/".concat(e),u);return s(n,{method:"DELETE"})},k=function(e){var n=(0,t.Z)(e.queryKey,6),r=(n[0],n[1]),a=n[2],c=n[3],o=n[4],i=n[5],d=new URL("/coordinator",u);return d.searchParams.append("limit","".concat(a)),d.searchParams.append("offset","".concat(a*r)),c&&o&&(d.searchParams.append("orderby","".concat(c)),d.searchParams.append("direction","".concat(o))),null!==i&&void 0!==i&&i.fullName&&d.searchParams.append("fullName","".concat(i.fullName)),null!==i&&void 0!==i&&i.truckNumber&&d.searchParams.append("truckNumber","".concat(i.truckNumber)),s(d)},b=function(e){var n=new URL("/coordinator/".concat(e),u);return s(n,{method:"DELETE"})},N=function(e){var n=(0,t.Z)(e.queryKey,6),r=(n[0],n[1]),a=n[2],c=n[3],o=n[4],i=n[5],d=new URL("/user",u);return d.searchParams.append("limit","".concat(a)),d.searchParams.append("offset","".concat(a*r)),c&&o&&(d.searchParams.append("orderby","".concat(c)),d.searchParams.append("direction","".concat(o))),null!==i&&void 0!==i&&i.fullName&&d.searchParams.append("fullName","".concat(i.fullName)),s(d)},g=function(e){var n=new URL("/user/".concat(e),u);return s(n,{method:"DELETE"})},L=function(e){var n=new URL("/user",u);return s(n,{method:"POST",body:JSON.stringify(e)})},y=function(e){var n=e.id,r=(0,a.Z)(e,i),t=new URL("/user/".concat(n),u);return s(t,{method:"PATCH",body:JSON.stringify(r)})},R=function(e){var n=new URL("/user/".concat(e.queryKey[1]),u);return s(n,{method:"GET"})}}}]);
//# sourceMappingURL=56.0bce84be.chunk.js.map