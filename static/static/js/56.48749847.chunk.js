"use strict";(self.webpackChunkadmin_frontend=self.webpackChunkadmin_frontend||[]).push([[56],{9056:function(n,e,r){r.r(e),r.d(e,{default:function(){return R}});var a=r(5987),t=r(9439),c=r(1413),o=r(2791),i=r(2917),u=r(5931),s=r(5574),d=r(7123),l=r(9157),m=r(6151),f=r(1691),p=r(5661),h=r(4554),v=r(9259),w=r(1697),P=r(1605),y=r(344),b=r(4047),E=r(184),k=["onCLick","clusterer","map","position"],L={lat:39.828922654821866,lng:-98.57947970000001},N=5,g=o.forwardRef((function(n,e){return(0,E.jsx)(u.Z,(0,c.Z)({direction:"up",ref:e},n))}));function R(){var n=o.useState(null),e=(0,t.Z)(n,2),r=e[0],a=e[1],c=(0,i.a)({queryKey:["trucksMap",0,25e3],queryFn:y.g7,keepPreviousData:!0}),u=c.isLoading,w=c.isFetching,b=c.data,k=(void 0===b?{items:[]}:b).items||[],R=function(){a(null)};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(h.Z,{component:"main",sx:{flexGrow:1,p:1,height:"100%",width:"100%"},children:(0,E.jsx)(v.Wrapper,{apiKey:"AIzaSyCXHo65x6xwfIPmz5GAZ2B2laVghupH7Dg",render:Z,children:(0,E.jsx)(U,{center:L,zoom:N,children:(0,E.jsx)(x,{children:k.filter((function(n){return n.lastLocation})).map((function(n){return(0,E.jsx)(j,{onCLick:function(){return e=n.id,void a(k.find((function(n){return n.id===e}))||null);var e},optimized:!0,animation:window.google.maps.Animation&&window.google.maps.Animation.DROP,title:"".concat(n.truckNumber,"\n").concat(n.status),position:{lat:n.lastLocation[0],lng:n.lastLocation[1]}},n.id)}))})})})}),(0,E.jsxs)(s.Z,{open:!!r,TransitionComponent:g,keepMounted:!0,onClose:R,"aria-describedby":"alert-dialog-slide-description",children:[(0,E.jsx)(p.Z,{children:(0,E.jsxs)("span",{children:["TRUCK NUMBER:\xa0",(0,E.jsx)("a",{href:"./trucks/".concat(null===r||void 0===r?void 0:r.id),target:"_blank",children:null===r||void 0===r?void 0:r.truckNumber})]})}),(0,E.jsx)(l.Z,{children:(0,E.jsx)(f.Z,{id:"alert-dialog-slide-description",children:"CURRENT STATUS: ".concat(null===r||void 0===r?void 0:r.status)})}),(0,E.jsx)(d.Z,{children:(0,E.jsx)(m.Z,{onClick:R,children:"Close"})})]}),(0,E.jsx)(P.Z,{visible:u||w})]})}var Z=function(n){var e=(0,b.Ds)();return n===v.Status.FAILURE&&e({severity:"error",message:"Error loading maps!"}),(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(P.Z,{visible:n===v.Status.LOADING})})};function U(n){var e=n.center,r=n.zoom,a=n.children,c=o.useRef(null),i=o.useState(),u=(0,t.Z)(i,2),s=u[0],d=u[1];o.useEffect((function(){c.current&&!s&&d(new window.google.maps.Map(c.current,{center:e,zoom:r}))}),[c,s]);var l=o.Children.only(a);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{style:{height:"100%",width:"100%"},ref:c,id:"map"}),o.isValidElement(l)&&o.cloneElement(l,{map:s})]})}function x(n){var e=n.map,r=n.children,a=o.useState(),c=(0,t.Z)(a,2),i=c[0],u=c[1];return o.useEffect((function(){return i||u(new w.XL({})),function(){i&&i.setMap(null)}}),[i]),o.useEffect((function(){i&&e&&i.setMap(e)}),[e]),o.useEffect((function(){i&&i.render()}),[e,r]),null===i||void 0===i||i.render(),(0,E.jsx)(E.Fragment,{children:o.Children.map(r,(function(n){if(o.isValidElement(n))return o.cloneElement(n,{map:e,clusterer:i})}))})}var j=function(n){var e=n.onCLick,r=n.clusterer,c=n.map,i=n.position,u=(0,a.Z)(n,k),s=o.useState(),d=(0,t.Z)(s,2),l=d[0],m=d[1];return o.useEffect((function(){if(!l){var n=new window.google.maps.Marker;m(n),n.addListener("click",e)}return function(){l&&(l.setMap(null),null===r||void 0===r||r.removeMarker(l,!1))}}),[l]),o.useEffect((function(){l&&l.setMap(c||null)}),[l,c]),o.useEffect((function(){l&&l.setPosition(i)}),[l,i&&"".concat(null===i||void 0===i?void 0:i.lat,",").concat(null===i||void 0===i?void 0:i.lng)]),o.useEffect((function(){l&&(null===r||void 0===r||r.addMarker(l,!1))}),[l,r]),o.useEffect((function(){l&&l.setOptions(u)}),[l,u]),null}},344:function(n,e,r){r.d(e,{E8:function(){return R},Wn:function(){return g},k4:function(){return N},BB:function(){return L},oO:function(){return b},P9:function(){return y},kg:function(){return P},Mo:function(){return h},rz:function(){return p},W9:function(){return w},A0:function(){return v},He:function(){return f},kD:function(){return k},_H:function(){return E},RS:function(){return m},g7:function(){return l},nh:function(){return x},uW:function(){return U},fE:function(){return T},c5:function(){return j},np:function(){return Z}});var a=r(5987),t=r(9439),c=r(1413),o=r(3619),i=["id"],u=["id"],s=new URL(window.location.href).origin,d=function(n){var e,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,c.Z)((0,c.Z)({},a),{},{headers:new Headers});return t.headers.set("Authorization","Basic "+btoa((null===(e=o.b.user)||void 0===e?void 0:e.username)+":"+(null===(r=o.b.user)||void 0===r?void 0:r.password))),t.body&&(t.headers.set("Accept","application/json"),t.headers.set("Content-Type","application/json")),fetch(n,t).catch((function(n){var e=new Error;throw e.cause=n,e.name="Fetch error",e.message="Network error has occurred",e})).then((function(n){if(200!==n.status&&201!==n.status){var e=new Error;if(e.cause=n,n.status)switch(e.name=n.status+" "+n.statusText,n.status){case 403:e.message="Insufficient permissions";break;case 404:e.message="Not found";break;default:e.message="Some server error has occurred"}else e.message="Network error has occurred";throw e}return n.json().catch((function(n){var e=new Error;throw e.cause=n,e.name="Fetch error",e.message="Server responded with incorrect data",e}))}))},l=function(n){var e=(0,t.Z)(n.queryKey,6),r=(e[0],e[1]),a=e[2],c=e[3],o=e[4],i=e[5],u=new URL("/truck",s);return u.searchParams.append("limit","".concat(a)),u.searchParams.append("offset","".concat(a*r)),c&&o&&(u.searchParams.append("orderby","".concat(c)),u.searchParams.append("direction","".concat(o))),null!==i&&void 0!==i&&i.truckNumber&&u.searchParams.append("truckNumber","".concat(i.truckNumber)),null!==i&&void 0!==i&&i.lastLocation&&null!==i&&void 0!==i&&i.distance&&(u.searchParams.append("lastLocation","".concat(i.lastLocation)),u.searchParams.append("distance","".concat(i.distance))),d(u)},m=function(n){var e=new URL("/truck/".concat(n),s);return d(e,{method:"DELETE"})},f=function(n){var e=(0,t.Z)(n.queryKey,6),r=(e[0],e[1]),a=e[2],c=e[3],o=e[4],i=e[5],u=new URL("/location",s);return u.searchParams.append("limit","".concat(a)),u.searchParams.append("offset","".concat(a*r)),c&&o&&(u.searchParams.append("orderby","".concat(c)),u.searchParams.append("direction","".concat(o))),null!==i&&void 0!==i&&i.search&&u.searchParams.append("search","".concat(i.search)),null!==i&&void 0!==i&&i.name&&u.searchParams.append("name","".concat(i.name)),d(u)},p=function(n){var e=new URL("/location/".concat(n),s);return d(e,{method:"DELETE"})},h=function(n){var e=new URL("/location",s);return d(e,{method:"POST",body:JSON.stringify(n)})},v=function(n){var e=n.id,r=(0,a.Z)(n,i),t=new URL("/location/".concat(e),s);return d(t,{method:"PATCH",body:JSON.stringify(r)})},w=function(n){var e=new URL("/location/".concat(n.queryKey[1]),s);return d(e,{method:"GET"})},P=function(n){var e=(0,t.Z)(n.queryKey,6),r=(e[0],e[1]),a=e[2],c=e[3],o=e[4],i=e[5],u=new URL("/load",s);return u.searchParams.append("limit","".concat(a)),u.searchParams.append("offset","".concat(a*r)),c&&o&&(u.searchParams.append("orderby","".concat(c)),u.searchParams.append("direction","".concat(o))),null!==i&&void 0!==i&&i.loadNumber&&u.searchParams.append("loadNumber","".concat(i.loadNumber)),null!==i&&void 0!==i&&i.truckNumber&&u.searchParams.append("truckNumber","".concat(i.truckNumber)),d(u)},y=function(n){var e=new URL("/load/".concat(n),s);return d(e,{method:"DELETE"})},b=function(n){var e=new URL("/load",s);return d(e,{method:"POST",body:JSON.stringify(n)})},E=function(n){var e=(0,t.Z)(n.queryKey,6),r=(e[0],e[1]),a=e[2],c=e[3],o=e[4],i=e[5],u=new URL("/owner",s);return u.searchParams.append("limit","".concat(a)),u.searchParams.append("offset","".concat(a*r)),c&&o&&(u.searchParams.append("orderby","".concat(c)),u.searchParams.append("direction","".concat(o))),null!==i&&void 0!==i&&i.fullName&&u.searchParams.append("fullName","".concat(i.fullName)),null!==i&&void 0!==i&&i.truckNumber&&u.searchParams.append("truckNumber","".concat(i.truckNumber)),d(u)},k=function(n){var e=new URL("/owner/".concat(n),s);return d(e,{method:"DELETE"})},L=function(n){var e=(0,t.Z)(n.queryKey,6),r=(e[0],e[1]),a=e[2],c=e[3],o=e[4],i=e[5],u=new URL("/driver",s);return u.searchParams.append("limit","".concat(a)),u.searchParams.append("offset","".concat(a*r)),c&&o&&(u.searchParams.append("orderby","".concat(c)),u.searchParams.append("direction","".concat(o))),null!==i&&void 0!==i&&i.fullName&&u.searchParams.append("fullName","".concat(i.fullName)),null!==i&&void 0!==i&&i.truckNumber&&u.searchParams.append("truckNumber","".concat(i.truckNumber)),d(u)},N=function(n){var e=new URL("/driver/".concat(n),s);return d(e,{method:"DELETE"})},g=function(n){var e=(0,t.Z)(n.queryKey,6),r=(e[0],e[1]),a=e[2],c=e[3],o=e[4],i=e[5],u=new URL("/coordinator",s);return u.searchParams.append("limit","".concat(a)),u.searchParams.append("offset","".concat(a*r)),c&&o&&(u.searchParams.append("orderby","".concat(c)),u.searchParams.append("direction","".concat(o))),null!==i&&void 0!==i&&i.fullName&&u.searchParams.append("fullName","".concat(i.fullName)),null!==i&&void 0!==i&&i.truckNumber&&u.searchParams.append("truckNumber","".concat(i.truckNumber)),d(u)},R=function(n){var e=new URL("/coordinator/".concat(n),s);return d(e,{method:"DELETE"})},Z=function(n){var e=(0,t.Z)(n.queryKey,6),r=(e[0],e[1]),a=e[2],c=e[3],o=e[4],i=e[5],u=new URL("/user",s);return u.searchParams.append("limit","".concat(a)),u.searchParams.append("offset","".concat(a*r)),c&&o&&(u.searchParams.append("orderby","".concat(c)),u.searchParams.append("direction","".concat(o))),null!==i&&void 0!==i&&i.fullName&&u.searchParams.append("fullName","".concat(i.fullName)),d(u)},U=function(n){var e=new URL("/user/".concat(n),s);return d(e,{method:"DELETE"})},x=function(n){var e=new URL("/user",s);return d(e,{method:"POST",body:JSON.stringify(n)})},j=function(n){var e=n.id,r=(0,a.Z)(n,u),t=new URL("/user/".concat(e),s);return d(t,{method:"PATCH",body:JSON.stringify(r)})},T=function(n){var e=new URL("/user/".concat(n.queryKey[1]),s);return d(e,{method:"GET"})}}}]);
//# sourceMappingURL=56.48749847.chunk.js.map