"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[1147],{1147:(e,t,r)=>{r.r(t),r.d(t,{default:()=>H});var n=r(5043),i=r(3216),a=r(9781),l=r(2836),s=r(5604),d=r(4535),c=r(6596),o=r(7784),h=r(1962),u=r(7739),x=r(39),p=r(4516),m=r(1806),g=r(3460),j=r(9650),b=r(4882),v=r(9090),f=r(8076),k=r(8093),A=r(5263),w=r(4496),y=r(1596),C=r(7392),$=r(141),P=r(3560),S=r(3768),D=r(1809),F=r(9397),N=r(524),T=r(8612),E=r(1079),O=r(908),_=r(6431),z=r(7166),M=r(579);const L=[{id:"fullName",orderField:"fullName",getData:e=>({data:`${e.fullName}`}),numeric:!1,disablePadding:!0,label:"First\xa0name/Last\xa0name"},{id:"type",getData:e=>{const t=`${(0,_.Pw)(e)} `;let r="";return"Driver"===e.type&&(r="Driver"),"OwnerDriver"===e.type&&(r="Owner/Driver"),"CoordinatorDriver"===e.type&&(r="Coordinator/Driver"),{data:(0,M.jsx)("span",{children:(0,M.jsx)("b",{children:t})}),title:r}},numeric:!1,disablePadding:!0,label:"Type"},{id:"phone",getData:e=>{const t=`${e.phone}`,r=`${e.phone2?e.phone2:""}`;return{data:(0,M.jsxs)("span",{children:[(0,M.jsx)("a",{href:`tel:${t}`,target:"_blank",onClick:z.d,children:t}),(0,M.jsx)("br",{}),(0,M.jsx)("a",{href:r?`tel:${r}`:void 0,target:"_blank",onClick:z.d,children:r||"\xa0"})]}),title:t+"\n"+r}},numeric:!1,disablePadding:!0,label:"Mobile\xa0phone"},{id:"email",getData:e=>{if(e.email){const t=`${e.email}`;return{data:(0,M.jsx)("span",{children:(0,M.jsx)("a",{href:`mailto:${t}`,target:"_blank",onClick:z.d,children:t})}),title:t}}return{data:""}},numeric:!1,disablePadding:!0,label:"Email"},{id:"address",getData:e=>{if(e.address){const t=`${e.address}`;return{data:(0,M.jsx)("span",{children:t}),title:t}}return{data:""}},numeric:!1,disablePadding:!0,label:"Home\xa0address"},{id:"onTruck",getData:e=>{if(e.driveTrucks&&e.driveTrucks.length){const t=e.driveTrucks[0];return{data:(0,M.jsxs)("span",{children:[(0,M.jsx)("a",{href:`/trucks/view/${t.id}`,target:"_blank",onClick:z.d,children:`${t.truckNumber}`}),(0,M.jsx)("br",{}),(0,M.jsx)("a",{href:t.owner?`/${(0,_.Yn)(t.owner)}/view/${t.owner.id}`:void 0,target:"_blank",onClick:z.d,children:t.owner?`${t.owner.fullName}`:"\xa0"})]}),title:`${t.truckNumber}${t.owner?`\n${t.owner.fullName}`:""}`}}return{data:""}},numeric:!1,disablePadding:!0,label:"ON\xa0TRUCK"}],I=(0,d.Ay)(b.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),K=(0,d.Ay)(x.A)((()=>({maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})));function R(e){const{onSelectAllClick:t,order:r,orderBy:n,numSelected:i,rowCount:a,onRequestSort:l}=e;return(0,M.jsx)(I,{children:(0,M.jsxs)(f.A,{children:[(0,M.jsx)(K,{padding:"checkbox",children:(0,M.jsx)(h.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:i>0&&i<a,checked:a>0&&i===a,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),L.map((e=>{return(0,M.jsx)(K,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:n===e.id&&r,children:(0,M.jsxs)(k.A,{active:e.orderField&&n===e.orderField,hideSortIcon:!e.orderField,direction:n===e.orderField?r:"asc",onClick:e.orderField?(t=e.orderField,e=>{l(e,t)}):()=>{},children:[e.label,e.orderField&&n===e.orderField?(0,M.jsx)(p.A,{component:"span",sx:N.A,children:"desc"===r?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function q(e){const{selected:t,setQueryParams:r}=e,[s,d]=n.useState(""),[h,x]=n.useState(""),[m,g]=n.useState(0),[j,b]=n.useState(!1),v=(0,i.zy)(),f=(0,i.Zp)(),k=(0,a.jE)(),y=(0,O.dh)(),{mutate:N,isLoading:_}=(0,l.n)(E.wL,{onSuccess:()=>{y({severity:"success",message:"Deleted"}),k.invalidateQueries(["drivers"])},onError:e=>{y({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),z=()=>{b(!1),d(""),x(""),g(0),r({})},L=()=>{b(!1);const e={};s&&(e.fullName=s),h&&(e.allPhone=h),m&&(e.truckNumber=m),r(e)},I=e=>{"Enter"===e.key&&(s||h||m?L():z())};return(0,M.jsxs)(A.A,{sx:{overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1},...t.length>0&&{bgcolor:e=>(0,c.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[t.length>0?(0,M.jsxs)(w.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,M.jsx)(w.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Drivers"}),(0,M.jsx)(p.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,M.jsx)(o.A,{label:"First name/Last name",value:s,onChange:e=>{d(e.target.value),b(!0)},onKeyUp:I,size:"small"})}),(0,M.jsx)(p.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,M.jsx)(o.A,{label:"Phone",value:h,onChange:e=>{x(e.target.value),b(!0)},onKeyUp:I,size:"small"})}),(0,M.jsx)(p.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,M.jsx)(o.A,{label:"Truck Number",value:m||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(g(Number(e.target.value)),b(!0))},onKeyUp:I,size:"small"})}),(0,M.jsx)(u.A,{title:"Filter list",children:!j&&(s||m||h)||j&&!s&&j&&!m&&j&&!h?(0,M.jsx)("span",{children:(0,M.jsx)(C.A,{onClick:z,children:(0,M.jsx)(F.A,{})})}):(0,M.jsx)("span",{children:(0,M.jsx)(C.A,{disabled:!s&&!m,onClick:L,children:(0,M.jsx)(D.A,{})})})}),(0,M.jsxs)(p.A,{sx:{p:1,display:"inline-flex"},children:[(0,M.jsx)(u.A,{title:"Create",children:(0,M.jsx)("span",{children:(0,M.jsx)(C.A,{onClick:()=>{f("./create",{relative:"path",state:{from:v},replace:!1})},children:(0,M.jsx)($.A,{})})})}),(0,M.jsx)(u.A,{title:"Edit",children:(0,M.jsx)("span",{children:(0,M.jsx)(C.A,{disabled:1!==t.length,onClick:()=>{f(`./edit/${t[0]}`,{relative:"path",state:{from:v},replace:!1})},children:(0,M.jsx)(P.A,{})})})}),(0,M.jsx)(u.A,{title:"Delete",children:(0,M.jsx)("span",{children:(0,M.jsx)(C.A,{disabled:1!==t.length,onClick:()=>{N(`${t[0]}`)},children:(0,M.jsx)(S.A,{})})})})]}),(0,M.jsx)(T.A,{visible:_})]})}function H(){const[e,t]=n.useState("asc"),[r,a]=n.useState("fullName"),[l,d]=n.useState([]),[c,o]=n.useState(0),[u,x]=n.useState(15),[b,k]=n.useState({}),A=n.useRef(null),w=(0,i.zy)(),C=(0,i.Zp)(),$=(0,O.dh)(),{isLoading:P,isFetching:S,error:D,data:{items:F,total:N}={items:[],total:0}}=(0,s.I)({queryKey:["drivers",c,u,r,e,b],queryFn:E.If,keepPreviousData:!0,retry:!1});n.useEffect((()=>{D&&$({severity:"error",message:D instanceof Error?D.message:JSON.stringify(D)})}),[D]);const z=F||[];n.useEffect((()=>{if(A.current){A.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[z]),n.useEffect((()=>{const e=[];l.forEach((t=>{z.find((e=>e.id===t))&&e.push(t)})),d(e)}),[z]);return(0,M.jsxs)(p.A,{sx:{width:"100%",height:"100%"},children:[(0,M.jsxs)(y.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,M.jsx)(q,{selected:l,setQueryParams:e=>{k(e),o(0)}}),(0,M.jsx)(j.A,{ref:A,sx:{height:"calc(100% - 115px)"},children:(0,M.jsxs)(m.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,M.jsx)(R,{numSelected:l.length,order:e,orderBy:r,onSelectAllClick:e=>{if(e.target.checked){const e=z.map((e=>e.id));d(e)}else d([])},onRequestSort:(n,i)=>{const l=r===i&&"asc"===e;r===i&&"desc"===e?(t(void 0),a(void 0)):(t(l?"desc":"asc"),a(i))},rowCount:z.length}),(0,M.jsx)(g.A,{children:z.map(((e,t)=>{const r=(n=`${e.id}`,-1!==l.indexOf(n));var n;const i=`enhanced-table-checkbox-${t}`;return(0,M.jsxs)(f.A,{hover:!0,onDoubleClick:t=>{return r=e,void C(`../${(0,_.Yn)(r)}/view/${r.id}`,{relative:"path",state:{from:w},replace:!1});var r},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,sx:{cursor:"pointer"},children:[(0,M.jsx)(K,{padding:"checkbox",children:(0,M.jsx)(h.A,{id:`${i}`,color:"primary",checked:r,inputProps:{"aria-labelledby":i},onClick:t=>((e,t)=>{e.stopPropagation();const r=l.indexOf(t);let n=[];-1===r?n=n.concat(l,t):0===r?n=n.concat(l.slice(1)):r===l.length-1?n=n.concat(l.slice(0,-1)):r>0&&(n=n.concat(l.slice(0,r),l.slice(r+1))),d(n)})(t,`${e.id}`)})}),L.map((t=>{const r=t.getData(e);return(0,M.jsx)(K,{title:r.title,align:t.numeric?"right":"center",children:r.data},t.id)}))]},e.id)}))})]})}),(0,M.jsx)(v.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:N,rowsPerPage:u,page:c,onPageChange:(e,t)=>{o(t)},onRowsPerPageChange:e=>{x(parseInt(e.target.value,10)),o(0)}})]}),(0,M.jsx)(T.A,{visible:P||S})]})}},3768:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(9662),i=r(579);const a=(0,n.A)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},3560:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(9662),i=r(579);const a=(0,n.A)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=1147.8a0e8b9f.chunk.js.map