"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[5295],{5295:(e,t,r)=>{r.r(t),r.d(t,{default:()=>X});var n=r(5043),i=r(3216),a=r(9781),s=r(2836),l=r(5604),o=r(4535),d=r(1546),c=r(7784),h=r(1962),x=r(7739),u=r(39),p=r(3851),m=r(6353),g=r(1081),j=r(7353),A=r(1806),b=r(3460),f=r(9650),v=r(4882),k=r(9090),y=r(8076),C=r(8093),S=r(5263),w=r(4496),D=r(1596),P=r(1045),F=r(5721),$=r(681),N=r(8968),I=r(6600),T=r(7392),E=r(141),M=r(3560),R=r(3768),O=r(1809),_=r(9397),z=r(3608),L=r(524),q=r(8612),H=r(1079),K=r(908),B=r(6431),Q=r(7166),U=r(579);const W=[{id:"fullName",orderField:"fullName",getData:e=>({data:`${e.fullName}`}),numeric:!1,disablePadding:!0,label:"First\xa0name/Last\xa0name"},{id:"type",getData:e=>{const t=`${(0,B.Pw)(e)} `;let r="";return"Coordinator"===e.type&&(r="Coordinator"),"CoordinatorDriver"===e.type&&(r="Coordinator/Driver"),{data:(0,U.jsx)("span",{children:(0,U.jsx)("b",{children:t})}),title:r}},numeric:!1,disablePadding:!0,label:"Type"},{id:"phone",getData:e=>{const t=`${e.phone}`,r=`${e.phone2?e.phone2:""}`;return{data:(0,U.jsxs)("span",{children:[(0,U.jsx)("a",{href:`tel:${t}`,target:"_blank",onClick:Q.d,children:t}),(0,U.jsx)("br",{}),(0,U.jsx)("a",{href:r?`tel:${r}`:void 0,target:"_blank",onClick:Q.d,children:r||"\xa0"})]}),title:t+"\n"+r}},numeric:!1,disablePadding:!0,label:"Mobile\xa0phone"},{id:"email",getData:e=>{const t=`${e.email}`;return{data:(0,U.jsx)("span",{children:(0,U.jsx)("a",{href:`mailto:${t}`,target:"_blank",onClick:Q.d,children:t})}),title:t}},numeric:!1,disablePadding:!0,label:"Email"},{id:"address",getData:e=>{const t=`${e.address}`;return{data:(0,U.jsx)("span",{children:t}),title:t}},numeric:!1,disablePadding:!0,label:"Home\xa0address"},{id:"coordinateTrucks",getData:e=>{if(e.coordinateTrucks&&e.coordinateTrucks.length){const t=e.coordinateTrucks;return{data:(0,U.jsx)("span",{children:t.map(((e,r)=>(0,U.jsx)("a",{href:`/trucks/view/${e.id}`,target:"_blank",onClick:Q.d,children:`${e.truckNumber}${r===t.length-1?"":", "}`},r)))}),title:t.map((e=>e.truckNumber)).join(", ")}}return{data:""}},numeric:!1,disablePadding:!0,label:"COORDINATE\xa0TRUCKS"}],G=(0,o.Ay)(v.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),J=(0,o.Ay)(u.A)((()=>({maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})));function V(e){const{onSelectAllClick:t,order:r,orderBy:n,numSelected:i,rowCount:a,onRequestSort:s}=e;return(0,U.jsx)(G,{children:(0,U.jsxs)(y.A,{children:[(0,U.jsx)(J,{padding:"checkbox",children:(0,U.jsx)(h.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:i>0&&i<a,checked:a>0&&i===a,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),W.map((e=>{return(0,U.jsx)(J,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:n===e.id&&r,children:(0,U.jsxs)(C.A,{active:e.orderField&&n===e.orderField,hideSortIcon:!e.orderField,direction:n===e.orderField?r:"asc",onClick:e.orderField?(t=e.orderField,e=>{s(e,t)}):()=>{},children:[e.label,e.orderField&&n===e.orderField?(0,U.jsx)(j.A,{component:"span",sx:L.A,children:"desc"===r?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function Z(e){const{selected:t,setQueryParams:r}=e,[l,o]=n.useState(!1),[h,u]=n.useState(""),[A,b]=n.useState(0),[f,v]=n.useState(!1),k=(0,i.zy)(),y=(0,i.Zp)(),C=(0,a.jE)(),D=(0,K.dh)(),{mutate:L,isLoading:B}=(0,s.n)(H.Oh,{onSuccess:()=>{D({severity:"success",message:"Deleted"}),C.invalidateQueries(["coordinators"])},onError:e=>{D({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),Q=()=>{v(!1),u(""),b(0),r({})},W=()=>{v(!1);const e={};h&&(e.fullName=h),A&&(e.truckNumber=A),r(e)},G=e=>{"Enter"===e.key&&(h||A?W():Q())};return(0,U.jsxs)(S.A,{sx:{overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1},...t.length>0&&{bgcolor:e=>(0,d.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[t.length>0?(0,U.jsxs)(w.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,U.jsx)(w.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Coordinators"}),(0,U.jsx)(j.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,U.jsx)(c.A,{label:"First name/Last name",value:h,onChange:e=>{u(e.target.value),v(!0)},onKeyUp:G,size:"small"})}),(0,U.jsx)(j.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,U.jsx)(c.A,{label:"Truck Number",value:A||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(b(Number(e.target.value)),v(!0))},onKeyUp:G,size:"small"})}),(0,U.jsx)(x.A,{title:"Filter list",children:!f&&(h||A)||f&&!h&&f&&!A?(0,U.jsx)("span",{children:(0,U.jsx)(T.A,{onClick:Q,children:(0,U.jsx)(_.A,{})})}):(0,U.jsx)("span",{children:(0,U.jsx)(T.A,{disabled:!h&&!A,onClick:W,children:(0,U.jsx)(O.A,{})})})}),(0,U.jsxs)(j.A,{sx:{p:1,display:"inline-flex"},children:[(0,U.jsx)(x.A,{title:"Create",children:(0,U.jsx)("span",{children:(0,U.jsx)(T.A,{onClick:()=>{o(!0)},children:(0,U.jsx)(E.A,{})})})}),(0,U.jsx)(x.A,{title:"Edit",children:(0,U.jsx)("span",{children:(0,U.jsx)(T.A,{disabled:1!==t.length,onClick:()=>{y(`./edit/${t[0]}`,{relative:"path",state:{from:k},replace:!1})},children:(0,U.jsx)(M.A,{})})})}),(0,U.jsx)(x.A,{title:"Delete",children:(0,U.jsx)("span",{children:(0,U.jsx)(T.A,{disabled:1!==t.length,onClick:()=>{L(`${t[0]}`)},children:(0,U.jsx)(R.A,{})})})})]}),(0,U.jsxs)(g.A,{onClose:()=>{o(!1)},open:l,children:[(0,U.jsx)(I.A,{children:"Select, what type of coordinator to create"}),(0,U.jsxs)(F.A,{sx:{pt:0},children:[(0,U.jsx)($.Ay,{disableGutters:!0,children:(0,U.jsxs)(N.A,{onClick:()=>{y("../coordinators/create",{relative:"path",state:{from:k},replace:!1})},children:[(0,U.jsx)(p.A,{children:(0,U.jsx)(P.A,{children:(0,U.jsx)(z.A,{})})}),(0,U.jsx)(m.A,{primary:"Coordinator"})]})},"coordinator"),(0,U.jsx)($.Ay,{disableGutters:!0,children:(0,U.jsxs)(N.A,{onClick:()=>{y("../coordinatorsDrivers/create",{relative:"path",state:{from:k},replace:!1})},children:[(0,U.jsx)(p.A,{children:(0,U.jsx)(P.A,{children:(0,U.jsx)(z.A,{})})}),(0,U.jsx)(m.A,{primary:"Coordinator-Driver"})]})},"coordinatorsDriver")]})]}),(0,U.jsx)(q.A,{visible:B})]})}function X(){const[e,t]=n.useState("asc"),[r,a]=n.useState("fullName"),[s,o]=n.useState([]),[d,c]=n.useState(0),[x,u]=n.useState(15),[p,m]=n.useState({}),g=n.useRef(null),v=(0,i.zy)(),C=(0,i.Zp)(),S=(0,K.dh)(),{isLoading:w,isFetching:P,error:F,data:{items:$,total:N}={items:[],total:0}}=(0,l.I)({queryKey:["coordinators",d,x,r,e,p],queryFn:H.gS,keepPreviousData:!0,retry:!1});n.useEffect((()=>{F&&S({severity:"error",message:F instanceof Error?F.message:JSON.stringify(F)})}),[F]);const I=$||[];n.useEffect((()=>{if(g.current){g.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[I]),n.useEffect((()=>{const e=[];s.forEach((t=>{I.find((e=>e.id===t))&&e.push(t)})),o(e)}),[I]);return(0,U.jsxs)(j.A,{sx:{width:"100%",height:"100%"},children:[(0,U.jsxs)(D.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,U.jsx)(Z,{selected:s,setQueryParams:e=>{m(e),c(0)}}),(0,U.jsx)(f.A,{ref:g,sx:{height:"calc(100% - 115px)"},children:(0,U.jsxs)(A.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,U.jsx)(V,{numSelected:s.length,order:e,orderBy:r,onSelectAllClick:e=>{if(e.target.checked){const e=I.map((e=>e.id));o(e)}else o([])},onRequestSort:(n,i)=>{const s=r===i&&"asc"===e;r===i&&"desc"===e?(t(void 0),a(void 0)):(t(s?"desc":"asc"),a(i))},rowCount:I.length}),(0,U.jsx)(b.A,{children:I.map(((e,t)=>{const r=(n=`${e.id}`,-1!==s.indexOf(n));var n;const i=`enhanced-table-checkbox-${t}`;return(0,U.jsxs)(y.A,{hover:!0,onDoubleClick:t=>{return r=e,void C(`../${(0,B.Yn)(r)}/view/${r.id}`,{relative:"path",state:{from:v},replace:!1});var r},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,sx:{cursor:"pointer"},children:[(0,U.jsx)(J,{padding:"checkbox",children:(0,U.jsx)(h.A,{id:`${i}`,color:"primary",checked:r,inputProps:{"aria-labelledby":i},onClick:t=>((e,t)=>{e.stopPropagation();const r=s.indexOf(t);let n=[];-1===r?n=n.concat(s,t):0===r?n=n.concat(s.slice(1)):r===s.length-1?n=n.concat(s.slice(0,-1)):r>0&&(n=n.concat(s.slice(0,r),s.slice(r+1))),o(n)})(t,`${e.id}`)})}),W.map((t=>{const r=t.getData(e);return(0,U.jsx)(J,{title:r.title,align:t.numeric?"right":"center",children:r.data},t.id)}))]},e.id)}))})]})}),(0,U.jsx)(k.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:N,rowsPerPage:x,page:d,onPageChange:(e,t)=>{c(t)},onRowsPerPageChange:e=>{u(parseInt(e.target.value,10)),c(0)}})]}),(0,U.jsx)(q.A,{visible:w||P})]})}},3768:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(9662),i=r(579);const a=(0,n.A)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},3560:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(9662),i=r(579);const a=(0,n.A)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},6600:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(5043),i=r(8387),a=r(8610),s=r(4496),l=r(4535),o=r(8206),d=r(7034),c=r(2563),h=r(579);const x=(0,l.Ay)(s.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),u=n.forwardRef((function(e,t){const r=(0,o.b)({props:e,name:"MuiDialogTitle"}),{className:s,id:l,...u}=r,p=r,m=(e=>{const{classes:t}=e;return(0,a.A)({root:["root"]},d.t,t)})(p),{titleId:g=l}=n.useContext(c.A);return(0,h.jsx)(x,{component:"h2",className:(0,i.A)(m.root,s),ownerState:p,ref:t,variant:"h6",id:l??g,...u})}))},3851:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(5043),i=r(8387),a=r(8610),s=r(1347),l=r(4535),o=r(8206),d=r(2532),c=r(2372);function h(e){return(0,c.Ay)("MuiListItemAvatar",e)}(0,d.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var x=r(579);const u=(0,l.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),p=n.forwardRef((function(e,t){const r=(0,o.b)({props:e,name:"MuiListItemAvatar"}),{className:l,...d}=r,c=n.useContext(s.A),p={...r,alignItems:c.alignItems},m=(e=>{const{alignItems:t,classes:r}=e,n={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,a.A)(n,h,r)})(p);return(0,x.jsx)(u,{className:(0,i.A)(m.root,l),ownerState:p,ref:t,...d})}))}}]);
//# sourceMappingURL=5295.5a6a80ec.chunk.js.map