"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[6507],{8807:(e,t,n)=>{n.d(t,{A:()=>p});var l=n(5043),a=n(5563),i=n(950),r=n(908),o=n(9129),s=n(7392),d=n(7166),c=n(4914),u=n(4133),h=n(5552),v=n(579);function p(e){let{location:t,onRefClick:n,addInfo:p,children:m}=e;const[x,g]=l.useState(null),[f,A]=l.useState([]),[b,j]=l.useState(null),k=l.useMemo((()=>(0,i.A)((e=>{((null===b||void 0===b?void 0:b.geocode(e))||Promise.reject()).then((t=>{if(t.results.length<1&&e.location){const t=new google.maps.LatLng(e.location),n={address_components:[],formatted_address:"[".concat(t.lat(),", ").concat(t.lng(),"]"),geometry:{location:t,location_type:google.maps.GeocoderLocationType.APPROXIMATE,viewport:new google.maps.LatLngBounds},place_id:"[".concat(t.lat(),", ").concat(t.lng(),"]"),types:[]};A([n])}else t.results.forEach((e=>e.formatted_address=(0,o.s)(e.address_components))),A(t.results)})).catch((e=>{A([])}))}),400)),[b]);l.useEffect((()=>{const e=t&&(0,u.U)(f);t&&e&&(null===e||void 0===e?void 0:e.place_id)!==(null===x||void 0===x?void 0:x.place_id)&&g(e)}),[t,f]),l.useEffect((()=>{t?k({location:{lat:t[0],lng:t[1]}}):(A([]),g(null))}),[b,t.join(",")]);return(0,v.jsxs)("span",{style:{display:"flex"},children:[(0,v.jsx)(a.Wrapper,{...(0,h.iz)(),render:e=>{const t=(0,r.dh)(),[,n]=(0,r.pn)();return l.useLayoutEffect((()=>(e===a.Status.LOADING&&n(!0),e===a.Status.FAILURE&&t({severity:"error",message:"Error loading maps!"}),e===a.Status.SUCCESS&&j(new window.google.maps.Geocoder),()=>{e===a.Status.LOADING&&n(!1)})),[e]),null}}),(0,v.jsxs)("span",{style:{textOverflow:"ellipsis",overflow:"hidden",textAlign:"left"},title:"".concat(x?x.formatted_address:"")+"\n"+p,children:[n?(0,v.jsx)("a",{href:"#",target:"_blank",onClick:n,children:x?x.formatted_address:""}):x?x.formatted_address:"",p?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("br",{}),p]}):null,m]}),x?(0,v.jsx)(s.A,{size:"small",onClick:e=>{(0,d.d)(e),navigator.clipboard.writeText(x.formatted_address)},children:(0,v.jsx)(c.A,{sx:{height:"16px",width:"16px"}})}):null]})}},6507:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var l=n(5043),a=n(3216),i=n(9781),r=n(2836),o=n(5604),s=n(4535),d=n(310),c=n(7784),u=n(1962),h=n(7739),v=n(2420),p=n(6446),m=n(1806),x=n(3460),g=n(9650),f=n(4882),A=n(9090),b=n(8076),j=n(8093),k=n(5263),y=n(5865),S=n(3336),C=n(7392),E=n(2505),P=n(5540),F=n(3471),N=n(8242),w=n(1833),R=n(2088),D=n(8612),T=n(1079),I=n(908),O=n(8833),L=n(7166),_=n(8807),z=n(9904),M=n(2143),H=n(6353),U=n(579);const B=[{id:"loadNumber",orderField:"loadNumber",getData:e=>({data:"".concat(e.loadNumber)}),numeric:!0,disablePadding:!1,label:"Load\xa0Number"},{id:"ref",getData:e=>{const t="".concat(null!==e&&void 0!==e&&e.ref&&null!==e&&void 0!==e&&e.ref[0]?null===e||void 0===e?void 0:e.ref[0]:""),n="".concat(null!==e&&void 0!==e&&e.ref&&null!==e&&void 0!==e&&e.ref[1]?null===e||void 0===e?void 0:e.ref[1]:""),l="".concat(null!==e&&void 0!==e&&e.ref&&null!==e&&void 0!==e&&e.ref[2]?null===e||void 0===e?void 0:e.ref[2]:"");return{data:(0,U.jsxs)("span",{children:[t,(0,U.jsx)("br",{}),n,(0,U.jsx)("br",{}),l]}),title:t+(n?"\n"+n:"")+(l?"\n"+l:"")}},numeric:!1,disablePadding:!1,label:"REF\xa0Number"},{id:"firstPickUp",getData:e=>{var t;const n=e=>{e.preventDefault(),(0,L.d)(e)},l=null===e||void 0===e||null===(t=e.stops)||void 0===t?void 0:t.at(0),a=null===l||void 0===l?void 0:l.facility,i=null===a||void 0===a?void 0:a.facilityLocation,r=null===l||void 0===l?void 0:l.timeFrame,o=null===r||void 0===r?void 0:r.type,s="FCFS"===(null===r||void 0===r?void 0:r.type)?null===r||void 0===r?void 0:r.from:null===r||void 0===r?void 0:r.at,d="".concat(s?z.k.format(new Date(s)):""),c="".concat(o," ").concat(d);return i?{data:(0,U.jsx)(_.A,{location:i,onRefClick:n,addInfo:c})}:{data:""}},numeric:!1,disablePadding:!1,label:"First\xa0PickUp"},{id:"lastDelivery",getData:e=>{var t;const n=e=>{e.preventDefault(),(0,L.d)(e)},l=null===e||void 0===e||null===(t=e.stops)||void 0===t?void 0:t.at(-1),a=null===l||void 0===l?void 0:l.facility,i=null===a||void 0===a?void 0:a.facilityLocation,r=null===l||void 0===l?void 0:l.timeFrame,o=null===r||void 0===r?void 0:r.type,s="FCFS"===(null===r||void 0===r?void 0:r.type)?null===r||void 0===r?void 0:r.to:null===r||void 0===r?void 0:r.at,d="".concat(s?z.k.format(new Date(s)):""),c="".concat(o," ").concat(d);return i?{data:(0,U.jsx)(_.A,{location:i,onRefClick:n,addInfo:c})}:{data:""}},numeric:!1,disablePadding:!1,label:"Last\xa0Delivery"},{id:"miles",getData:e=>{if(null!==e&&void 0!==e&&e.milesHaversine){const t="".concat(e.milesByRoads?e.milesByRoads.toFixed(2):""),n="".concat(e.milesHaversine.toFixed(2));return{data:(0,U.jsxs)("span",{children:[(0,U.jsx)("b",{children:t}),(0,U.jsx)("br",{}),n]}),title:t||"? - By roads\n"+n+" - Distance"}}return{data:""}},numeric:!0,disablePadding:!1,label:"Miles"},{id:"status",orderField:"status",getData:e=>({data:"".concat(e.status)}),numeric:!1,disablePadding:!1,label:"Load\xa0Status"},{id:"truck",getData:e=>{if(null!==e&&void 0!==e&&e.truck){const t="./trucks/view/".concat(e.truck.id),n="".concat(e.truck.truckNumber);return{data:(0,U.jsx)("span",{children:(0,U.jsx)("a",{href:t,target:"_blank",onClick:L.d,children:n})}),title:n}}return{data:""}},numeric:!0,disablePadding:!1,label:"Truck"}],J=(0,s.Ay)(f.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),K=(0,s.Ay)(v.A)((()=>({maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})));function G(e){const{onSelectAllClick:t,order:n,orderBy:l,numSelected:a,rowCount:i,onRequestSort:r}=e;return(0,U.jsx)(J,{children:(0,U.jsxs)(b.A,{children:[(0,U.jsx)(K,{padding:"checkbox",children:(0,U.jsx)(u.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:a>0&&a<i,checked:i>0&&a===i,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),B.map((e=>{return(0,U.jsx)(K,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:l===e.id&&n,children:(0,U.jsxs)(j.A,{active:e.orderField&&l===e.orderField,hideSortIcon:!e.orderField,direction:l===e.orderField?n:"asc",onClick:e.orderField?(t=e.orderField,e=>{r(e,t)}):()=>{},children:[e.label,e.orderField&&l===e.orderField?(0,U.jsx)(p.A,{component:"span",sx:R.A,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function W(e){const{selected:t,setQueryParams:n}=e,[o,s]=l.useState(""),[v,m]=l.useState(!1),[x,g]=l.useState([...O.Jf]),[f,A]=l.useState(0),[b,j]=l.useState(0),[S,R]=l.useState(!1),_=(0,a.zy)(),z=(0,a.Zp)(),B=(0,i.jE)(),J=(0,I.dh)(),{mutate:K,isLoading:G}=(0,r.n)(T.Cn,{onSuccess:()=>{J({severity:"success",message:"Deleted"}),B.invalidateQueries(["loads"])},onError:e=>{J({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),W=()=>{m(!1),V()},V=()=>{x.length&&x.length!==O.Jf.length?(n((e=>({...e,status:x}))),R(!1)):(n((e=>{const{status:t,...n}=e;return{...n}})),R(!1))},q=()=>{R(!1),s(""),g([...O.Jf]),A(0),j(0),n({})},Q=()=>{R(!1);const e={};o&&(e.refNumber=o),x.length&&x.length!==O.Jf.length&&(e.status=x),f&&(e.loadNumber=f),b&&(e.truckNumber=b),n(e)},X=e=>{"Enter"===e.key&&(o||f||b?Q():q())};return(0,U.jsxs)(k.A,{sx:{overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1},...t.length>0&&{bgcolor:e=>(0,d.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[t.length>0?(0,U.jsxs)(y.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,U.jsx)(y.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Loads"}),(0,U.jsx)(p.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,U.jsx)(c.A,{label:"REF Number",value:o||"",onChange:e=>{s(e.target.value),R(!0)},onKeyUp:X,size:"small"})}),(0,U.jsx)(p.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,U.jsx)(c.A,{select:!0,SelectProps:{multiple:!0,open:v,renderValue:e=>e.join(", "),onOpen:()=>{m(!0)},onClose:W},label:"Select Status",value:x,onChange:e=>{g(e.target.value),R(!0)},onKeyUpCapture:e=>{"Enter"===e.key&&((0,L.d)(e),W())},onKeyDownCapture:e=>{"Enter"===e.key&&(0,L.d)(e)},onBlur:V,size:"small",fullWidth:!0,title:x.join(", "),children:O.Jf.map((e=>(0,U.jsxs)(M.A,{value:e,children:[(0,U.jsx)(u.A,{checked:x.indexOf(e)>-1,id:e}),(0,U.jsx)(H.A,{primary:e})]},e)))})}),(0,U.jsx)(p.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,U.jsx)(c.A,{label:"Load Number",value:f||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(A(Number(e.target.value)),R(!0))},onKeyUp:X,size:"small"})}),(0,U.jsx)(p.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,U.jsx)(c.A,{label:"Truck Number",value:b||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(j(Number(e.target.value)),R(!0))},onKeyUp:X,size:"small"})}),(0,U.jsx)(h.A,{title:"Filter list",children:!S&&(o||f||b||x.length&&x.length!==O.Jf.length)||S&&!o&&S&&(!x.length||x.length===O.Jf.length)&&S&&!f&&S&&!b?(0,U.jsx)("span",{children:(0,U.jsx)(C.A,{onClick:q,children:(0,U.jsx)(w.A,{})})}):(0,U.jsx)("span",{children:(0,U.jsx)(C.A,{disabled:!f&&!b,onClick:Q,children:(0,U.jsx)(N.A,{})})})}),(0,U.jsxs)(p.A,{sx:{p:1,display:"inline-flex"},children:[(0,U.jsx)(h.A,{title:"Create",children:(0,U.jsx)("span",{children:(0,U.jsx)(C.A,{onClick:()=>{z("./create",{relative:"path",state:{from:_},replace:!1})},children:(0,U.jsx)(E.A,{})})})}),(0,U.jsx)(h.A,{title:"Edit",children:(0,U.jsx)("span",{children:(0,U.jsx)(C.A,{disabled:1!==t.length,onClick:()=>{z("./edit/".concat(t[0]),{relative:"path",state:{from:_},replace:!1})},children:(0,U.jsx)(P.A,{})})})}),(0,U.jsx)(h.A,{title:"Delete",children:(0,U.jsx)("span",{children:(0,U.jsx)(C.A,{disabled:1!==t.length,onClick:()=>{K("".concat(t[0]))},children:(0,U.jsx)(F.A,{})})})})]}),(0,U.jsx)(D.A,{visible:G})]})}function V(){const[e,t]=l.useState("desc"),[n,i]=l.useState("loadNumber"),[r,s]=l.useState([]),[d,c]=l.useState(0),[h,v]=l.useState(15),[f,j]=l.useState({}),k=l.useRef(null),y=(0,a.zy)(),C=(0,a.Zp)(),E=(0,I.dh)(),{isLoading:P,isFetching:F,data:{items:N,total:w}={items:[],total:0}}=(0,o.I)({queryKey:["loads",d,h,n,e,f],queryFn:T.Qk,keepPreviousData:!0,retry:!1,onError:e=>{E({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),R=N||[];l.useEffect((()=>{if(k.current){k.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[R]),l.useEffect((()=>{const e=[];r.forEach((t=>{R.find((e=>e.id===t))&&e.push(t)})),s(e)}),[R]);return(0,U.jsxs)(p.A,{sx:{width:"100%",height:"100%"},children:[(0,U.jsxs)(S.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,U.jsx)(W,{selected:r,setQueryParams:e=>{j(e),c(0)}}),(0,U.jsx)(g.A,{ref:k,sx:{height:"calc(100% - 115px)"},children:(0,U.jsxs)(m.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,U.jsx)(G,{numSelected:r.length,order:e,orderBy:n,onSelectAllClick:e=>{if(e.target.checked){const e=R.map((e=>e.id));s(e)}else s([])},onRequestSort:(l,a)=>{const r=n===a&&"asc"===e;n===a&&"desc"===e?(t(void 0),i(void 0)):(t(r?"desc":"asc"),i(a))},rowCount:R.length}),(0,U.jsx)(x.A,{children:R.map(((e,t)=>{const n=(l="".concat(e.id),-1!==r.indexOf(l));var l;const a="enhanced-table-checkbox-".concat(t);return(0,U.jsxs)(b.A,{hover:!0,onDoubleClick:t=>{C("./view/".concat(e.id),{relative:"path",state:{from:y},replace:!1})},role:"checkbox","aria-checked":n,tabIndex:-1,selected:n,sx:{cursor:"pointer"},children:[(0,U.jsx)(K,{padding:"checkbox",children:(0,U.jsx)(u.A,{id:"".concat(a),color:"primary",checked:n,inputProps:{"aria-labelledby":a},onClick:t=>((e,t)=>{e.stopPropagation();const n=r.indexOf(t);let l=[];-1===n?l=l.concat(r,t):0===n?l=l.concat(r.slice(1)):n===r.length-1?l=l.concat(r.slice(0,-1)):n>0&&(l=l.concat(r.slice(0,n),r.slice(n+1))),s(l)})(t,"".concat(e.id))})}),B.map((t=>{const n=t.getData(e);return(0,U.jsx)(K,{title:n.title,align:t.numeric?"right":"center",children:n.data},t.id)}))]},e.id)}))})]})}),(0,U.jsx)(A.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:w,rowsPerPage:h,page:d,onPageChange:(e,t)=>{c(t)},onRowsPerPageChange:e=>{v(parseInt(e.target.value,10)),c(0)}})]}),(0,U.jsx)(D.A,{visible:P||F})]})}},8833:(e,t,n)=>{n.d(t,{IY:()=>o,Jf:()=>u,Ju:()=>r,Lv:()=>h,Ny:()=>v,P7:()=>m,Sr:()=>i,fo:()=>a,lk:()=>p,mW:()=>d,p5:()=>s,pI:()=>c,z5:()=>l});const l=["EN","UA","ES","RU"],a=["Admin","Super Admin"],i=["BROKER DOMESTIC","BROKER INTERNATIONAL","FREIGHT FORWARDER DOMESTIC","FREIGHT FORWARDER INTERNATIONAL","SHIPPER/CONSIGNEE DOMESTIC","SHIPPER/CONSIGNEE INTERNATIONAL","OTHER"],r=["Cargo van","Reefer van","Box truck","Box truck Reefer","Straight truck","Hotshot","Tented box"],o=["Available","Not Available","Will be available","On route"],s=["Yes","No"],d=["Hazmat","Tsa","TWIC","Tanker Endorsement"],c=["Dock height risers","Air ride","Lift gate","Keep from freezing","ICC bar","Vertical E-track","Horizontal E-track","Pallet jack","PPE","Ramps","Straps","Loads bars","Blankets","Pads","Fire extinguisher","Metal hooks","Reefer","Heater"],u=["Available","Planned","In Progress","TONU","Cancelled","Completed"],h=["LBS","KG","TON"],v=["FT","IN","M","CM"];let p=function(e){return e.PickUp="PickUp",e.Delivery="Delivery",e}({}),m=function(e){return e.FCFS="FCFS",e.APPT="APPT",e.ASAP="ASAP",e.Direct="Direct",e}({})},9904:(e,t,n)=>{n.d(t,{k:()=>l});const l=Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0})},4914:(e,t,n)=>{var l=n(4994);t.A=void 0;var a=l(n(39)),i=n(579);t.A=(0,a.default)((0,i.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy")},3471:(e,t,n)=>{var l=n(4994);t.A=void 0;var a=l(n(39)),i=n(579);t.A=(0,a.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},5540:(e,t,n)=>{var l=n(4994);t.A=void 0;var a=l(n(39)),i=n(579);t.A=(0,a.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=6507.ac702f12.chunk.js.map