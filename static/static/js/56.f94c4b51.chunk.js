"use strict";(self.webpackChunkadmin_frontend=self.webpackChunkadmin_frontend||[]).push([[56],{9056:function(n,e,r){r.r(e),r.d(e,{default:function(){return U}});var t=r(5987),a=r(9439),o=r(1413),c=r(2791),u=r(2917),i=r(5931),s=r(5574),d=r(7123),l=r(9157),f=r(6151),m=r(1691),h=r(5661),p=r(4554),v=r(9259),w=r(1697),b=r(1605),y=r(344),P=r(4682),L=r(184),E=["onCLick","clusterer","map","position"],R={lat:39.828922654821866,lng:-98.57947970000001},j=5,k=c.forwardRef((function(n,e){return(0,L.jsx)(i.Z,(0,o.Z)({direction:"up",ref:e},n))}));function U(){var n=c.useState(null),e=(0,a.Z)(n,2),r=e[0],t=e[1],o=(0,u.a)({queryKey:["trucksMap",0,25e3],queryFn:y.g7,keepPreviousData:!0}),i=o.isLoading,w=o.isFetching,P=o.data,E=(void 0===P?{items:[]}:P).items||[],U=function(){t(null)};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.Z,{component:"main",sx:{flexGrow:1,p:1,height:"100%",width:"100%"},children:(0,L.jsx)(v.Wrapper,{apiKey:"AIzaSyCXHo65x6xwfIPmz5GAZ2B2laVghupH7Dg",render:T,children:(0,L.jsx)(g,{center:R,zoom:j,children:(0,L.jsx)(N,{children:E.filter((function(n){return n.lastLocation})).map((function(n){return(0,L.jsx)(Z,{onCLick:function(){return e=n.id,void t(E.find((function(n){return n.id===e}))||null);var e},optimized:!0,animation:window.google.maps.Animation&&window.google.maps.Animation.DROP,title:"".concat(n.truckNumber,"\n").concat(n.status),position:{lat:n.lastLocation[0],lng:n.lastLocation[1]}},n.id)}))})})})}),(0,L.jsxs)(s.Z,{open:!!r,TransitionComponent:k,keepMounted:!0,onClose:U,"aria-describedby":"alert-dialog-slide-description",children:[(0,L.jsx)(h.Z,{children:(0,L.jsxs)("span",{children:["TRUCK NUMBER:\xa0",(0,L.jsx)("a",{href:"./trucks/view/".concat(null===r||void 0===r?void 0:r.id),target:"_blank",children:null===r||void 0===r?void 0:r.truckNumber})]})}),(0,L.jsx)(l.Z,{children:(0,L.jsx)(m.Z,{id:"alert-dialog-slide-description",children:"CURRENT STATUS: ".concat(null===r||void 0===r?void 0:r.status)})}),(0,L.jsx)(d.Z,{children:(0,L.jsx)(f.Z,{onClick:U,children:"Close"})})]}),(0,L.jsx)(b.Z,{visible:i||w})]})}var T=function(n){var e=(0,P.Ds)();return n===v.Status.FAILURE&&e({severity:"error",message:"Error loading maps!"}),(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(b.Z,{visible:n===v.Status.LOADING})})};function g(n){var e=n.center,r=n.zoom,t=n.children,o=c.useRef(null),u=c.useState(),i=(0,a.Z)(u,2),s=i[0],d=i[1];c.useEffect((function(){o.current&&!s&&d(new window.google.maps.Map(o.current,{center:e,zoom:r}))}),[o,s]);var l=c.Children.only(t);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{style:{height:"100%",width:"100%"},ref:o,id:"map"}),c.isValidElement(l)&&c.cloneElement(l,{map:s})]})}function N(n){var e=n.map,r=n.children,t=c.useState(),o=(0,a.Z)(t,2),u=o[0],i=o[1];return c.useEffect((function(){return u||i(new w.XL({})),function(){u&&u.setMap(null)}}),[u]),c.useEffect((function(){u&&e&&u.setMap(e)}),[e]),c.useEffect((function(){u&&u.render()}),[e,r]),null===u||void 0===u||u.render(),(0,L.jsx)(L.Fragment,{children:c.Children.map(r,(function(n){if(c.isValidElement(n))return c.cloneElement(n,{map:e,clusterer:u})}))})}var Z=function(n){var e=n.onCLick,r=n.clusterer,o=n.map,u=n.position,i=(0,t.Z)(n,E),s=c.useState(),d=(0,a.Z)(s,2),l=d[0],f=d[1];return c.useEffect((function(){if(!l){var n=new window.google.maps.Marker;f(n),n.addListener("click",e)}return function(){l&&(l.setMap(null),null===r||void 0===r||r.removeMarker(l,!1))}}),[l]),c.useEffect((function(){l&&l.setMap(o||null)}),[l,o]),c.useEffect((function(){l&&l.setPosition(u)}),[l,u&&"".concat(null===u||void 0===u?void 0:u.lat,",").concat(null===u||void 0===u?void 0:u.lng)]),c.useEffect((function(){l&&(null===r||void 0===r||r.addMarker(l,!1))}),[l,r]),c.useEffect((function(){l&&l.setOptions(i)}),[l,i]),null}},344:function(n,e,r){r.d(e,{WG:function(){return _},E8:function(){return X},hG:function(){return Q},KZ:function(){return nn},mw:function(){return Y},ih:function(){return $},XM:function(){return J},Wn:function(){return V},H1:function(){return I},k4:function(){return F},CI:function(){return B},t7:function(){return W},BB:function(){return z},oO:function(){return O},P9:function(){return Z},vl:function(){return C},WE:function(){return x},kg:function(){return N},Mo:function(){return U},rz:function(){return k},W9:function(){return g},A0:function(){return T},He:function(){return j},qg:function(){return D},kD:function(){return A},dI:function(){return H},$X:function(){return M},zR:function(){return G},Vi:function(){return K},fH:function(){return q},_H:function(){return S},MW:function(){return L},RS:function(){return P},dC:function(){return R},hu:function(){return E},g7:function(){return y},nh:function(){return tn},uW:function(){return rn},fE:function(){return on},c5:function(){return an},np:function(){return en}});var t=r(9439),a=r(1413),o=r(5987),c=r(3619),u=["bodyObj"],i=["id"],s=["id"],d=["id"],l=["id"],f=["id"],m=["id"],h=["id"],p=["id"],v=["id"],w=new URL(window.location.href).origin,b=function(n){var e,r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.bodyObj,s=(0,o.Z)(t,u),d=(0,a.Z)((0,a.Z)({},s),{},{headers:new Headers});return d.headers.set("Authorization","Basic "+btoa((null===(e=c.b.user)||void 0===e?void 0:e.username)+":"+(null===(r=c.b.user)||void 0===r?void 0:r.password))),i&&"object"===typeof i&&(d.headers.set("Accept","application/json"),d.headers.set("Content-Type","application/json"),d.body=JSON.stringify(function(n){var e={};return Object.entries(n).forEach((function(n){Array.isArray(n[1])?e[n[0]]=n[1].map((function(n){return"object"!==typeof n||n instanceof Date?n:n.id})):"object"!==typeof n[1]||n[1]instanceof Date?e[n[0]]=n[1]:e[n[0]]=n[1]&&n[1].id})),e}(i))),fetch(n,d).catch((function(n){var e=new Error;throw e.cause=n,e.name="Fetch error",e.message="Network error has occurred",e})).then((function(n){if(200!==n.status&&201!==n.status){var e=new Error;if(e.cause=n,n.status)switch(e.name=n.status+" "+n.statusText,n.status){case 403:e.message="Insufficient permissions";break;case 404:e.message="Not found";break;case 409:e.message="Some field values invalidate unique constrain";break;default:e.message="Some server error has occurred"}else e.message="Network error has occurred";throw e}return n.json().catch((function(n){var e=new Error;throw e.cause=n,e.name="Fetch error",e.message="Server responded with incorrect data",e}))}))},y=function(n){var e=(0,t.Z)(n.queryKey,6),r=(e[0],e[1]),a=e[2],o=e[3],c=e[4],u=e[5],i=new URL("/truck",w);return i.searchParams.append("limit","".concat(a)),i.searchParams.append("offset","".concat(a*r)),null!==u&&void 0!==u&&u.search&&i.searchParams.append("search","".concat(u.search)),o&&c&&(i.searchParams.append("orderby","".concat(o)),i.searchParams.append("direction","".concat(c))),null!==u&&void 0!==u&&u.truckNumber&&i.searchParams.append("truckNumber","".concat(u.truckNumber)),null!==u&&void 0!==u&&u.lastLocation&&null!==u&&void 0!==u&&u.distance&&(i.searchParams.append("lastLocation","".concat(u.lastLocation)),i.searchParams.append("distance","".concat(u.distance))),b(i)},P=function(n){var e=new URL("/truck/".concat(n),w);return b(e,{method:"DELETE"})},L=function(n){var e=new URL("/truck",w);return b(e,{method:"POST",bodyObj:n})},E=function(n){var e=n.id,r=(0,o.Z)(n,i),t=new URL("/truck/".concat(e),w);return b(t,{method:"PATCH",bodyObj:r})},R=function(n){var e=new URL("/truck/".concat(n.queryKey[1]),w);return b(e,{method:"GET"})},j=function(n){var e=(0,t.Z)(n.queryKey,6),r=(e[0],e[1]),a=e[2],o=e[3],c=e[4],u=e[5],i=new URL("/location",w);return i.searchParams.append("limit","".concat(a)),i.searchParams.append("offset","".concat(a*r)),o&&c&&(i.searchParams.append("orderby","".concat(o)),i.searchParams.append("direction","".concat(c))),null!==u&&void 0!==u&&u.search&&i.searchParams.append("search","".concat(u.search)),null!==u&&void 0!==u&&u.name&&i.searchParams.append("name","".concat(u.name)),b(i)},k=function(n){var e=new URL("/location/".concat(n),w);return b(e,{method:"DELETE"})},U=function(n){var e=new URL("/location",w);return b(e,{method:"POST",bodyObj:n})},T=function(n){var e=n.id,r=(0,o.Z)(n,s),t=new URL("/location/".concat(e),w);return b(t,{method:"PATCH",bodyObj:r})},g=function(n){var e=new URL("/location/".concat(n.queryKey[1]),w);return b(e,{method:"GET"})},N=function(n){var e=(0,t.Z)(n.queryKey,6),r=(e[0],e[1]),a=e[2],o=e[3],c=e[4],u=e[5],i=new URL("/load",w);return i.searchParams.append("limit","".concat(a)),i.searchParams.append("offset","".concat(a*r)),o&&c&&(i.searchParams.append("orderby","".concat(o)),i.searchParams.append("direction","".concat(c))),null!==u&&void 0!==u&&u.loadNumber&&i.searchParams.append("loadNumber","".concat(u.loadNumber)),null!==u&&void 0!==u&&u.truckNumber&&i.searchParams.append("truckNumber","".concat(u.truckNumber)),b(i)},Z=function(n){var e=new URL("/load/".concat(n),w);return b(e,{method:"DELETE"})},O=function(n){var e=new URL("/load",w);return b(e,{method:"POST",bodyObj:n})},x=function(n){var e=n.id,r=(0,o.Z)(n,d),t=new URL("/load/".concat(e),w);return b(t,{method:"PATCH",bodyObj:r})},C=function(n){var e=new URL("/load/".concat(n.queryKey[1]),w);return b(e,{method:"GET"})},S=function(n){var e=(0,t.Z)(n.queryKey,6),r=(e[0],e[1]),a=e[2],o=e[3],c=e[4],u=e[5],i=new URL("/owner",w);return i.searchParams.append("limit","".concat(a)),i.searchParams.append("offset","".concat(a*r)),o&&c&&(i.searchParams.append("orderby","".concat(o)),i.searchParams.append("direction","".concat(c))),null!==u&&void 0!==u&&u.search&&i.searchParams.append("search","".concat(u.search)),null!==u&&void 0!==u&&u.fullName&&i.searchParams.append("fullName","".concat(u.fullName)),null!==u&&void 0!==u&&u.truckNumber&&i.searchParams.append("truckNumber","".concat(u.truckNumber)),b(i)},A=function(n){var e=new URL("/owner/".concat(n),w);return b(e,{method:"DELETE"})},D=function(n){var e=new URL("/owner",w);return b(e,{method:"POST",bodyObj:n})},q=function(n){var e=n.id,r=(0,o.Z)(n,l),t=new URL("/owner/".concat(e),w);return b(t,{method:"PATCH",bodyObj:r})},K=function(n){var e=new URL("/owner/".concat(n.queryKey[1]),w);return b(e,{method:"GET"})},H=function(n){var e=new URL("/ownerDriver",w);return b(e,{method:"POST",bodyObj:n})},G=function(n){var e=n.id,r=(0,o.Z)(n,f),t=new URL("/ownerDriver/".concat(e),w);return b(t,{method:"PATCH",bodyObj:r})},M=function(n){var e=new URL("/ownerDriver/".concat(n.queryKey[1]),w);return b(e,{method:"GET"})},z=function(n){var e=(0,t.Z)(n.queryKey,6),r=(e[0],e[1]),a=e[2],o=e[3],c=e[4],u=e[5],i=new URL("/driver",w);return i.searchParams.append("limit","".concat(a)),i.searchParams.append("offset","".concat(a*r)),o&&c&&(i.searchParams.append("orderby","".concat(o)),i.searchParams.append("direction","".concat(c))),null!==u&&void 0!==u&&u.search&&i.searchParams.append("search","".concat(u.search)),null!==u&&void 0!==u&&u.fullName&&i.searchParams.append("fullName","".concat(u.fullName)),null!==u&&void 0!==u&&u.truckNumber&&i.searchParams.append("truckNumber","".concat(u.truckNumber)),null!==u&&void 0!==u&&u.owner&&i.searchParams.append("owner","".concat(u.owner)),b(i)},F=function(n){var e=new URL("/driver/".concat(n),w);return b(e,{method:"DELETE"})},I=function(n){var e=new URL("/driver",w);return b(e,{method:"POST",bodyObj:n})},W=function(n){var e=n.id,r=(0,o.Z)(n,m),t=new URL("/driver/".concat(e),w);return b(t,{method:"PATCH",bodyObj:r})},B=function(n){var e=new URL("/driver/".concat(n.queryKey[1]),w);return b(e,{method:"GET"})},V=function(n){var e=(0,t.Z)(n.queryKey,6),r=(e[0],e[1]),a=e[2],o=e[3],c=e[4],u=e[5],i=new URL("/coordinator",w);return i.searchParams.append("limit","".concat(a)),i.searchParams.append("offset","".concat(a*r)),o&&c&&(i.searchParams.append("orderby","".concat(o)),i.searchParams.append("direction","".concat(c))),null!==u&&void 0!==u&&u.search&&i.searchParams.append("search","".concat(u.search)),null!==u&&void 0!==u&&u.fullName&&i.searchParams.append("fullName","".concat(u.fullName)),null!==u&&void 0!==u&&u.truckNumber&&i.searchParams.append("truckNumber","".concat(u.truckNumber)),null!==u&&void 0!==u&&u.owner&&i.searchParams.append("owner","".concat(u.owner)),b(i)},X=function(n){var e=new URL("/coordinator/".concat(n),w);return b(e,{method:"DELETE"})},_=function(n){var e=new URL("/coordinator",w);return b(e,{method:"POST",bodyObj:n})},J=function(n){var e=n.id,r=(0,o.Z)(n,h),t=new URL("/coordinator/".concat(e),w);return b(t,{method:"PATCH",bodyObj:r})},$=function(n){var e=new URL("/coordinator/".concat(n.queryKey[1]),w);return b(e,{method:"GET"})},Q=function(n){var e=new URL("/coordinatorDriver",w);return b(e,{method:"POST",bodyObj:n})},Y=function(n){var e=n.id,r=(0,o.Z)(n,p),t=new URL("/coordinatorDriver/".concat(e),w);return b(t,{method:"PATCH",bodyObj:r})},nn=function(n){var e=new URL("/coordinatorDriver/".concat(n.queryKey[1]),w);return b(e,{method:"GET"})},en=function(n){var e=(0,t.Z)(n.queryKey,6),r=(e[0],e[1]),a=e[2],o=e[3],c=e[4],u=e[5],i=new URL("/user",w);return i.searchParams.append("limit","".concat(a)),i.searchParams.append("offset","".concat(a*r)),o&&c&&(i.searchParams.append("orderby","".concat(o)),i.searchParams.append("direction","".concat(c))),null!==u&&void 0!==u&&u.search&&i.searchParams.append("search","".concat(u.search)),null!==u&&void 0!==u&&u.fullName&&i.searchParams.append("fullName","".concat(u.fullName)),b(i)},rn=function(n){var e=new URL("/user/".concat(n),w);return b(e,{method:"DELETE"})},tn=function(n){var e=new URL("/user",w);return b(e,{method:"POST",bodyObj:n})},an=function(n){var e=n.id,r=(0,o.Z)(n,v),t=new URL("/user/".concat(e),w);return b(t,{method:"PATCH",bodyObj:r})},on=function(n){var e=new URL("/user/".concat(n.queryKey[1]),w);return b(e,{method:"GET"})}}}]);
//# sourceMappingURL=56.f94c4b51.chunk.js.map