"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[7666],{7666:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ie});var n=r(5043),s=r(3216),i=r(9781),a=r(2836),o=r(5604),l=r(4535),c=r(310),d=r(7784),u=r(1962),h=r(7739),p=r(2420),x=r(3851),m=r(6353),g=r(3462),f=r(5316),v=r(8533),A=r(9347),j=r(1906),b=r(6446),y=r(1806),w=r(3460),k=r(9650),C=r(4882),S=r(9090),R=r(8076),M=r(8093),D=r(5263),O=r(5865),N=r(3336),P=r(1045),E=r(5721),F=r(681),I=r(8968),T=r(6600),L=r(7392),_=r(2505),z=r(5540),H=r(3471),U=r(8242),W=r(1833),q=r(5681),B=r(2088),G=r(8612),K=r(1079),Q=r(9056),J=r(6431),V=r(7166);var Y=r(4836),Z=r(579);const X=n.forwardRef((function(e,t){return(0,Z.jsx)(Y.A,{direction:"up",ref:t,...e})})),$=[{id:"fullName",orderField:"fullName",getData:e=>({data:"".concat(e.fullName)}),numeric:!1,disablePadding:!0,label:"First\xa0name/Last\xa0name"},{id:"type",getData:e=>{const t="".concat((0,J.Pw)(e)," ");let r="";return"Owner"===e.type&&(r="Owner"),"OwnerDriver"===e.type&&(r="Owner/Driver"),{data:(0,Z.jsx)("span",{children:(0,Z.jsx)("b",{children:t})}),title:r}},numeric:!1,disablePadding:!0,label:"Type"},{id:"phone",getData:e=>{const t="".concat(e.phone),r="".concat(e.phone2?e.phone2:"");return{data:(0,Z.jsxs)("span",{children:[(0,Z.jsx)("a",{href:"tel:".concat(t),target:"_blank",onClick:V.d,children:t}),(0,Z.jsx)("br",{}),(0,Z.jsx)("a",{href:r?"tel:".concat(r):void 0,target:"_blank",onClick:V.d,children:r||"\xa0"})]}),title:t+"\n"+r}},numeric:!1,disablePadding:!0,label:"Mobile\xa0phone"},{id:"email",getData:e=>{const t="".concat(e.email);return{data:(0,Z.jsx)("span",{children:(0,Z.jsx)("a",{href:"mailto:".concat(t),target:"_blank",onClick:V.d,children:t})}),title:t}},numeric:!1,disablePadding:!0,label:"Email"},{id:"address",getData:e=>{const t="".concat(e.address);return{data:(0,Z.jsx)("span",{children:t}),title:t}},numeric:!1,disablePadding:!0,label:"Home\xa0address"},{id:"ownTrucks",getData:e=>{if(e.ownTrucks&&e.ownTrucks.length){const t=e.ownTrucks;return{data:(0,Z.jsx)("span",{children:t.map(((e,r)=>(0,Z.jsx)("a",{href:"/trucks/view/".concat(e.id),target:"_blank",onClick:V.d,children:"".concat(e.truckNumber).concat(r===t.length-1?"":", ")},r)))}),title:t.map((e=>e.truckNumber)).join(", "),elementsCount:t.length}}return{data:""}},numeric:!1,disablePadding:!0,openInDialog:!0,label:"OWN\xa0TRUCKS"},{id:"driversCoordinators",getData:e=>{if(e.coordinators||e.drivers){var t,r;const n=new Map;null===(t=e.coordinators)||void 0===t||t.forEach((e=>n.set(e.id,{id:e.id,fullName:e.fullName,type:e.type}))),null===(r=e.drivers)||void 0===r||r.forEach((e=>!n.has(e.id)&&n.set(e.id,{id:e.id,fullName:e.fullName,type:e.type})));const s=Array.from(n.values());return{data:(0,Z.jsx)("span",{children:s.map(((e,t)=>(0,Z.jsx)("a",{href:"./".concat((0,J.Yn)(e),"/view/").concat(e.id),target:"_blank",onClick:V.d,children:"".concat(e.fullName," ").concat((0,J.Pw)(e)," ").concat(t===s.length-1?"":", ")},e.id)))}),title:s.map((e=>"".concat(e.fullName," ").concat((0,J.Pw)(e)))).join(", "),elementsCount:s.length}}return{data:""}},numeric:!1,disablePadding:!0,openInDialog:!0,label:"Drivers/Coordinators"}],ee=(0,l.Ay)(C.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),te=(0,l.Ay)(p.A)((()=>({maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})));function re(e){const{onSelectAllClick:t,order:r,orderBy:n,numSelected:s,rowCount:i,onRequestSort:a}=e;return(0,Z.jsx)(ee,{children:(0,Z.jsxs)(R.A,{children:[(0,Z.jsx)(te,{padding:"checkbox",children:(0,Z.jsx)(u.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:s>0&&s<i,checked:i>0&&s===i,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),$.map((e=>{return(0,Z.jsx)(te,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:n===e.id&&r,children:(0,Z.jsxs)(M.A,{active:e.orderField&&n===e.orderField,hideSortIcon:!e.orderField,direction:n===e.orderField?r:"asc",onClick:e.orderField?(t=e.orderField,e=>{a(e,t)}):()=>{},children:[e.label,e.orderField&&n===e.orderField?(0,Z.jsx)(b.A,{component:"span",sx:B.A,children:"desc"===r?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function ne(e){const{selected:t,setQueryParams:r}=e,[o,l]=n.useState(!1),[u,p]=n.useState(""),[f,v]=n.useState(0),[A,j]=n.useState(!1),y=(0,s.zy)(),w=(0,s.Zp)(),k=(0,i.jE)(),C=(0,Q.dh)(),{mutate:S,isLoading:R}=(0,a.n)(K.Jx,{onSuccess:()=>{C({severity:"success",message:"Deleted"}),k.invalidateQueries(["owners"])},onError:e=>{C({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),M=()=>{j(!1),p(""),v(0),r({})},N=()=>{j(!1);const e={};u&&(e.fullName=u),f&&(e.truckNumber=f),r(e)},B=e=>{"Enter"===e.key&&(u||f?N():M())};return(0,Z.jsxs)(D.A,{sx:{overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1},...t.length>0&&{bgcolor:e=>(0,c.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[t.length>0?(0,Z.jsxs)(O.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,Z.jsx)(O.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Owners"}),(0,Z.jsx)(b.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,Z.jsx)(d.A,{label:"First name/Last name",value:u,onChange:e=>{p(e.target.value),j(!0)},onKeyUp:B,size:"small"})}),(0,Z.jsx)(b.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,Z.jsx)(d.A,{label:"Truck Number",value:f||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(v(Number(e.target.value)),j(!0))},onKeyUp:B,size:"small"})}),(0,Z.jsx)(h.A,{title:"Filter list",children:!A&&(u||f)||A&&!u&&A&&!f?(0,Z.jsx)("span",{children:(0,Z.jsx)(L.A,{onClick:M,children:(0,Z.jsx)(W.A,{})})}):(0,Z.jsx)("span",{children:(0,Z.jsx)(L.A,{disabled:!u&&!f,onClick:N,children:(0,Z.jsx)(U.A,{})})})}),(0,Z.jsxs)(b.A,{sx:{p:1,display:"inline-flex"},children:[(0,Z.jsx)(h.A,{title:"Create",children:(0,Z.jsx)("span",{children:(0,Z.jsx)(L.A,{onClick:()=>{l(!0)},children:(0,Z.jsx)(_.A,{})})})}),(0,Z.jsx)(h.A,{title:"Edit",children:(0,Z.jsx)("span",{children:(0,Z.jsx)(L.A,{disabled:1!==t.length,onClick:()=>{w("./edit/".concat(t[0]),{relative:"path",state:{from:y},replace:!1})},children:(0,Z.jsx)(z.A,{})})})}),(0,Z.jsx)(h.A,{title:"Delete",children:(0,Z.jsx)("span",{children:(0,Z.jsx)(L.A,{disabled:1!==t.length,onClick:()=>{S("".concat(t[0]))},children:(0,Z.jsx)(H.A,{})})})})]}),(0,Z.jsxs)(g.A,{onClose:()=>{l(!1)},open:o,children:[(0,Z.jsx)(T.A,{children:"Select, what type of owner to create"}),(0,Z.jsxs)(E.A,{sx:{pt:0},children:[(0,Z.jsx)(F.Ay,{disableGutters:!0,children:(0,Z.jsxs)(I.A,{onClick:()=>{w("../owners/create",{relative:"path",state:{from:y},replace:!1})},children:[(0,Z.jsx)(x.A,{children:(0,Z.jsx)(P.A,{children:(0,Z.jsx)(q.A,{})})}),(0,Z.jsx)(m.A,{primary:"Owner"})]})},"owner"),(0,Z.jsx)(F.Ay,{disableGutters:!0,children:(0,Z.jsxs)(I.A,{onClick:()=>{w("../ownersDrivers/create",{relative:"path",state:{from:y},replace:!1})},children:[(0,Z.jsx)(x.A,{children:(0,Z.jsx)(P.A,{children:(0,Z.jsx)(q.A,{})})}),(0,Z.jsx)(m.A,{primary:"Owner-Driver"})]})},"ownerDriver")]})]}),(0,Z.jsx)(G.A,{visible:R})]})}const se=e=>{let{row:t,cell:r,setDialogData:s}=e;const i=r.getData(t),a=n.useRef(null);return(0,Z.jsx)(te,{ref:a,title:i.title,align:r.numeric?"right":"center",onClickCapture:e=>{if(!r.openInDialog)return;if(i.elementsCount&&i.elementsCount<2)return;const t=a.current;t&&function(e){let{clientWidth:t,clientHeight:r,scrollWidth:n,scrollHeight:s}=e;return s>r||n>t}(t)&&(e.preventDefault(),(0,V.d)(e),s(i.data))},children:i.data},r.id)};function ie(){const[e,t]=n.useState(void 0),[r,i]=n.useState("asc"),[a,l]=n.useState("fullName"),[c,d]=n.useState([]),[h,p]=n.useState(0),[x,m]=n.useState(15),[C,M]=n.useState({}),D=n.useRef(null),O=(0,s.zy)(),P=(0,s.Zp)(),E=(0,Q.dh)(),{isLoading:F,isFetching:I,data:{items:T,total:L}={items:[],total:0}}=(0,o.I)({queryKey:["owners",h,x,a,r,C],queryFn:K.Dc,keepPreviousData:!0,retry:!1,onError:e=>{E({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),_=T||[];n.useEffect((()=>{if(D.current){D.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[_]),n.useEffect((()=>{const e=[];c.forEach((t=>{_.find((e=>e.id===t))&&e.push(t)})),d(e)}),[_]);const z=()=>{t(void 0)};return(0,Z.jsxs)(b.A,{sx:{width:"100%",height:"100%"},children:[(0,Z.jsxs)(N.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,Z.jsx)(ne,{selected:c,setQueryParams:e=>{M(e),p(0)}}),(0,Z.jsx)(k.A,{ref:D,sx:{height:"calc(100% - 115px)"},children:(0,Z.jsxs)(y.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,Z.jsx)(re,{numSelected:c.length,order:r,orderBy:a,onSelectAllClick:e=>{if(e.target.checked){const e=_.map((e=>e.id));d(e)}else d([])},onRequestSort:(e,t)=>{const n=a===t&&"asc"===r;a===t&&"desc"===r?(i(void 0),l(void 0)):(i(n?"desc":"asc"),l(t))},rowCount:_.length}),(0,Z.jsx)(w.A,{children:_.map(((e,r)=>{const n=(s="".concat(e.id),-1!==c.indexOf(s));var s;const i="enhanced-table-checkbox-".concat(r);return(0,Z.jsxs)(R.A,{hover:!0,onDoubleClick:t=>{return r=e,void P("../".concat((0,J.Yn)(r),"/view/").concat(r.id),{relative:"path",state:{from:O},replace:!1});var r},role:"checkbox","aria-checked":n,tabIndex:-1,selected:n,sx:{cursor:"pointer"},children:[(0,Z.jsx)(te,{padding:"checkbox",children:(0,Z.jsx)(u.A,{id:"".concat(i),color:"primary",checked:n,inputProps:{"aria-labelledby":i},onClick:t=>((e,t)=>{e.stopPropagation();const r=c.indexOf(t);let n=[];-1===r?n=n.concat(c,t):0===r?n=n.concat(c.slice(1)):r===c.length-1?n=n.concat(c.slice(0,-1)):r>0&&(n=n.concat(c.slice(0,r),c.slice(r+1))),d(n)})(t,"".concat(e.id))})}),$.map((r=>(0,Z.jsx)(se,{row:e,cell:r,setDialogData:t},r.id)))]},e.id)}))})]})}),(0,Z.jsx)(S.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:L,rowsPerPage:x,page:h,onPageChange:(e,t)=>{p(t)},onRowsPerPageChange:e=>{m(parseInt(e.target.value,10)),p(0)}})]}),(0,Z.jsxs)(g.A,{open:!!e,TransitionComponent:X,keepMounted:!0,onClose:z,"aria-describedby":"alert-dialog-slide-description",children:[(0,Z.jsx)(f.A,{children:(0,Z.jsx)(v.A,{id:"dialog-content",sx:{span:{display:"grid"}},children:e})}),(0,Z.jsx)(A.A,{children:(0,Z.jsx)(j.A,{onClick:z,children:"Close"})})]}),(0,Z.jsx)(G.A,{visible:F||I})]})}},3471:(e,t,r)=>{var n=r(4994);t.A=void 0;var s=n(r(39)),i=r(579);t.A=(0,s.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},5540:(e,t,r)=>{var n=r(4994);t.A=void 0;var s=n(r(39)),i=r(579);t.A=(0,s.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},8533:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(8587),s=r(8168),i=r(5043),a=r(8387),o=r(8606),l=r(4535),c=r(1475),d=r(2876),u=r(5865),h=r(7056),p=r(2400);function x(e){return(0,p.Ay)("MuiDialogContentText",e)}(0,h.A)("MuiDialogContentText",["root"]);var m=r(579);const g=["children","className"],f=(0,l.Ay)(u.A,{shouldForwardProp:e=>(0,c.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),v=i.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiDialogContentText"}),{className:i}=r,l=(0,n.A)(r,g),c=(e=>{const{classes:t}=e,r=(0,o.A)({root:["root"]},x,t);return(0,s.A)({},t,r)})(l);return(0,m.jsx)(f,(0,s.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:l,className:(0,a.A)(c.root,i)},r,{classes:c}))}))},6600:(e,t,r)=>{r.d(t,{A:()=>g});var n=r(8168),s=r(8587),i=r(5043),a=r(8387),o=r(8606),l=r(5865),c=r(4535),d=r(2876),u=r(7034),h=r(2563),p=r(579);const x=["className","id"],m=(0,c.Ay)(l.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),g=i.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiDialogTitle"}),{className:l,id:c}=r,g=(0,s.A)(r,x),f=r,v=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},u.t,t)})(f),{titleId:A=c}=i.useContext(h.A);return(0,p.jsx)(m,(0,n.A)({component:"h2",className:(0,a.A)(v.root,l),ownerState:f,ref:t,variant:"h6",id:null!=c?c:A},g))}))},3851:(e,t,r)=>{r.d(t,{A:()=>f});var n=r(8587),s=r(8168),i=r(5043),a=r(8387),o=r(8606),l=r(1347),c=r(4535),d=r(2876),u=r(7056),h=r(2400);function p(e){return(0,h.Ay)("MuiListItemAvatar",e)}(0,u.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var x=r(579);const m=["className"],g=(0,c.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,s.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),f=i.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiListItemAvatar"}),{className:c}=r,u=(0,n.A)(r,m),h=i.useContext(l.A),f=(0,s.A)({},r,{alignItems:h.alignItems}),v=(e=>{const{alignItems:t,classes:r}=e,n={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,o.A)(n,p,r)})(f);return(0,x.jsx)(g,(0,s.A)({className:(0,a.A)(v.root,c),ownerState:f,ref:t},u))}))},2836:(e,t,r)=>{r.d(t,{n:()=>h});var n=r(5043),s=r(8664),i=r(116),a=r(9939),o=r(2078);class l extends o.Q{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const r=this.options;this.options=this.client.defaultMutationOptions(e),(0,s.f8)(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(t=this.currentMutation)||t.setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null==(e=this.currentMutation)||e.removeObserver(this))}onMutationUpdate(e){this.updateResult();const t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:"undefined"!==typeof e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:(0,i.$)(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){a.j.batch((()=>{var t,r,n,s;if(this.mutateOptions&&this.hasListeners())if(e.onSuccess)null==(t=(r=this.mutateOptions).onSuccess)||t.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(n=(s=this.mutateOptions).onSettled)||n.call(s,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(e.onError){var i,a,o,l;null==(i=(a=this.mutateOptions).onError)||i.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(o=(l=this.mutateOptions).onSettled)||o.call(l,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}e.listeners&&this.listeners.forEach((e=>{let{listener:t}=e;t(this.currentResult)}))}))}}var c=r(8873),d=r(9781),u=r(4084);function h(e,t,r){const i=(0,s.GR)(e,t,r),o=(0,d.jE)({context:i.context}),[h]=n.useState((()=>new l(o,i)));n.useEffect((()=>{h.setOptions(i)}),[h,i]);const x=(0,c.r)(n.useCallback((e=>h.subscribe(a.j.batchCalls(e))),[h]),(()=>h.getCurrentResult()),(()=>h.getCurrentResult())),m=n.useCallback(((e,t)=>{h.mutate(e,t).catch(p)}),[h]);if(x.error&&(0,u.G)(h.options.useErrorBoundary,[x.error]))throw x.error;return{...x,mutate:m,mutateAsync:x.mutate}}function p(){}}}]);
//# sourceMappingURL=7666.ffafcf96.chunk.js.map