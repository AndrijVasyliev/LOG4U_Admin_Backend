"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[384],{86:(e,i,t)=>{t.r(i),t.d(i,{default:()=>F,initialFreightValues:()=>w,initialStopDeliveryValues:()=>P,initialStopPickUpValues:()=>L});t(5043);var l=t(9781),r=t(2836),s=t(3892),d=t(899),a=t(7353),n=t(1906),o=t(9336),c=t(1403),u=t(6216),f=t(9893),m=t(4361),h=t(3189),p=t(1079),b=t(4944),x=t(8833),g=t(287),j=t(579);const A=d.Ik({type:d.Yj().oneOf([x.P7.FCFS,x.P7.ASAP,x.P7.APPT]).required("Type is required"),at:d.p6().when(["type"],((e,i)=>e[0]===x.P7.FCFS?i.oneOf([void 0]):i.required("At is required"))),from:d.p6().when(["type"],((e,i)=>e[0]!==x.P7.FCFS?i.oneOf([void 0]):i.required("From is required"))),to:d.p6().when(["type"],((e,i)=>e[0]!==x.P7.FCFS?i.oneOf([void 0]):i.required("To is required")))}),k=d.Ik({type:d.Yj().oneOf([x.P7.FCFS,x.P7.Direct,x.P7.APPT]).required("Type is required"),at:d.p6().when(["type"],((e,i)=>e[0]===x.P7.FCFS?i.oneOf([void 0]):i.required("At is required"))),from:d.p6().when(["type"],((e,i)=>e[0]!==x.P7.FCFS?i.oneOf([void 0]):i.required("From is required"))),to:d.p6().when(["type"],((e,i)=>e[0]!==x.P7.FCFS?i.oneOf([void 0]):i.required("To is required")))}),y=d.Ik({pieces:d.ai().integer().min(1).required("Pieces must be at least 1"),unitOfWeight:d.Yj().oneOf(x.Lv).required("Unit of weight is required"),weight:d.ai().moreThan(0).required("Weight is required"),unitOfLength:d.Yj().oneOf(x.Ny).required("Unit of length is required"),length:d.ai().moreThan(0).required("Length is required")}),v=d.Ik({status:d.Yj().oneOf(x.h9).required("Stop Pick Up Status is required"),facility:d.Ik({id:d.Yj().required()}).typeError("Enter correct facility").required("Facility is required"),timeFrame:A.required("Time frame is required"),freightList:d.YO().of(y.required("Freight is required")).required("Stop pickup must contain al least one freight"),addInfo:d.Yj()}),N=d.Ik({status:d.Yj().oneOf(x.$W).required("Stop Delivery Status is required"),facility:d.Ik({id:d.Yj().required()}).typeError("Enter correct facility").required("Facility is required"),timeFrame:k.required("Time frame is required"),bolList:d.YO().of(d.Yj().required("Bol Id must not be empty")).min(1,"Must be at least one Freight in Freight List").required("Must be at least one Freight in Freight List"),addInfo:d.Yj()}),$=d.Ik({status:d.Yj().oneOf(x.Jf).required("Status is required"),ref:d.YO().of(d.Yj().required("Ref must not be empty")).min(1,"REF is required").max(3,"REF must contain not more then 3 items").required("REF is required"),stops:d.YO().of(d.RZ((e=>{switch(e.type){case x.lk.PickUp:return v.required("Stop pickup is required");case x.lk.Delivery:return N.required("Stop delivery is required");default:return d.gl().oneOf([void 0]).required('Type of stop must be "Pick Up" or "Delivery"')}}))).min(2).required("Stops are required"),weight:d.Yj().required("Weight is required"),truckType:d.YO(d.Yj().oneOf(x.Ju)).min(1,"Select at list one").required("Truck Type is required"),rate:d.ai().typeError("Rate must be a number"),totalCharges:d.ai().typeError("Total charges must be a number").required("Total charges is required"),currency:d.Yj().required("Currency is required"),bookedByUser:d.Ik({id:d.Yj().required()}).typeError("Enter correct user").required("Booked by is required"),bookedByCompany:d.Yj(),assignTo:d.YO(d.Ik({id:d.Yj().required()}).typeError("Enter correct user")).min(1,"Assign To is required").required("Assign To is required"),checkInAs:d.Yj(),truck:d.Ik({id:d.Yj().required()}).typeError("Enter correct truck").nullable(),bookedWith:d.Ik({id:d.Yj().required()}).typeError("Enter correct customer").required("Booked with is required")}),C={type:x.P7.APPT,at:null},I={type:x.P7.APPT,at:null},w={pieces:null,unitOfWeight:"LBS",weight:null,unitOfLength:"IN",length:null},L={type:x.lk.PickUp,status:"New",timeFrame:C,facility:null,freightList:[{freightId:(0,g.M)(),...w}],addInfo:void 0},P={type:x.lk.Delivery,status:"New",timeFrame:I,facility:null,addInfo:void 0},S={status:"Available",ref:[],stops:[L,P],weight:void 0,truckType:[],rate:void 0,totalCharges:void 0,currency:"USD",bookedByUser:null,bookedByCompany:void 0,assignTo:[],checkInAs:"4ULogistics",truck:null,bookedWith:null};function F(e){let{onClose:i}=e;const t=(0,l.jE)(),d=(0,b.dh)(),{mutate:g,isLoading:A}=(0,r.n)(p.te,{onSuccess:e=>{d({severity:"success",message:"Created"}),t.invalidateQueries(["loads"]),i("Create",e)},onError:e=>{d({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),k=(0,s.Wx)({initialValues:S,enableReinitialize:!0,validationSchema:$,onSubmit:e=>{g(e)}});return(0,j.jsxs)(a.A,{sx:{height:"100%"},children:[(0,j.jsx)("form",{onSubmit:k.handleSubmit,onReset:k.handleReset,style:{height:"100%"},children:(0,j.jsxs)(a.A,{sx:{p:3,height:"100%"},children:[(0,j.jsx)(o.A,{}),(0,j.jsxs)(a.A,{sx:{maxHeight:"calc(100% - 70px)",overflowX:"hidden",overflowY:"scroll"},children:[(0,j.jsxs)(a.A,{sx:{marginBottom:-1,p:1},children:[(0,j.jsx)(h.zM,{fieldName:"status",label:"Status",items:x.Jf,disabledItems:x.Jf.filter((e=>"Available"!==e)),formik:k}),(0,j.jsx)(h.A_,{fieldName:"ref",label:"REF",multiline:!0,maxRows:3,formik:k}),(0,j.jsx)(m.A,{fieldName:"stops",formik:k})]},"topControls"),(0,j.jsxs)(a.A,{sx:{display:"inline-flex",width:"100%"},children:[(0,j.jsxs)(a.A,{sx:{p:1,width:"50%"},children:[(0,j.jsx)(h.A_,{fieldName:"weight",label:"Weight",formik:k}),(0,j.jsx)(h.yJ,{fieldName:"truckType",label:"Truck Type",items:x.Ju,formik:k}),(0,j.jsx)(h.Lw,{fieldName:"bookedByUser",label:"Booked By",getSelectedLabel:e=>`${e.fullName}`,getItemLabel:e=>`${e.fullName}`,getItemSecondLabel:e=>`${e.jobTitle}`,ListIcon:f.A,entityType:"User",queryFn:p.Fw,orderby:"fullName",order:"asc",formik:k}),(0,j.jsx)(h.Lw,{fieldName:"bookedWith",label:"Booked With",getSelectedLabel:e=>`${e.name}`,getItemLabel:e=>`${e.name}`,getItemSecondLabel:e=>`${e.type}`,ListIcon:u.A,entityType:"Customer",queryFn:p.sg,orderby:"name",order:"asc",formik:k}),(0,j.jsx)(h.Lw,{fieldName:"truck",label:"Truck",getSelectedLabel:e=>`${e.truckNumber}`,getItemLabel:e=>`${e.truckNumber}`,getItemSecondLabel:e=>`${e.status}, ${e.licencePlate}`,ListIcon:c.A,entityType:"Truck",queryFn:p.fG,orderby:"truckNumber",order:"asc",formik:k})]},"left"),(0,j.jsxs)(a.A,{sx:{p:1,width:"50%"},children:[(0,j.jsx)(h.A_,{fieldName:"rate",label:"Rate",number:!0,formik:k}),(0,j.jsx)(h.A_,{fieldName:"totalCharges",label:"Total Charges",placeholder:"Enter total rate",number:!0,formik:k}),(0,j.jsx)(h.A_,{fieldName:"currency",label:"Currency",formik:k}),(0,j.jsx)(h.A_,{fieldName:"checkInAs",label:"Check In As",formik:k}),(0,j.jsx)(h.A_,{fieldName:"bookedByCompany",label:"Booked By Company",formik:k})]},"right")]},"centerControls"),(0,j.jsxs)(a.A,{sx:{p:1,paddingBottom:0,paddingTop:0},children:[(0,j.jsx)(h.YY,{fieldName:"assignTo",label:"Assign To",getSelectedLabel:e=>`${e.fullName}`,getItemLabel:e=>`${e.fullName}`,getItemSecondLabel:e=>`${e.jobTitle}`,ListIcon:f.A,queryFn:p.Fw,orderby:"fullName",order:"asc",formik:k}),(0,j.jsx)(a.A,{sx:{paddingBottom:2,paddingTop:2}},"spacerRate"),(0,j.jsx)(h.$c,{objectId:void 0,objectType:"Load",label:"Rate Files",tags:{undefined:"Rate"},disabled:!0}),(0,j.jsx)(a.A,{sx:{paddingBottom:2,paddingTop:2}},"spacerBill"),(0,j.jsx)(h.$c,{objectId:void 0,objectType:"Load",label:"Bill Files",tags:{undefined:"Bill"},disabled:!0})]},"bottomControls")]},"controls"),(0,j.jsx)(o.A,{}),(0,j.jsxs)(a.A,{sx:{paddingTop:3,display:"flex"},children:[(0,j.jsx)(a.A,{sx:{p:1,paddingTop:0,width:"50%"},children:(0,j.jsx)(n.A,{fullWidth:!0,variant:"contained",size:"small",color:"primary",type:"submit",children:"Create"})},"left"),(0,j.jsx)(a.A,{sx:{p:1,paddingTop:0,width:"50%"},children:(0,j.jsx)(n.A,{fullWidth:!0,variant:"contained",size:"small",color:"primary",type:"button",onClick:()=>{i("Close")},children:"Cancel"})},"right")]},"buttons")]})}),(0,j.jsx)(h.aH,{visible:A})]})}},4361:(e,i,t)=>{t.d(i,{A:()=>D});var l=t(5043),r=t(3097),s=t.n(r),d=t(7353),a=t(3766),n=t(6605),o=t(710),c=t(1477),u=t(5954),f=t(4496),m=t(7392),h=t(9662),p=t(579);const b=(0,h.A)((0,p.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),x=(0,h.A)((0,p.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward");var g=t(141);const j=(0,h.A)((0,p.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove");var A=t(3189),k=t(8833);function y(e){let{fieldName:i,values:t,disabled:r,formik:a}=e;const n=s()(a.values,i);return l.useEffect((()=>{n.type===k.P7.FCFS?((n.at||null===n.at)&&a.setFieldValue(`${i}.at`,void 0),!n.from&&a.setFieldValue(`${i}.from`,null),!n.to&&a.setFieldValue(`${i}.to`,null)):n.type&&(!n.at&&a.setFieldValue(`${i}.at`,null),(n.from||null===n.from)&&a.setFieldValue(`${i}.from`,void 0),(n.to||null===n.to)&&a.setFieldValue(`${i}.to`,void 0))}),[n.type]),(0,p.jsxs)(d.A,{sx:{display:"flex",width:"100%"},children:[(0,p.jsx)(d.A,{sx:{paddingRight:1,flex:1},children:(0,p.jsx)(A.zM,{fieldName:`${i}.type`,label:"Time frame type",items:t,disabled:r,formik:a})},"typeContainer"),n.type===k.P7.FCFS?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.A,{sx:{paddingRight:1,paddingLeft:1,flex:1},children:(0,p.jsx)(A.Id,{fieldName:`${i}.from`,label:"From",minDateTime:new Date(Date.now()-864e5),disabled:r,formik:a})},"fromContainer"),(0,p.jsx)(d.A,{sx:{paddingLeft:1,flex:1},children:(0,p.jsx)(A.Id,{fieldName:`${i}.to`,label:"To",minDateTime:new Date(Date.now()-864e5),disabled:r,formik:a})},"toContainer")]}):(0,p.jsx)(d.A,{sx:{paddingLeft:1,flex:1},children:(0,p.jsx)(A.Id,{fieldName:`${i}.at`,label:"At",minDateTime:new Date(Date.now()-864e5),disabled:r,formik:a})},"atContainer")]},"inlineControls")}var v=t(7166);function N(e){let{number:i,fieldName:t,onAdd:r,onRemove:s,removeDisabled:c,disabled:h,formik:b}=e;const[x,y]=l.useState(!1);return(0,p.jsxs)(a.A,{expanded:x,onChange:()=>{y((e=>!e))},sx:{backgroundColor:"unset"},children:[(0,p.jsx)(n.A,{expandIcon:(0,p.jsx)(u.A,{}),"aria-controls":"freight-content",id:"freight-header",children:(0,p.jsxs)(d.A,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[(0,p.jsx)(f.A,{children:`Freight #${i}`}),(0,p.jsxs)(d.A,{children:[(0,p.jsx)(m.A,{component:"label","aria-label":"add",sx:{padding:0},onClickCapture:e=>{(0,v.d)(e),r()},disabled:h,children:(0,p.jsx)(g.A,{})}),(0,p.jsx)(m.A,{component:"label","aria-label":"remove",sx:{padding:0},onClickCapture:e=>{(0,v.d)(e),s()},disabled:h||c,children:(0,p.jsx)(j,{})})]})]})}),(0,p.jsxs)(o.A,{children:[(0,p.jsx)(A.A_,{fieldName:`${t}.pieces`,label:"Pieces",number:!0,disabled:h,formik:b}),(0,p.jsxs)(d.A,{sx:{display:"flex",width:"100%"},children:[(0,p.jsxs)(d.A,{sx:{paddingRight:1,flex:1},children:[(0,p.jsx)(A.zM,{fieldName:`${t}.unitOfWeight`,label:"Unit Of Weight",items:k.Lv,disabled:h,formik:b}),(0,p.jsx)(A.A_,{fieldName:`${t}.weight`,label:"Weight",number:!0,disabled:h,formik:b})]},"left"),(0,p.jsxs)(d.A,{sx:{paddingLeft:1,flex:1},children:[(0,p.jsx)(A.zM,{fieldName:`${t}.unitOfLength`,label:"Unit Of Length",items:k.Ny,disabled:h,formik:b}),(0,p.jsx)(A.A_,{fieldName:`${t}.length`,label:"Length",number:!0,disabled:h,formik:b})]},"right")]},"inlineControls")]})]})}var $=t(86),C=t(287);function I(e){let{fieldName:i,disabled:t,formik:l}=e;const r=s()(l.values,i);return(0,p.jsx)(d.A,{sx:{paddingBottom:3,width:"100%"},children:r.map(((e,s)=>(0,p.jsx)(N,{number:s+1,fieldName:`${i}[${s}]`,onAdd:()=>(e=>{const t=r.toSpliced(e+1,0,{freightId:(0,C.M)(),...$.initialFreightValues});l.setFieldValue(i,t)})(s),onRemove:()=>(e=>{const t=r.toSpliced(e,1);l.setFieldValue(i,t)})(s),removeDisabled:1===r.length,disabled:t,formik:l},s)))},"freightList")}function w(e){let{number:i,fieldName:t,freightListPath:r,disabled:c,formik:m}=e;const h=s()(m.values,"id"),b=s()(m.values,`${t}.driversInfoId`),x=s()(m.values,r),g=(null===x||void 0===x?void 0:x.filter((e=>e.freightId)).map(((e,i)=>({value:e.freightId,label:`Freight #${i+1}: ${e.pieces?e.pieces+" pcs, ":""}${e.length&&e.unitOfLength?e.length+" "+e.unitOfLength+" length, ":""}${e.weight&&e.unitOfWeight?e.weight+" "+e.unitOfWeight+" weight":""}`}))))||[],[j,y]=l.useState(!1);return(0,p.jsxs)(a.A,{expanded:j,onChange:()=>{y((e=>!e))},sx:{backgroundColor:"unset"},children:[(0,p.jsx)(n.A,{expandIcon:(0,p.jsx)(u.A,{}),"aria-controls":"freight-content",id:"freight-header",children:(0,p.jsx)(d.A,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:(0,p.jsx)(f.A,{children:`Drivers Info #${i}`})})}),(0,p.jsxs)(o.A,{children:[(0,p.jsxs)(d.A,{sx:{display:"flex",width:"100%"},children:[(0,p.jsxs)(d.A,{sx:{paddingRight:1,flex:1},children:[(0,p.jsx)(A.zM,{fieldName:`${t}.bol`,label:"Bol",items:g,disabled:c,formik:m}),(0,p.jsx)(A.zM,{fieldName:`${t}.unitOfWeight`,label:"Unit Of Weight",items:k.Lv,disabled:c,formik:m}),(0,p.jsx)(A.A_,{fieldName:`${t}.weight`,label:"Weight",number:!0,disabled:c,formik:m})]},"left"),(0,p.jsxs)(d.A,{sx:{paddingLeft:1,flex:1},children:[(0,p.jsx)(A.A_,{fieldName:`${t}.pieces`,label:"Pieces",number:!0,disabled:c,formik:m}),(0,p.jsx)(A.A_,{fieldName:`${t}.seal`,label:"Seal",disabled:c,formik:m}),(0,p.jsx)(A.zM,{fieldName:`${t}.addressIsCorrect`,label:"Address is correct",items:[{value:!0,label:"Yes"},{value:!1,label:"No"}],disabled:c,formik:m})]},"right")]},"inlineControls"),(0,p.jsx)(A.$c,{objectId:h,objectType:"Load",label:"Stop Drivers Files",tags:{[`${b}`]:"StopPickUpDriversInfo"},disabled:c})]})]})}function L(e){let{fieldName:i,freightListPath:t,disabled:l,formik:r}=e;const a=s()(r.values,i);return(0,p.jsx)(d.A,{sx:{paddingBottom:3,width:"100%"},children:a.map(((e,s)=>(0,p.jsx)(w,{number:s+1,fieldName:`${i}[${s}]`,freightListPath:t,disabled:l,formik:r},s)))},"pickUpDriversInfo")}var P=t(1079);const S=e=>{switch(e){case void 0:case"New":case"Completed":return"";default:return`${e}`}};function F(e){let{stopNumber:i,pickUpNumber:t,fieldName:r,onUp:h,onDown:N,onAdd:$,onRemove:C,upDisabled:w,downDisabled:F,removeDisabled:q,disabled:T,formik:O}=e;const D=s()(O.values,`${r}.status`),E=s()(O.values,`${r}.driversInfo`),R=S(D),U=T,[B,W]=l.useState(!1);return(0,p.jsxs)(a.A,{expanded:B,onChange:()=>{W((e=>!e))},sx:{backgroundColor:"unset"},children:[(0,p.jsx)(n.A,{expandIcon:(0,p.jsx)(u.A,{}),"aria-controls":"stop-pickup-content",id:"stop-pickup-header",children:(0,p.jsxs)(d.A,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[(0,p.jsx)(f.A,{color:"New"===D?"new":"Completed"===D?"completed":"inProgress",children:`Stop (${i})${R?" ["+R+"] ":" "}PickUp #${t}`}),(0,p.jsxs)(d.A,{children:[(0,p.jsx)(m.A,{component:"label","aria-label":"up",sx:{padding:0},onClickCapture:e=>{(0,v.d)(e),h()},disabled:T||w,children:(0,p.jsx)(b,{})}),(0,p.jsx)(m.A,{component:"label","aria-label":"down",sx:{padding:0},onClickCapture:e=>{(0,v.d)(e),N()},disabled:T||F,children:(0,p.jsx)(x,{})}),(0,p.jsx)(m.A,{component:"label","aria-label":"add",sx:{padding:0},onClickCapture:e=>{(0,v.d)(e),$()},disabled:T,children:(0,p.jsx)(g.A,{})}),(0,p.jsx)(m.A,{component:"label","aria-label":"remove",sx:{padding:0},onClickCapture:e=>{(0,v.d)(e),C()},disabled:T||q,children:(0,p.jsx)(j,{})})]})]})}),(0,p.jsxs)(o.A,{children:[(0,p.jsxs)(d.A,{sx:{display:"flex",width:"100%"},children:[(0,p.jsx)(d.A,{sx:{paddingRight:1,flex:1},children:(0,p.jsx)(A.zM,{fieldName:`${r}.status`,label:"Status",items:k.h9,disabled:U,formik:O})},"statusContainer"),(0,p.jsx)(d.A,{sx:{paddingLeft:1,flex:1},children:(0,p.jsx)(A.Lw,{fieldName:`${r}.facility`,label:"Facility",getSelectedLabel:e=>`${e.name}`,getItemLabel:e=>`${e.name}`,getItemSecondLabel:e=>`${e.address}`,ListIcon:c.A,entityType:"Facility",queryFn:P.Kw,startEmpty:!1,orderby:"name",order:"asc",disabled:T,formik:O})},"facilityContainer")]},"inlineControls"),(0,p.jsx)(y,{fieldName:`${r}.timeFrame`,values:[k.P7.FCFS,k.P7.APPT,k.P7.ASAP],disabled:T,formik:O}),(0,p.jsx)(I,{fieldName:`${r}.freightList`,disabled:T,formik:O}),(0,p.jsx)(A.A_,{fieldName:`${r}.addInfo`,label:"Additional stop info",disabled:T,formik:O}),E&&E.length?(0,p.jsx)(L,{fieldName:`${r}.driversInfo`,freightListPath:`${r}.freightList`,disabled:T,formik:O}):null]})]})}function q(e){let{number:i,fieldName:t,bolListPath:r,stopsPath:c,disabled:m,formik:h}=e;const b=s()(h.values,"id"),x=s()(h.values,`${t}.driversInfoId`),g=s()(h.values,r),j=s()(h.values,c),y=null===j||void 0===j?void 0:j.filter((e=>e.type===k.lk.PickUp)).flatMap(((e,i)=>e.freightList.filter((e=>e.freightId)).map(((e,t)=>({value:e.freightId,label:`Freight #${t+1} (Stop PickUp#${i+1}): ${e.pieces?e.pieces+" pcs, ":""}${e.length&&e.unitOfLength?e.length+" "+e.unitOfLength+" length, ":""}${e.weight&&e.unitOfWeight?e.weight+" "+e.unitOfWeight+" weight":""}`}))).filter((e=>g&&g.includes(e.value))))),[v,N]=l.useState(!1);return(0,p.jsxs)(a.A,{expanded:v,onChange:()=>{N((e=>!e))},sx:{backgroundColor:"unset"},children:[(0,p.jsx)(n.A,{expandIcon:(0,p.jsx)(u.A,{}),"aria-controls":"freight-content",id:"freight-header",children:(0,p.jsx)(d.A,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:(0,p.jsx)(f.A,{children:`Drivers Info #${i}`})})}),(0,p.jsxs)(o.A,{children:[(0,p.jsxs)(d.A,{sx:{display:"flex",width:"100%"},children:[(0,p.jsx)(d.A,{sx:{paddingRight:1,flex:1},children:(0,p.jsx)(A.zM,{fieldName:`${t}.bol`,label:"Bol",items:y,disabled:m,formik:h})},"left"),(0,p.jsx)(d.A,{sx:{paddingLeft:1,flex:1},children:(0,p.jsx)(A.A_,{fieldName:`${t}.signedBy`,label:"Signed By",disabled:m,formik:h})},"right")]},"inlineControls"),(0,p.jsx)(A.$c,{objectId:b,objectType:"Load",label:"Stop Drivers Files",tags:{[`${x}`]:"StopDeliveryDriversInfo"},disabled:m})]})]})}function T(e){let{fieldName:i,bolListPath:t,stopsPath:l,disabled:r,formik:a}=e;const n=s()(a.values,i);return(0,p.jsx)(d.A,{sx:{paddingBottom:3,width:"100%"},children:n.map(((e,s)=>(0,p.jsx)(q,{number:s+1,fieldName:`${i}[${s}]`,bolListPath:t,stopsPath:l,disabled:r,formik:a},s)))},"deliveryDriversInfo")}function O(e){let{stopNumber:i,deliveryNumber:t,fieldName:r,stopsPath:h,onUp:N,onDown:$,onAdd:C,onRemove:I,upDisabled:w,downDisabled:L,removeDisabled:F,disabled:q,formik:O}=e;const D=s()(O.values,`${r}.status`),E=s()(O.values,h),R=s()(O.values,`${r}.driversInfo`),U=S(D),B=q,W=null===E||void 0===E?void 0:E.filter((e=>e.type===k.lk.PickUp)).flatMap(((e,i)=>e.freightList.filter((e=>e.freightId)).map(((e,t)=>({value:e.freightId,label:`Freight #${t+1} (Stop PickUp#${i+1}): ${e.pieces?e.pieces+" pcs, ":""}${e.length&&e.unitOfLength?e.length+" "+e.unitOfLength+" length, ":""}${e.weight&&e.unitOfWeight?e.weight+" "+e.unitOfWeight+" weight":""}`}))))),[Y,M]=l.useState(!1);return(0,p.jsxs)(a.A,{expanded:Y,onChange:()=>{M((e=>!e))},sx:{backgroundColor:"unset"},children:[(0,p.jsx)(n.A,{expandIcon:(0,p.jsx)(u.A,{}),"aria-controls":"stop-delivery-content",id:"stop-delivery-header",children:(0,p.jsxs)(d.A,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[(0,p.jsx)(f.A,{color:"New"===D?"new":"Completed"===D?"completed":"inProgress",children:`Stop (${i})${U?" ["+U+"] ":" "}Delivery #${t}`}),(0,p.jsxs)(d.A,{children:[(0,p.jsx)(m.A,{component:"label","aria-label":"up",sx:{padding:0},onClickCapture:e=>{(0,v.d)(e),N()},disabled:q||w,children:(0,p.jsx)(b,{})}),(0,p.jsx)(m.A,{component:"label","aria-label":"down",sx:{padding:0},onClickCapture:e=>{(0,v.d)(e),$()},disabled:q||L,children:(0,p.jsx)(x,{})}),(0,p.jsx)(m.A,{component:"label","aria-label":"add",sx:{padding:0},onClickCapture:e=>{(0,v.d)(e),C()},disabled:q,children:(0,p.jsx)(g.A,{})}),(0,p.jsx)(m.A,{component:"label","aria-label":"remove",sx:{padding:0},onClickCapture:e=>{(0,v.d)(e),I()},disabled:q||F,children:(0,p.jsx)(j,{})})]})]})}),(0,p.jsxs)(o.A,{children:[(0,p.jsxs)(d.A,{sx:{display:"flex",width:"100%"},children:[(0,p.jsx)(d.A,{sx:{paddingRight:1,flex:1},children:(0,p.jsx)(A.zM,{fieldName:`${r}.status`,label:"Status",items:k.$W,disabled:B,formik:O})},"statusContainer"),(0,p.jsx)(d.A,{sx:{paddingLeft:1,flex:1},children:(0,p.jsx)(A.Lw,{fieldName:`${r}.facility`,label:"Facility",getSelectedLabel:e=>`${e.name}`,getItemLabel:e=>`${e.name}`,getItemSecondLabel:e=>`${e.address}`,ListIcon:c.A,entityType:"Facility",queryFn:P.Kw,startEmpty:!1,orderby:"name",order:"asc",disabled:q,formik:O})},"facilityContainer")]},"inlineControls"),(0,p.jsx)(y,{fieldName:`${r}.timeFrame`,values:[k.P7.FCFS,k.P7.APPT,k.P7.Direct],disabled:q,formik:O}),(0,p.jsx)(A.yJ,{fieldName:`${r}.bolList`,label:"Freight List",items:W,disabled:B,formik:O}),(0,p.jsx)(A.A_,{fieldName:`${r}.addInfo`,label:"Additional stop info",disabled:q,formik:O}),R&&R.length?(0,p.jsx)(T,{fieldName:`${r}.driversInfo`,bolListPath:`${r}.bolList`,stopsPath:h,disabled:q,formik:O}):null]})]})}function D(e){let{fieldName:i,disabled:t,formik:l}=e;const r=s()(l.values,i),a=e=>{const t=r[e-1],s=r[e],d=r.toSpliced(e-1,2,s,t);l.setFieldValue(i,d)},n=e=>{const t=r[e],s=r[e+1],d=r.toSpliced(e,2,s,t);l.setFieldValue(i,d)},o=e=>{const t=r.toSpliced(e,1);l.setFieldValue(i,t)};return(0,p.jsx)(d.A,{sx:{paddingBottom:3,width:"100%"},children:r?r.map(((e,s)=>{switch(e.type){case k.lk.PickUp:return(0,p.jsx)(F,{stopNumber:s+1,pickUpNumber:r.slice(0,s+1).filter((e=>e.type===k.lk.PickUp)).length,fieldName:`${i}[${s}]`,onUp:()=>a(s),onDown:()=>n(s),onAdd:()=>(e=>{const t=r.toSpliced(e+1,0,$.initialStopPickUpValues);l.setFieldValue(i,t)})(s),onRemove:()=>o(s),upDisabled:0===s,downDisabled:s===r.length-2||0===s&&r[1].type===k.lk.Delivery,removeDisabled:0===s,disabled:t,formik:l},s);case k.lk.Delivery:return(0,p.jsx)(O,{stopNumber:s+1,deliveryNumber:r.slice(0,s+1).filter((e=>e.type===k.lk.Delivery)).length,fieldName:`${i}[${s}]`,stopsPath:`${i}`,onUp:()=>a(s),onDown:()=>n(s),onAdd:()=>(e=>{const t=r.toSpliced(e+1,0,$.initialStopDeliveryValues);l.setFieldValue(i,t)})(s),onRemove:()=>o(s),upDisabled:s===r.length-1&&r[r.length-2].type===k.lk.PickUp||1===s,downDisabled:s===r.length-1,removeDisabled:s===r.length-1,disabled:t,formik:l},s)}})):null},"stops")}},8833:(e,i,t)=>{t.d(i,{$W:()=>m,IY:()=>a,Jf:()=>u,Ju:()=>d,Lv:()=>h,Ny:()=>p,P7:()=>x,Sr:()=>s,fo:()=>r,h9:()=>f,lk:()=>b,mW:()=>o,p5:()=>n,pI:()=>c,z5:()=>l});const l=["EN","UA","ES","RU"],r=["Admin","Super Admin"],s=["BROKER DOMESTIC","BROKER INTERNATIONAL","FREIGHT FORWARDER DOMESTIC","FREIGHT FORWARDER INTERNATIONAL","SHIPPER/CONSIGNEE DOMESTIC","SHIPPER/CONSIGNEE INTERNATIONAL","OTHER"],d=["Cargo van","Reefer van","Box truck","Box truck Reefer","Straight truck","Hotshot","Tented box"],a=["Available","Not Available","Will be available","On route"],n=["Yes","No"],o=["Hazmat","Tsa","TWIC","Tanker Endorsement"],c=["Dock height risers","Air ride","Lift gate","Keep from freezing","ICC bar","Vertical E-track","Horizontal E-track","Pallet jack","PPE","Ramps","Straps","Loads bars","Blankets","Pads","Fire extinguisher","Metal hooks","Reefer","Heater"],u=["Available","Planned","In Progress","TONU","Cancelled","Completed"],f=["New","On route to PU","On site PU","Loaded, Waiting GTG","GTG","Completed"],m=["New","On route to DEL","On site DEL","Unloaded, Waiting GTG","GTG","Completed"],h=["LBS","KG","TON"],p=["FT","IN","M","CM"];let b=function(e){return e.PickUp="PickUp",e.Delivery="Delivery",e}({}),x=function(e){return e.FCFS="FCFS",e.APPT="APPT",e.ASAP="ASAP",e.Direct="Direct",e}({})},287:(e,i,t)=>{function l(){return Math.floor(Date.now()/1e3).toString(16)+Array.from({length:16},(()=>Math.floor(16*Math.random()).toString(16))).join("").slice(0,16)}t.d(i,{M:()=>l})},9893:(e,i,t)=>{t.d(i,{A:()=>s});var l=t(9662),r=t(579);const s=(0,l.A)((0,r.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person")}}]);
//# sourceMappingURL=384.438b9fee.chunk.js.map