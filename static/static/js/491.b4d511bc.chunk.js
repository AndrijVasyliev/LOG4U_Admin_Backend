"use strict";(self.webpackChunkadmin_frontend=self.webpackChunkadmin_frontend||[]).push([[491],{344:function(e,n,a){a.d(n,{Wn:function(){return u},BB:function(){return l},kg:function(){return s},He:function(){return i},_H:function(){return d},g7:function(){return o},np:function(){return p}});var t=a(3619),r=new URL(window.location.href).origin,c=function(e){var n,a,r={headers:new Headers};return r.headers.set("Authorization","Basic "+btoa((null===(n=t.b.user)||void 0===n?void 0:n.username)+":"+(null===(a=t.b.user)||void 0===a?void 0:a.password))),fetch(e,r)},o=function(e,n,a,t,o){var i=new URL("/truck",r);return i.searchParams.append("limit","".concat(n)),i.searchParams.append("offset","".concat(n*e)),a&&t&&(i.searchParams.append("orderby","".concat(a)),i.searchParams.append("direction","".concat(t))),null!==o&&void 0!==o&&o.truckNumber&&i.searchParams.append("truckNumber","".concat(o.truckNumber)),null!==o&&void 0!==o&&o.lastLocation&&null!==o&&void 0!==o&&o.distance&&(i.searchParams.append("lastLocation","".concat(o.lastLocation)),i.searchParams.append("distance","".concat(o.distance))),c(i).then((function(e){return e.json()}))},i=function(e,n,a,t,o){var i=new URL("/location",r);return i.searchParams.append("limit","".concat(n)),i.searchParams.append("offset","".concat(n*e)),a&&t&&(i.searchParams.append("orderby","".concat(a)),i.searchParams.append("direction","".concat(t))),null!==o&&void 0!==o&&o.search&&i.searchParams.append("search","".concat(o.search)),null!==o&&void 0!==o&&o.name&&i.searchParams.append("name","".concat(o.name)),c(i).then((function(e){return e.json()}))},s=function(e,n,a,t,o){var i=new URL("/load",r);return i.searchParams.append("limit","".concat(n)),i.searchParams.append("offset","".concat(n*e)),a&&t&&(i.searchParams.append("orderby","".concat(a)),i.searchParams.append("direction","".concat(t))),null!==o&&void 0!==o&&o.loadNumber&&i.searchParams.append("loadNumber","".concat(o.loadNumber)),null!==o&&void 0!==o&&o.truckNumber&&i.searchParams.append("truckNumber","".concat(o.truckNumber)),c(i).then((function(e){return e.json()}))},d=function(e,n,a,t,o){var i=new URL("/owner",r);return i.searchParams.append("limit","".concat(n)),i.searchParams.append("offset","".concat(n*e)),a&&t&&(i.searchParams.append("orderby","".concat(a)),i.searchParams.append("direction","".concat(t))),null!==o&&void 0!==o&&o.fullName&&i.searchParams.append("fullName","".concat(o.fullName)),null!==o&&void 0!==o&&o.truckNumber&&i.searchParams.append("truckNumber","".concat(o.truckNumber)),c(i).then((function(e){return e.json()}))},l=function(e,n,a,t,o){var i=new URL("/driver",r);return i.searchParams.append("limit","".concat(n)),i.searchParams.append("offset","".concat(n*e)),a&&t&&(i.searchParams.append("orderby","".concat(a)),i.searchParams.append("direction","".concat(t))),null!==o&&void 0!==o&&o.fullName&&i.searchParams.append("fullName","".concat(o.fullName)),null!==o&&void 0!==o&&o.truckNumber&&i.searchParams.append("truckNumber","".concat(o.truckNumber)),c(i).then((function(e){return e.json()}))},u=function(e,n,a,t,o){var i=new URL("/coordinator",r);return i.searchParams.append("limit","".concat(n)),i.searchParams.append("offset","".concat(n*e)),a&&t&&(i.searchParams.append("orderby","".concat(a)),i.searchParams.append("direction","".concat(t))),null!==o&&void 0!==o&&o.fullName&&i.searchParams.append("fullName","".concat(o.fullName)),null!==o&&void 0!==o&&o.truckNumber&&i.searchParams.append("truckNumber","".concat(o.truckNumber)),c(i).then((function(e){return e.json()}))},p=function(e,n,a,t,o){var i=new URL("/user",r);return i.searchParams.append("limit","".concat(n)),i.searchParams.append("offset","".concat(n*e)),a&&t&&(i.searchParams.append("orderby","".concat(a)),i.searchParams.append("direction","".concat(t))),null!==o&&void 0!==o&&o.fullName&&i.searchParams.append("fullName","".concat(o.fullName)),c(i).then((function(e){return e.json()}))}},9491:function(e,n,a){a.r(n),a.d(n,{default:function(){return _}});var t=a(1413),r=a(3433),c=a(9439),o=a(2791),i=a(8404),s=a(6934),d=a(2065),l=a(5377),u=a(7391),p=a(68),m=a(3994),h=a(7865),f=a(4554),x=a(9836),b=a(3382),v=a(9281),g=a(6890),P=a(6812),j=a(5855),Z=a(720),k=a(4663),y=a(890),w=a(5527),N=a(1889),C=a(6151),S=a(3400),D=a(1588),F=a(7247),L=a(1903),R=a(1528),O=a(5573),I=a(3199),U=a(4765),q=a(344),z=a(184),T=[{id:"truckNumber",orderField:"truckNumber",getData:function(e){return{data:"".concat(e.truckNumber)}},numeric:!0,disablePadding:!1,label:"Truck\xa0Number"},{id:"mainContactInfo",getData:function(e){var n=e.coordinator,a=e.owner,t="",r="",c="",o="";return n?(t="./coordinators/".concat(n.id),r="(C) ",c="".concat(n.fullName),o="".concat(null===n||void 0===n?void 0:n.phone)):a&&(t="./owners/".concat(a.id),r="".concat("Owner"===a.type?"(O) ":"").concat("OwnerDriver"===a.type?"(O/d) ":""),c="".concat(a.fullName),o="".concat(null===a||void 0===a?void 0:a.phone)),{data:(0,z.jsxs)("span",{children:[(0,z.jsx)("b",{children:r}),(0,z.jsx)("a",{href:t,target:"_blank",onClick:B,children:c}),(0,z.jsx)("br",{}),o]}),title:r+""+c+"\n"+o}},numeric:!1,disablePadding:!0,label:"Main\xa0Contact\xa0info"},{id:"truckInfo",getData:function(e){var n=e.type?"".concat(e.type):"",a=e.equipment?"".concat(e.equipment.join(", ")):"";return{data:(0,z.jsxs)("span",{children:[n,(0,z.jsx)("br",{}),a]}),title:n+"\n"+a}},numeric:!1,disablePadding:!0,label:"Truck\xa0info"},{id:"dimsPayload",getData:function(e){var n=e.doorDims?"".concat(e.doorDims):"",a=e.payload?"".concat(e.payload):"";return{data:(0,z.jsxs)("span",{children:[n,(0,z.jsx)("br",{}),a]}),title:n+"\n"+a}},numeric:!1,disablePadding:!0,label:"DIMS/Payload"},{id:"status",orderField:"status",getData:function(e){return{data:"".concat(e.status)}},numeric:!1,disablePadding:!0,label:"Status"},{id:"calcDistance",getData:function(e){return{data:"".concat(e.milesHaversine?e.milesHaversine.toFixed(2):"")}},numeric:!1,disablePadding:!0,label:"Origin\xa0away"},{id:"roadsDistance",getData:function(e){return{data:"".concat(e.milesByRoads?e.milesByRoads.toFixed(2):"")}},numeric:!1,disablePadding:!0,label:"Road\xa0distance"},{id:"location",getData:function(e){if(null!==e&&void 0!==e&&e.lastCity){var n="./locations/".concat(e.lastCity.id),a="".concat(e.lastCity.name,", ").concat(e.lastCity.stateCode,", ").concat(e.lastCity.zipCode,","),t="".concat(e.locationUpdatedAt?new Date(e.locationUpdatedAt).toLocaleString():"");return{data:(0,z.jsxs)("span",{children:[(0,z.jsx)("a",{href:n,target:"_blank",onClick:B,children:a}),(0,z.jsx)("br",{}),t]}),title:a+"\n"+t}}return{data:""}},numeric:!1,disablePadding:!0,label:"Last\xa0known\xa0location"}],W=(0,s.ZP)(g.Z)((function(e){return{backgroundColor:e.theme.palette.background.default}})),A=(0,s.ZP)(m.Z)((function(e){e.theme;return{maxWidth:"100px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}));function B(e){e.stopPropagation()}function H(e){e.onSelectAllClick;var n=e.order,a=e.orderBy,t=(e.numSelected,e.rowCount,e.onRequestSort);return(0,z.jsx)(W,{children:(0,z.jsxs)(j.Z,{children:[(0,z.jsx)(A,{align:"center",padding:"checkbox",children:"Actions"}),T.map((function(e){return(0,z.jsx)(A,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:a===e.id&&n,children:(0,z.jsxs)(Z.Z,{active:e.orderField&&a===e.orderField,hideSortIcon:!e.orderField,direction:a===e.orderField?n:"asc",onClick:e.orderField?(r=e.orderField,function(e){t(e,r)}):function(){},children:[e.label,e.orderField&&a===e.orderField?(0,z.jsx)(f.Z,{component:"span",sx:O.Z,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var r}))]})})}function M(e){var n=e.numSelected,a=e.setQueryParams,s=o.useState(null),m=(0,c.Z)(s,2),x=m[0],b=m[1],v=o.useState(""),g=(0,c.Z)(v,2),P=g[0],j=g[1],Z=o.useState(""),w=(0,c.Z)(Z,2),C=w[0],O=w[1],U=o.useState([]),T=(0,c.Z)(U,2),W=T[0],A=T[1],B=o.useState(200),H=(0,c.Z)(B,2),M=H[0],_=H[1],E=o.useState(!1),K=(0,c.Z)(E,2),Q=K[0],G=K[1],J=o.useMemo((function(){return(0,I.Z)((function(e){O(e)}),400)}),[]),V=(0,i.a)({queryKey:["locations",C],queryFn:function(){return(0,q.He)(0,15,"name","asc",{search:C})},keepPreviousData:!0}).data,X=(void 0===V?{items:[],total:0}:V).items;o.useEffect((function(){if(""!==P){var e=[];x&&(e=[x]),X.length&&(e=[].concat((0,r.Z)(e),(0,r.Z)(X))),A(e)}else A(x?[x]:[])}),[x,X]);var Y=function(){null!==x&&void 0!==x&&x.location&&(a({lastLocation:x.location.join(","),distance:M}),G(!1))};return(0,z.jsxs)(k.Z,{sx:(0,t.Z)({pl:{sm:2},pr:{xs:1,sm:1}},n>0&&{bgcolor:function(e){return(0,d.Fq)(e.palette.primary.main,e.palette.action.activatedOpacity)}}),children:[n>0?(0,z.jsxs)(y.Z,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[n," selected"]}):(0,z.jsx)(y.Z,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Trucks Nearby"}),(0,z.jsx)(f.Z,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"350px"}},children:(0,z.jsx)(l.Z,{id:"google-map-demo",getOptionLabel:function(e){return"string"===typeof e?e:"".concat(e.name,", ").concat(e.zipCode,", ").concat(e.stateName)},filterOptions:function(e){return e},options:W,autoComplete:!0,includeInputInList:!0,filterSelectedOptions:!0,value:x,noOptionsText:"No locations",onChange:function(e,n){A(n?[n].concat((0,r.Z)(W)):W),b(n),Y(),null!==n&&void 0!==n&&n.location?(a({lastLocation:n.location.join(","),distance:M}),G(!1)):n||(j(""),a({}),G(!1))},onInputChange:function(e,n){j(n),J(n)},renderInput:function(e){return(0,z.jsx)(u.Z,(0,t.Z)((0,t.Z)({},e),{},{label:"Enter city, state or zip",size:"small",fullWidth:!0}))},renderOption:function(e,n){return(0,z.jsx)("li",(0,t.Z)((0,t.Z)({},e),{},{children:(0,z.jsxs)(N.ZP,{container:!0,alignItems:"center",children:[(0,z.jsx)(N.ZP,{item:!0,sx:{display:"flex",width:44},children:(0,z.jsx)(D.Z,{sx:{color:"text.secondary"}})}),(0,z.jsxs)(N.ZP,{item:!0,sx:{width:"calc(100% - 44px)",wordWrap:"break-word"},children:[(0,z.jsx)(f.Z,{component:"span",sx:{fontWeight:"regular"},children:"".concat(n.name,", ").concat(n.stateCode)}),(0,z.jsx)(y.Z,{variant:"body2",color:"text.secondary",children:"".concat(n.zipCode,", ").concat(n.stateName)})]})]})}))}})}),(0,z.jsx)(f.Z,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,z.jsx)(u.Z,{id:"outlined-select-distance",select:!0,label:"Select Distance",value:M,onChange:function(e){Number.isInteger(Number(e.target.value))&&(_(Number(e.target.value)),G(!0))},size:"small",fullWidth:!0,children:Array.from({length:20},(function(e,n){return 50+50*n})).map((function(e){return(0,z.jsx)(h.Z,{value:e,children:e},e)}))})}),1===n?(0,z.jsx)(p.Z,{title:"Delete",children:(0,z.jsx)(S.Z,{children:(0,z.jsx)(F.Z,{})})}):(0,z.jsx)(p.Z,{title:"Filter list",children:!Q&&x||Q&&!x?(0,z.jsx)(S.Z,{onClick:function(){b(null),j(""),_(200),a({}),G(!1)},children:(0,z.jsx)(R.Z,{})}):(0,z.jsx)("span",{children:(0,z.jsx)(S.Z,{disabled:!x||!M,onClick:Y,children:(0,z.jsx)(L.Z,{})})})})]})}function _(){var e=o.useState(void 0),n=(0,c.Z)(e,2),a=n[0],t=n[1],r=o.useState(void 0),s=(0,c.Z)(r,2),d=s[0],l=s[1],u=o.useState([]),p=(0,c.Z)(u,2),m=p[0],h=p[1],g=o.useState(0),Z=(0,c.Z)(g,2),k=Z[0],y=Z[1],N=o.useState(15),S=(0,c.Z)(N,2),D=S[0],F=S[1],L=o.useState({}),R=(0,c.Z)(L,2),O=R[0],I=R[1],W=o.useRef(null),B=(0,i.a)({queryKey:["trucks",k,D,d,a,O],queryFn:function(){return(0,q.g7)(k,D,d,a,O)},keepPreviousData:!0}),_=B.isLoading,E=B.isFetching,K=B.data,Q=void 0===K?{items:[],total:0}:K,G=Q.items,J=Q.total,V=G||[];o.useEffect((function(){W.current&&W.current.scrollTo({top:0,left:0,behavior:"smooth"})}),[V]);return(0,z.jsxs)(f.Z,{sx:{width:"100%",height:"100%"},children:[(0,z.jsxs)(w.Z,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,z.jsx)(M,{numSelected:m.length,setQueryParams:function(e){I(e),y(0)}}),(0,z.jsx)(v.Z,{ref:W,sx:{height:"calc(100% - 115px)"},children:(0,z.jsxs)(x.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,z.jsx)(H,{numSelected:m.length,order:a,orderBy:d,onSelectAllClick:function(e){if(e.target.checked){var n=V.map((function(e){return e.id}));h(n)}else h([])},onRequestSort:function(e,n){var r=d===n&&"asc"===a;d===n&&"desc"===a?(t(void 0),l(void 0)):(t(r?"desc":"asc"),l(n))},rowCount:V.length}),(0,z.jsx)(b.Z,{children:V.map((function(e,n){var a,t=(a="".concat(e.id),-1!==m.indexOf(a)),r="enhanced-table-checkbox-".concat(n);return(0,z.jsxs)(j.Z,{hover:!0,onClick:function(n){"".concat(e.id)},role:"checkbox","aria-checked":t,tabIndex:-1,selected:t,sx:{cursor:"pointer"},children:[(0,z.jsx)(A,{padding:"checkbox",children:(0,z.jsx)(C.Z,{id:"".concat(r),sx:{m:1},fullWidth:!0,variant:"contained",size:"small",color:"primary",onClick:function(){},children:"Reserve"})}),T.map((function(n){var a=n.getData(e);return(0,z.jsx)(A,{title:a.title,align:n.numeric?"right":"center",children:a.data},n.id)}))]},e.id)}))})]})}),(0,z.jsx)(P.Z,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:J,rowsPerPage:D,page:k,onPageChange:function(e,n){y(n)},onRowsPerPageChange:function(e){F(parseInt(e.target.value,10)),y(0)}})]}),(0,z.jsx)(U.Z,{visible:_||E})]})}}}]);
//# sourceMappingURL=491.b4d511bc.chunk.js.map