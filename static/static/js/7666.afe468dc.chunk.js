"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[7666],{7666:(e,t,r)=>{r.r(t),r.d(t,{default:()=>se});var n=r(5043),i=r(3216),s=r(9781),a=r(2836),l=r(5604),o=r(4535),d=r(6596),c=r(7784),u=r(1962),h=r(7739),x=r(39),p=r(3851),m=r(6353),g=r(1081),A=r(5316),f=r(8533),j=r(9347),v=r(1906),b=r(4516),w=r(1806),k=r(3460),y=r(9650),C=r(4882),D=r(9090),S=r(8076),N=r(8093),$=r(5263),P=r(4496),F=r(1596),T=r(1045),I=r(5721),M=r(681),O=r(8968),R=r(6600),E=r(7392),_=r(141),z=r(3560),L=r(3768),H=r(1809),W=r(9397),q=r(2805),K=r(524),B=r(8612),J=r(1079),Q=r(908),U=r(6431),G=r(7166);var V=r(4836),Y=r(579);const Z=n.forwardRef((function(e,t){return(0,Y.jsx)(V.A,{direction:"up",ref:t,...e})})),X=[{id:"fullName",orderField:"fullName",getData:e=>({data:`${e.fullName}`}),numeric:!1,disablePadding:!0,label:"First\xa0name/Last\xa0name"},{id:"type",getData:e=>{const t=`${(0,U.Pw)(e)} `;let r="";return"Owner"===e.type&&(r="Owner"),"OwnerDriver"===e.type&&(r="Owner/Driver"),{data:(0,Y.jsx)("span",{children:(0,Y.jsx)("b",{children:t})}),title:r}},numeric:!1,disablePadding:!0,label:"Type"},{id:"phone",getData:e=>{const t=`${e.phone}`,r=`${e.phone2?e.phone2:""}`;return{data:(0,Y.jsxs)("span",{children:[(0,Y.jsx)("a",{href:`tel:${t}`,target:"_blank",onClick:G.d,children:t}),(0,Y.jsx)("br",{}),(0,Y.jsx)("a",{href:r?`tel:${r}`:void 0,target:"_blank",onClick:G.d,children:r||"\xa0"})]}),title:t+"\n"+r}},numeric:!1,disablePadding:!0,label:"Mobile\xa0phone"},{id:"email",getData:e=>{const t=`${e.email}`;return{data:(0,Y.jsx)("span",{children:(0,Y.jsx)("a",{href:`mailto:${t}`,target:"_blank",onClick:G.d,children:t})}),title:t}},numeric:!1,disablePadding:!0,label:"Email"},{id:"address",getData:e=>{const t=`${e.address}`;return{data:(0,Y.jsx)("span",{children:t}),title:t}},numeric:!1,disablePadding:!0,label:"Home\xa0address"},{id:"ownTrucks",getData:e=>{if(e.ownTrucks&&e.ownTrucks.length){const t=e.ownTrucks;return{data:(0,Y.jsx)("span",{children:t.map(((e,r)=>(0,Y.jsx)("a",{href:`/trucks/view/${e.id}`,target:"_blank",onClick:G.d,children:`${e.truckNumber}${r===t.length-1?"":", "}`},r)))}),title:t.map((e=>e.truckNumber)).join(", "),elementsCount:t.length}}return{data:""}},numeric:!1,disablePadding:!0,openInDialog:!0,label:"OWN\xa0TRUCKS"},{id:"driversCoordinators",getData:e=>{if(e.coordinators||e.drivers){var t,r;const n=new Map;null===(t=e.coordinators)||void 0===t||t.forEach((e=>n.set(e.id,{id:e.id,fullName:e.fullName,type:e.type}))),null===(r=e.drivers)||void 0===r||r.forEach((e=>!n.has(e.id)&&n.set(e.id,{id:e.id,fullName:e.fullName,type:e.type})));const i=Array.from(n.values());return{data:(0,Y.jsx)("span",{children:i.map(((e,t)=>(0,Y.jsx)("a",{href:`./${(0,U.Yn)(e)}/view/${e.id}`,target:"_blank",onClick:G.d,children:`${e.fullName} ${(0,U.Pw)(e)} ${t===i.length-1?"":", "}`},e.id)))}),title:i.map((e=>`${e.fullName} ${(0,U.Pw)(e)}`)).join(", "),elementsCount:i.length}}return{data:""}},numeric:!1,disablePadding:!0,openInDialog:!0,label:"Drivers/Coordinators"}],ee=(0,o.Ay)(C.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),te=(0,o.Ay)(x.A)((()=>({maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})));function re(e){const{onSelectAllClick:t,order:r,orderBy:n,numSelected:i,rowCount:s,onRequestSort:a}=e;return(0,Y.jsx)(ee,{children:(0,Y.jsxs)(S.A,{children:[(0,Y.jsx)(te,{padding:"checkbox",children:(0,Y.jsx)(u.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:i>0&&i<s,checked:s>0&&i===s,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),X.map((e=>{return(0,Y.jsx)(te,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:n===e.id&&r,children:(0,Y.jsxs)(N.A,{active:e.orderField&&n===e.orderField,hideSortIcon:!e.orderField,direction:n===e.orderField?r:"asc",onClick:e.orderField?(t=e.orderField,e=>{a(e,t)}):()=>{},children:[e.label,e.orderField&&n===e.orderField?(0,Y.jsx)(b.A,{component:"span",sx:K.A,children:"desc"===r?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function ne(e){const{selected:t,setQueryParams:r}=e,[l,o]=n.useState(!1),[u,x]=n.useState(""),[A,f]=n.useState(0),[j,v]=n.useState(!1),w=(0,i.zy)(),k=(0,i.Zp)(),y=(0,s.jE)(),C=(0,Q.dh)(),{mutate:D,isLoading:S}=(0,a.n)(J.Jx,{onSuccess:()=>{C({severity:"success",message:"Deleted"}),y.invalidateQueries(["owners"])},onError:e=>{C({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),N=()=>{v(!1),x(""),f(0),r({})},F=()=>{v(!1);const e={};u&&(e.fullName=u),A&&(e.truckNumber=A),r(e)},K=e=>{"Enter"===e.key&&(u||A?F():N())};return(0,Y.jsxs)($.A,{sx:{overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1},...t.length>0&&{bgcolor:e=>(0,d.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[t.length>0?(0,Y.jsxs)(P.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,Y.jsx)(P.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Owners"}),(0,Y.jsx)(b.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,Y.jsx)(c.A,{label:"First name/Last name",value:u,onChange:e=>{x(e.target.value),v(!0)},onKeyUp:K,size:"small"})}),(0,Y.jsx)(b.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,Y.jsx)(c.A,{label:"Truck Number",value:A||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(f(Number(e.target.value)),v(!0))},onKeyUp:K,size:"small"})}),(0,Y.jsx)(h.A,{title:"Filter list",children:!j&&(u||A)||j&&!u&&j&&!A?(0,Y.jsx)("span",{children:(0,Y.jsx)(E.A,{onClick:N,children:(0,Y.jsx)(W.A,{})})}):(0,Y.jsx)("span",{children:(0,Y.jsx)(E.A,{disabled:!u&&!A,onClick:F,children:(0,Y.jsx)(H.A,{})})})}),(0,Y.jsxs)(b.A,{sx:{p:1,display:"inline-flex"},children:[(0,Y.jsx)(h.A,{title:"Create",children:(0,Y.jsx)("span",{children:(0,Y.jsx)(E.A,{onClick:()=>{o(!0)},children:(0,Y.jsx)(_.A,{})})})}),(0,Y.jsx)(h.A,{title:"Edit",children:(0,Y.jsx)("span",{children:(0,Y.jsx)(E.A,{disabled:1!==t.length,onClick:()=>{k(`./edit/${t[0]}`,{relative:"path",state:{from:w},replace:!1})},children:(0,Y.jsx)(z.A,{})})})}),(0,Y.jsx)(h.A,{title:"Delete",children:(0,Y.jsx)("span",{children:(0,Y.jsx)(E.A,{disabled:1!==t.length,onClick:()=>{D(`${t[0]}`)},children:(0,Y.jsx)(L.A,{})})})})]}),(0,Y.jsxs)(g.A,{onClose:()=>{o(!1)},open:l,children:[(0,Y.jsx)(R.A,{children:"Select, what type of owner to create"}),(0,Y.jsxs)(I.A,{sx:{pt:0},children:[(0,Y.jsx)(M.Ay,{disableGutters:!0,children:(0,Y.jsxs)(O.A,{onClick:()=>{k("../owners/create",{relative:"path",state:{from:w},replace:!1})},children:[(0,Y.jsx)(p.A,{children:(0,Y.jsx)(T.A,{children:(0,Y.jsx)(q.A,{})})}),(0,Y.jsx)(m.A,{primary:"Owner"})]})},"owner"),(0,Y.jsx)(M.Ay,{disableGutters:!0,children:(0,Y.jsxs)(O.A,{onClick:()=>{k("../ownersDrivers/create",{relative:"path",state:{from:w},replace:!1})},children:[(0,Y.jsx)(p.A,{children:(0,Y.jsx)(T.A,{children:(0,Y.jsx)(q.A,{})})}),(0,Y.jsx)(m.A,{primary:"Owner-Driver"})]})},"ownerDriver")]})]}),(0,Y.jsx)(B.A,{visible:S})]})}const ie=e=>{let{row:t,cell:r,setDialogData:i}=e;const s=r.getData(t),a=n.useRef(null);return(0,Y.jsx)(te,{ref:a,title:s.title,align:r.numeric?"right":"center",onClickCapture:e=>{if(!r.openInDialog)return;if(s.elementsCount&&s.elementsCount<2)return;const t=a.current;t&&function(e){let{clientWidth:t,clientHeight:r,scrollWidth:n,scrollHeight:i}=e;return i>r||n>t}(t)&&(e.preventDefault(),(0,G.d)(e),i(s.data))},children:s.data},r.id)};function se(){const[e,t]=n.useState(void 0),[r,s]=n.useState("asc"),[a,o]=n.useState("fullName"),[d,c]=n.useState([]),[h,x]=n.useState(0),[p,m]=n.useState(15),[C,N]=n.useState({}),$=n.useRef(null),P=(0,i.zy)(),T=(0,i.Zp)(),I=(0,Q.dh)(),{isLoading:M,isFetching:O,error:R,data:{items:E,total:_}={items:[],total:0}}=(0,l.I)({queryKey:["owners",h,p,a,r,C],queryFn:J.Dc,keepPreviousData:!0,retry:!1});n.useEffect((()=>{R&&I({severity:"error",message:R instanceof Error?R.message:JSON.stringify(R)})}),[R]);const z=E||[];n.useEffect((()=>{if($.current){$.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[z]),n.useEffect((()=>{const e=[];d.forEach((t=>{z.find((e=>e.id===t))&&e.push(t)})),c(e)}),[z]);const L=()=>{t(void 0)};return(0,Y.jsxs)(b.A,{sx:{width:"100%",height:"100%"},children:[(0,Y.jsxs)(F.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,Y.jsx)(ne,{selected:d,setQueryParams:e=>{N(e),x(0)}}),(0,Y.jsx)(y.A,{ref:$,sx:{height:"calc(100% - 115px)"},children:(0,Y.jsxs)(w.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,Y.jsx)(re,{numSelected:d.length,order:r,orderBy:a,onSelectAllClick:e=>{if(e.target.checked){const e=z.map((e=>e.id));c(e)}else c([])},onRequestSort:(e,t)=>{const n=a===t&&"asc"===r;a===t&&"desc"===r?(s(void 0),o(void 0)):(s(n?"desc":"asc"),o(t))},rowCount:z.length}),(0,Y.jsx)(k.A,{children:z.map(((e,r)=>{const n=(i=`${e.id}`,-1!==d.indexOf(i));var i;const s=`enhanced-table-checkbox-${r}`;return(0,Y.jsxs)(S.A,{hover:!0,onDoubleClick:t=>{return r=e,void T(`../${(0,U.Yn)(r)}/view/${r.id}`,{relative:"path",state:{from:P},replace:!1});var r},role:"checkbox","aria-checked":n,tabIndex:-1,selected:n,sx:{cursor:"pointer"},children:[(0,Y.jsx)(te,{padding:"checkbox",children:(0,Y.jsx)(u.A,{id:`${s}`,color:"primary",checked:n,inputProps:{"aria-labelledby":s},onClick:t=>((e,t)=>{e.stopPropagation();const r=d.indexOf(t);let n=[];-1===r?n=n.concat(d,t):0===r?n=n.concat(d.slice(1)):r===d.length-1?n=n.concat(d.slice(0,-1)):r>0&&(n=n.concat(d.slice(0,r),d.slice(r+1))),c(n)})(t,`${e.id}`)})}),X.map((r=>(0,Y.jsx)(ie,{row:e,cell:r,setDialogData:t},r.id)))]},e.id)}))})]})}),(0,Y.jsx)(D.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:_,rowsPerPage:p,page:h,onPageChange:(e,t)=>{x(t)},onRowsPerPageChange:e=>{m(parseInt(e.target.value,10)),x(0)}})]}),(0,Y.jsxs)(g.A,{open:!!e,TransitionComponent:Z,keepMounted:!0,onClose:L,"aria-describedby":"alert-dialog-slide-description",children:[(0,Y.jsx)(A.A,{children:(0,Y.jsx)(f.A,{id:"dialog-content",sx:{span:{display:"grid"}},children:e})}),(0,Y.jsx)(j.A,{children:(0,Y.jsx)(v.A,{onClick:L,children:"Close"})})]}),(0,Y.jsx)(B.A,{visible:M||O})]})}},3768:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(9662),i=r(579);const s=(0,n.A)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},3560:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(9662),i=r(579);const s=(0,n.A)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},8533:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(5043),i=r(8387),s=r(8610),a=r(1475),l=r(4535),o=r(8206),d=r(4496),c=r(2532),u=r(2372);function h(e){return(0,u.Ay)("MuiDialogContentText",e)}(0,c.A)("MuiDialogContentText",["root"]);var x=r(579);const p=(0,l.Ay)(d.A,{shouldForwardProp:e=>(0,a.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),m=n.forwardRef((function(e,t){const r=(0,o.b)({props:e,name:"MuiDialogContentText"}),{children:n,className:a,...l}=r,d=(e=>{const{classes:t}=e,r=(0,s.A)({root:["root"]},h,t);return{...t,...r}})(l);return(0,x.jsx)(p,{component:"p",variant:"body1",color:"textSecondary",ref:t,ownerState:l,className:(0,i.A)(d.root,a),...r,classes:d})}))},6600:(e,t,r)=>{r.d(t,{A:()=>x});var n=r(5043),i=r(8387),s=r(8610),a=r(4496),l=r(4535),o=r(8206),d=r(7034),c=r(2563),u=r(579);const h=(0,l.Ay)(a.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),x=n.forwardRef((function(e,t){const r=(0,o.b)({props:e,name:"MuiDialogTitle"}),{className:a,id:l,...x}=r,p=r,m=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},d.t,t)})(p),{titleId:g=l}=n.useContext(c.A);return(0,u.jsx)(h,{component:"h2",className:(0,i.A)(m.root,a),ownerState:p,ref:t,variant:"h6",id:l??g,...x})}))},3851:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(5043),i=r(8387),s=r(8610),a=r(1347),l=r(4535),o=r(8206),d=r(2532),c=r(2372);function u(e){return(0,c.Ay)("MuiListItemAvatar",e)}(0,d.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var h=r(579);const x=(0,l.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),p=n.forwardRef((function(e,t){const r=(0,o.b)({props:e,name:"MuiListItemAvatar"}),{className:l,...d}=r,c=n.useContext(a.A),p={...r,alignItems:c.alignItems},m=(e=>{const{alignItems:t,classes:r}=e,n={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,s.A)(n,u,r)})(p);return(0,h.jsx)(x,{className:(0,i.A)(m.root,l),ownerState:p,ref:t,...d})}))}}]);
//# sourceMappingURL=7666.afe468dc.chunk.js.map