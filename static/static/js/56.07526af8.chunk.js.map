{"version":3,"file":"static/js/56.07526af8.chunk.js","mappings":"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","sources":["GoogleMaps/map.tsx","api/api.ts"],"sourcesContent":["import * as React from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport Snackbar from '@mui/material/Snackbar';\nimport MuiAlert from '@mui/material/Alert';\nimport Slide from '@mui/material/Slide';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport Button from '@mui/material/Button';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport Box from '@mui/material/Box';\nimport { TransitionProps } from '@mui/material/transitions';\nimport { Wrapper, Status } from '@googlemaps/react-wrapper';\nimport { MarkerClusterer as MarkerClustererClass } from '@googlemaps/markerclusterer';\nimport Loader from '../components/Loader';\nimport { TrucksQuery } from '../api';\nimport { Truck } from '../utils/dataTypes';\n\nconst center = { lat: 39.828922654821866, lng: -98.57947970000001 };\nconst zoom = 5;\n\nconst Transition = React.forwardRef(function Transition(\n  props: TransitionProps & {\n    children: React.ReactElement<any, any>;\n  },\n  ref: React.Ref<unknown>,\n) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function GeneralMap() {\n  const [selectedTruck, setSelectedTruck] = React.useState<Truck | null>(null);\n\n  const {\n    isLoading,\n    isFetching,\n    data: { items } = { items: [] },\n  } = useQuery({\n    queryKey: ['trucksMap'],\n    queryFn: () => TrucksQuery(0, 25000),\n    keepPreviousData: true,\n  });\n  const rows: Truck[] = items || [];\n\n  const handleClickOpen = (truckId: string) => {\n    setSelectedTruck(rows.find((truck) => truck.id === truckId) || null);\n  };\n\n  const handleDialogClose = () => {\n    setSelectedTruck(null);\n  };\n\n  return (\n    <>\n      <Box\n        component=\"main\"\n        sx={{ flexGrow: 1, p: 1, height: '100%', width: '100%' }}\n      >\n        <Wrapper\n          apiKey={'AIzaSyCXHo65x6xwfIPmz5GAZ2B2laVghupH7Dg'}\n          render={render}\n        >\n          <Map center={center} zoom={zoom}>\n            <MarkerClusterer>\n              {rows\n                .filter((truck) => truck.lastLocation)\n                .map((truck) => {\n                  return (\n                    <Marker\n                      key={truck.id}\n                      onCLick={() => handleClickOpen(truck.id)}\n                      optimized\n                      animation={\n                        window.google.maps.Animation &&\n                        window.google.maps.Animation.DROP\n                      }\n                      title={`${truck.truckNumber}\\n${truck.status}`}\n                      position={{\n                        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                        // @ts-ignore\n                        lat: truck.lastLocation[0],\n                        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                        // @ts-ignore\n                        lng: truck.lastLocation[1],\n                      }}\n                    />\n                  );\n                })}\n            </MarkerClusterer>\n          </Map>\n        </Wrapper>\n      </Box>\n      <Dialog\n        open={!!selectedTruck}\n        TransitionComponent={Transition}\n        keepMounted\n        onClose={handleDialogClose}\n        aria-describedby=\"alert-dialog-slide-description\"\n      >\n        <DialogTitle>{`TRUCK NUMBER: ${selectedTruck?.truckNumber}`}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-slide-description\">\n            {`CURRENT STATUS: ${selectedTruck?.status}`}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleDialogClose}>Close</Button>\n        </DialogActions>\n      </Dialog>\n      <Loader visible={isLoading || isFetching} />\n    </>\n  );\n}\n\nconst render = (status: Status): React.ReactElement => {\n  return (\n    <>\n      <Snackbar\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        open={status === Status.FAILURE}\n        TransitionComponent={Transition}\n      >\n        <MuiAlert\n          elevation={6}\n          variant=\"filled\"\n          severity=\"error\"\n          sx={{ width: '100%' }}\n        >\n          {'Error loading maps!'}\n        </MuiAlert>\n      </Snackbar>\n      <Loader visible={status === Status.LOADING} />\n    </>\n  );\n};\n\nfunction Map({\n  center,\n  zoom,\n  children,\n}: {\n  center: google.maps.LatLngLiteral;\n  zoom: number;\n  children?: React.ReactNode;\n}) {\n  const mapRef = React.useRef(null);\n  const [map, setMap] = React.useState<google.maps.Map>();\n\n  React.useEffect(() => {\n    if (mapRef.current && !map) {\n      setMap(\n        new window.google.maps.Map(mapRef.current, {\n          center,\n          zoom,\n        }),\n      );\n    }\n  }, [mapRef, map]);\n\n  const child = React.Children.only(children);\n\n  return (\n    <>\n      <div style={{ height: '100%', width: '100%' }} ref={mapRef} id=\"map\" />\n      {React.isValidElement(child) &&\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        React.cloneElement(child, { map })}\n    </>\n  );\n}\n\nfunction MarkerClusterer({\n  map,\n  children,\n}: {\n  map?: google.maps.Map;\n  children?: React.ReactNode;\n}) {\n  const [clusterer, setClasterer] = React.useState<MarkerClustererClass>();\n\n  React.useEffect(() => {\n    if (!clusterer) {\n      setClasterer(new MarkerClustererClass({}));\n    }\n\n    return () => {\n      if (clusterer) {\n        clusterer.setMap(null);\n      }\n    };\n  }, [clusterer]);\n\n  React.useEffect(() => {\n    if (clusterer && map) {\n      clusterer.setMap(map);\n    }\n  }, [map]);\n\n  React.useEffect(() => {\n    if (clusterer) {\n      clusterer.render();\n    }\n  }, [map, children]);\n  clusterer?.render();\n\n  return (\n    <>\n      {React.Children.map(children, (child) => {\n        if (React.isValidElement(child)) {\n          // set the map prop on the child component\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          return React.cloneElement(child, { map, clusterer });\n        }\n      })}\n    </>\n  );\n}\n\nconst Marker: React.FC<\n  google.maps.MarkerOptions & {\n    onCLick: () => void;\n    clusterer?: MarkerClustererClass;\n  }\n> = (options) => {\n  const { onCLick, clusterer, map, position, ...otherMarkerOptions } = options;\n  const [marker, setMarker] = React.useState<google.maps.Marker>();\n\n  React.useEffect(() => {\n    if (!marker) {\n      const newMarker = new window.google.maps.Marker();\n      setMarker(newMarker);\n      newMarker.addListener('click', onCLick);\n    }\n\n    return () => {\n      if (marker) {\n        marker.setMap(null);\n        clusterer?.removeMarker(marker, false);\n      }\n    };\n  }, [marker]);\n\n  React.useEffect(() => {\n    if (marker) {\n      marker.setMap(map || null);\n    }\n  }, [marker, map]);\n\n  React.useEffect(() => {\n    if (marker) {\n      marker.setPosition(position);\n    }\n  }, [marker, position && `${position?.lat},${position?.lng}`]);\n\n  React.useEffect(() => {\n    if (marker) {\n      clusterer?.addMarker(marker, false);\n    }\n  }, [marker, clusterer]);\n\n  React.useEffect(() => {\n    if (marker) {\n      marker.setOptions(otherMarkerOptions);\n    }\n  }, [marker, otherMarkerOptions]);\n\n  return null;\n};\n","import { authProvider } from '../utils/auth';\n\nconst { origin } = new URL(window.location.href);\n\nexport type Order = 'asc' | 'desc';\n\nexport const authFetch: (input: string | URL) => Promise<Response> = (\n  input,\n) => {\n  const init = { headers: new Headers() };\n  init.headers.set(\n    'Authorization',\n    'Basic ' +\n      btoa(authProvider.user?.username + ':' + authProvider.user?.password),\n  );\n  return fetch(input, init);\n};\n\nexport const TrucksQuery = (\n  page: number,\n  rowsPerPage: number,\n  orderBy?: string,\n  order?: Order,\n  queryParams?: {\n    truckNumber?: number;\n    lastLocation?: string;\n    distance?: string;\n  },\n) => {\n  const url = new URL('/truck', origin);\n  url.searchParams.append('limit', `${rowsPerPage}`);\n  url.searchParams.append('offset', `${rowsPerPage * page}`);\n  if (orderBy && order) {\n    url.searchParams.append('orderby', `${orderBy}`);\n    url.searchParams.append('direction', `${order}`);\n  }\n  if (queryParams?.truckNumber) {\n    url.searchParams.append('truckNumber', `${queryParams.truckNumber}`);\n  }\n  if (queryParams?.lastLocation && queryParams?.distance) {\n    url.searchParams.append('lastLocation', `${queryParams.lastLocation}`);\n    url.searchParams.append('distance', `${queryParams.distance}`);\n  }\n  return authFetch(url).then((res) => res.json());\n};\n\nexport const LocationsQuery = (\n  page: number,\n  rowsPerPage: number,\n  orderBy?: string,\n  order?: Order,\n  queryParams?: { search?: string; name?: string },\n) => {\n  const url = new URL('/location', origin);\n  url.searchParams.append('limit', `${rowsPerPage}`);\n  url.searchParams.append('offset', `${rowsPerPage * page}`);\n  if (orderBy && order) {\n    url.searchParams.append('orderby', `${orderBy}`);\n    url.searchParams.append('direction', `${order}`);\n  }\n  if (queryParams?.search) {\n    url.searchParams.append('search', `${queryParams.search}`);\n  }\n  if (queryParams?.name) {\n    url.searchParams.append('name', `${queryParams.name}`);\n  }\n  return authFetch(url).then((res) => res.json());\n};\n\nexport const LoadsQuery = (\n  page: number,\n  rowsPerPage: number,\n  orderBy?: string,\n  order?: Order,\n  queryParams?: { loadNumber?: number; truckNumber?: number },\n) => {\n  const url = new URL('/load', origin);\n  url.searchParams.append('limit', `${rowsPerPage}`);\n  url.searchParams.append('offset', `${rowsPerPage * page}`);\n  if (orderBy && order) {\n    url.searchParams.append('orderby', `${orderBy}`);\n    url.searchParams.append('direction', `${order}`);\n  }\n  if (queryParams?.loadNumber) {\n    url.searchParams.append('loadNumber', `${queryParams.loadNumber}`);\n  }\n  if (queryParams?.truckNumber) {\n    url.searchParams.append('truckNumber', `${queryParams.truckNumber}`);\n  }\n  return authFetch(url).then((res) => res.json());\n};\n\nexport const OwnersQuery = (\n  page: number,\n  rowsPerPage: number,\n  orderBy?: string,\n  order?: Order,\n  queryParams?: { fullName?: number; truckNumber?: number },\n) => {\n  const url = new URL('/owner', origin);\n  url.searchParams.append('limit', `${rowsPerPage}`);\n  url.searchParams.append('offset', `${rowsPerPage * page}`);\n  if (orderBy && order) {\n    url.searchParams.append('orderby', `${orderBy}`);\n    url.searchParams.append('direction', `${order}`);\n  }\n  if (queryParams?.fullName) {\n    url.searchParams.append('fullName', `${queryParams.fullName}`);\n  }\n  if (queryParams?.truckNumber) {\n    url.searchParams.append('truckNumber', `${queryParams.truckNumber}`);\n  }\n  return authFetch(url).then((res) => res.json());\n};\n\nexport const DriversQuery = (\n  page: number,\n  rowsPerPage: number,\n  orderBy?: string,\n  order?: Order,\n  queryParams?: { fullName?: number; truckNumber?: number },\n) => {\n  const url = new URL('/driver', origin);\n  url.searchParams.append('limit', `${rowsPerPage}`);\n  url.searchParams.append('offset', `${rowsPerPage * page}`);\n  if (orderBy && order) {\n    url.searchParams.append('orderby', `${orderBy}`);\n    url.searchParams.append('direction', `${order}`);\n  }\n  if (queryParams?.fullName) {\n    url.searchParams.append('fullName', `${queryParams.fullName}`);\n  }\n  if (queryParams?.truckNumber) {\n    url.searchParams.append('truckNumber', `${queryParams.truckNumber}`);\n  }\n  return authFetch(url).then((res) => res.json());\n};\n\nexport const CoordinatorsQuery = (\n  page: number,\n  rowsPerPage: number,\n  orderBy?: string,\n  order?: Order,\n  queryParams?: { fullName?: number; truckNumber?: number },\n) => {\n  const url = new URL('/coordinator', origin);\n  url.searchParams.append('limit', `${rowsPerPage}`);\n  url.searchParams.append('offset', `${rowsPerPage * page}`);\n  if (orderBy && order) {\n    url.searchParams.append('orderby', `${orderBy}`);\n    url.searchParams.append('direction', `${order}`);\n  }\n  if (queryParams?.fullName) {\n    url.searchParams.append('fullName', `${queryParams.fullName}`);\n  }\n  if (queryParams?.truckNumber) {\n    url.searchParams.append('truckNumber', `${queryParams.truckNumber}`);\n  }\n  return authFetch(url).then((res) => res.json());\n};\n\nexport const UsersQuery = (\n  page: number,\n  rowsPerPage: number,\n  orderBy?: string,\n  order?: Order,\n  queryParams?: { fullName?: number },\n) => {\n  const url = new URL('/user', origin);\n  url.searchParams.append('limit', `${rowsPerPage}`);\n  url.searchParams.append('offset', `${rowsPerPage * page}`);\n  if (orderBy && order) {\n    url.searchParams.append('orderby', `${orderBy}`);\n    url.searchParams.append('direction', `${order}`);\n  }\n  if (queryParams?.fullName) {\n    url.searchParams.append('fullName', `${queryParams.fullName}`);\n  }\n  return authFetch(url).then((res) => res.json());\n};\n"],"names":["center","lat","lng","zoom","Transition","React","props","ref","_jsx","Slide","_objectSpread","direction","GeneralMap","_React$useState","_React$useState2","_slicedToArray","selectedTruck","setSelectedTruck","_useQuery","useQuery","queryKey","queryFn","TrucksQuery","keepPreviousData","isLoading","isFetching","_useQuery$data","data","rows","items","handleDialogClose","_jsxs","_Fragment","children","Box","component","sx","flexGrow","p","height","width","Wrapper","apiKey","render","Map","MarkerClusterer","filter","truck","lastLocation","map","Marker","onCLick","truckId","id","find","optimized","animation","window","google","maps","Animation","DROP","title","concat","truckNumber","status","position","Dialog","open","TransitionComponent","keepMounted","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","onClick","Loader","visible","Snackbar","anchorOrigin","vertical","horizontal","Status","FAILURE","MuiAlert","elevation","variant","severity","LOADING","_ref","mapRef","_React$useState3","_React$useState4","setMap","current","child","only","style","_ref2","_React$useState5","_React$useState6","clusterer","setClasterer","MarkerClustererClass","options","otherMarkerOptions","_objectWithoutProperties","_excluded","_React$useState7","_React$useState8","marker","setMarker","newMarker","addListener","removeMarker","setPosition","addMarker","setOptions","origin","URL","location","href","authFetch","input","_authProvider$user","_authProvider$user2","init","headers","Headers","set","btoa","authProvider","user","username","password","fetch","page","rowsPerPage","orderBy","order","queryParams","url","searchParams","append","distance","then","res","json","LocationsQuery","search","name","LoadsQuery","loadNumber","OwnersQuery","fullName","DriversQuery","CoordinatorsQuery","UsersQuery"],"sourceRoot":""}