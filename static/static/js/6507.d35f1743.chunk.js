"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[6507],{8807:(e,t,l)=>{l.d(t,{A:()=>v});var i=l(5043),n=l(5563),r=l(950),a=l(4944),s=l(9129),o=l(7392),d=l(7166),c=l(6910),u=l(4133),h=l(5552),p=l(579);function v(e){let{location:t,onRefClick:l,addInfo:v,children:m}=e;const[x,g]=i.useState(null),[f,b]=i.useState([]),[A,j]=i.useState(null),k=i.useMemo((()=>(0,r.A)((e=>{((null===A||void 0===A?void 0:A.geocode(e))||Promise.reject()).then((t=>{if(t.results.length<1&&e.location){const t=new google.maps.LatLng(e.location),l={address_components:[],formatted_address:`[${t.lat()}, ${t.lng()}]`,geometry:{location:t,location_type:google.maps.GeocoderLocationType.APPROXIMATE,viewport:new google.maps.LatLngBounds},place_id:`[${t.lat()}, ${t.lng()}]`,types:[]};b([l])}else t.results.forEach((e=>e.formatted_address=(0,s.s)(e.address_components))),b(t.results)})).catch((()=>{b([])}))}),400)),[A]);i.useEffect((()=>{const e=t&&(0,u.U)(f);t&&e&&(null===e||void 0===e?void 0:e.place_id)!==(null===x||void 0===x?void 0:x.place_id)&&g(e)}),[t,f]),i.useEffect((()=>{t?k({location:{lat:t[0],lng:t[1]}}):(b([]),g(null))}),[A,t.join(",")]);return(0,p.jsxs)("span",{style:{display:"flex"},children:[(0,p.jsx)(n.Wrapper,{...(0,h.iz)(),render:e=>{const t=(0,a.dh)(),[,l]=(0,a.pn)();return i.useLayoutEffect((()=>(e===n.Status.LOADING&&l(!0),e===n.Status.FAILURE&&t({severity:"error",message:"Error loading maps!"}),e===n.Status.SUCCESS&&j(new window.google.maps.Geocoder),()=>{e===n.Status.LOADING&&l(!1)})),[e]),null}}),(0,p.jsxs)("span",{style:{textOverflow:"ellipsis",overflow:"hidden",textAlign:"left"},title:`${x?x.formatted_address:""}\n`+v,children:[l?(0,p.jsx)("a",{href:"#",target:"_blank",onClick:l,children:x?x.formatted_address:""}):x?x.formatted_address:"",v?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("br",{}),v]}):null,m]}),x?(0,p.jsx)(o.A,{size:"small",onClick:e=>{(0,d.d)(e),navigator.clipboard.writeText(x.formatted_address)},children:(0,p.jsx)(c.A,{sx:{height:"16px",width:"16px"}})}):null]})}},6507:(e,t,l)=>{l.r(t),l.d(t,{default:()=>V});var i=l(5043),n=l(3216),r=l(9781),a=l(2836),s=l(5604),o=l(4535),d=l(1546),c=l(7784),u=l(1962),h=l(7739),p=l(39),v=l(6353),m=l(2143),x=l(7353),g=l(1806),f=l(3460),b=l(9650),A=l(4882),j=l(9090),k=l(8076),y=l(8093),S=l(5263),C=l(4496),E=l(1596),P=l(7392),F=l(141),N=l(3560),T=l(3768),w=l(1809),D=l(9397),R=l(524),$=l(8612),O=l(1079),I=l(4944),L=l(8833),_=l(7166),z=l(8807),U=l(9904),M=l(7302),G=l(579);const H=[{id:"loadNumber",orderField:"loadNumber",getData:e=>({data:`${e.loadNumber}`}),numeric:!0,disablePadding:!1,label:"Load\xa0Number"},{id:"ref",getData:e=>{const t=`${null!==e&&void 0!==e&&e.ref&&null!==e&&void 0!==e&&e.ref[0]?null===e||void 0===e?void 0:e.ref[0]:""}`,l=`${null!==e&&void 0!==e&&e.ref&&null!==e&&void 0!==e&&e.ref[1]?null===e||void 0===e?void 0:e.ref[1]:""}`,i=`${null!==e&&void 0!==e&&e.ref&&null!==e&&void 0!==e&&e.ref[2]?null===e||void 0===e?void 0:e.ref[2]:""}`;return{data:(0,G.jsxs)("span",{children:[t,(0,G.jsx)("br",{}),l,(0,G.jsx)("br",{}),i]}),title:t+(l?"\n"+l:"")+(i?"\n"+i:"")}},numeric:!1,disablePadding:!1,label:"REF\xa0Number"},{id:"firstPickUp",getData:e=>{var t;const l=e=>{e.preventDefault(),(0,_.d)(e)},i=null===e||void 0===e||null===(t=e.stops)||void 0===t?void 0:t.at(0),n=null===i||void 0===i?void 0:i.facility,r=null===n||void 0===n?void 0:n.facilityLocation,a=null===i||void 0===i?void 0:i.timeFrame,s=null===a||void 0===a?void 0:a.type,o="FCFS"===(null===a||void 0===a?void 0:a.type)?null===a||void 0===a?void 0:a.from:null===a||void 0===a?void 0:a.at,d="FCFS"===(null===a||void 0===a?void 0:a.type)?null===a||void 0===a?void 0:a.to:null,c=`${o?U.k.format((0,M.bb)(o)):""}`,u=`${d?U.k.format((0,M.bb)(d)):""}`,h=`${s} ${c}${u?" - "+u:""}`;return r?{data:(0,G.jsx)(z.A,{location:r,onRefClick:l,addInfo:h})}:{data:""}},numeric:!1,disablePadding:!1,label:"First\xa0PickUp"},{id:"lastDelivery",getData:e=>{var t;const l=e=>{e.preventDefault(),(0,_.d)(e)},i=null===e||void 0===e||null===(t=e.stops)||void 0===t?void 0:t.at(-1),n=null===i||void 0===i?void 0:i.facility,r=null===n||void 0===n?void 0:n.facilityLocation,a=null===i||void 0===i?void 0:i.timeFrame,s=null===a||void 0===a?void 0:a.type,o="FCFS"===(null===a||void 0===a?void 0:a.type)?null===a||void 0===a?void 0:a.to:null===a||void 0===a?void 0:a.at,d="FCFS"===(null===a||void 0===a?void 0:a.type)?null===a||void 0===a?void 0:a.to:null,c=`${o?U.k.format((0,M.bb)(o)):""}`,u=`${d?U.k.format((0,M.bb)(d)):""}`,h=`${s} ${c}${u?" - "+u:""}`;return r?{data:(0,G.jsx)(z.A,{location:r,onRefClick:l,addInfo:h})}:{data:""}},numeric:!1,disablePadding:!1,label:"Last\xa0Delivery"},{id:"miles",getData:e=>{if(null!==e&&void 0!==e&&e.milesHaversine){const t=`${e.milesByRoads?e.milesByRoads.toFixed(2):""}`,l=`${e.milesHaversine.toFixed(2)}`;return{data:(0,G.jsxs)("span",{children:[(0,G.jsx)("b",{children:t}),(0,G.jsx)("br",{}),l]}),title:t||"? - By roads\n"+l+" - Distance"}}return{data:""}},numeric:!0,disablePadding:!1,label:"Miles"},{id:"status",orderField:"status",getData:e=>{const t=`${e.status}`,l=e.stops.find((e=>e.type===L.lk.PickUp&&e.status!==L.h9.at(0)&&e.status!==L.h9.at(-1)||e.type===L.lk.Delivery&&e.status!==L.$W.at(0)&&e.status!==L.$W.at(-1))),i=`${l?null===l||void 0===l?void 0:l.status:""}`;return{data:(0,G.jsxs)("span",{children:[(0,G.jsx)("b",{children:t}),(0,G.jsx)("br",{}),i]}),title:i?t+"\n"+i:t}},numeric:!1,disablePadding:!1,label:"Load\xa0Status"},{id:"truck",getData:e=>{if(null!==e&&void 0!==e&&e.truck){const t=`./trucks/view/${e.truck.id}`,l=`${e.truck.truckNumber}`;return{data:(0,G.jsx)("span",{children:(0,G.jsx)("a",{href:t,target:"_blank",onClick:_.d,children:l})}),title:l}}return{data:""}},numeric:!0,disablePadding:!1,label:"Truck"}],B=(0,o.Ay)(A.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),W=(0,o.Ay)(p.A)((()=>({maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})));function J(e){const{onSelectAllClick:t,order:l,orderBy:i,numSelected:n,rowCount:r,onRequestSort:a}=e;return(0,G.jsx)(B,{children:(0,G.jsxs)(k.A,{children:[(0,G.jsx)(W,{padding:"checkbox",children:(0,G.jsx)(u.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:n>0&&n<r,checked:r>0&&n===r,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),H.map((e=>{return(0,G.jsx)(W,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:i===e.id&&l,children:(0,G.jsxs)(y.A,{active:e.orderField&&i===e.orderField,hideSortIcon:!e.orderField,direction:i===e.orderField?l:"asc",onClick:e.orderField?(t=e.orderField,e=>{a(e,t)}):()=>{},children:[e.label,e.orderField&&i===e.orderField?(0,G.jsx)(x.A,{component:"span",sx:R.A,children:"desc"===l?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function K(e){const{selected:t,setQueryParams:l}=e,[s,o]=i.useState(""),[p,g]=i.useState(!1),[f,b]=i.useState([...L.Jf]),[A,j]=i.useState(0),[k,y]=i.useState(0),[E,R]=i.useState(!1),z=(0,n.zy)(),U=(0,n.Zp)(),M=(0,r.jE)(),H=(0,I.dh)(),{mutate:B,isLoading:W}=(0,a.n)(O.Cn,{onSuccess:()=>{H({severity:"success",message:"Deleted"}),M.invalidateQueries(["loads"])},onError:e=>{H({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),J=()=>{g(!1),K()},K=()=>{f.length&&f.length!==L.Jf.length?(l((e=>({...e,status:f}))),R(!1)):(l((e=>{const{status:t,...l}=e;return{...l}})),R(!1))},V=()=>{R(!1),o(""),b([...L.Jf]),j(0),y(0),l({})},q=()=>{R(!1);const e={};s&&(e.refNumber=s),f.length&&f.length!==L.Jf.length&&(e.status=f),A&&(e.loadNumber=A),k&&(e.truckNumber=k),l(e)},Q=e=>{"Enter"===e.key&&(s||A||k?q():V())};return(0,G.jsxs)(S.A,{sx:{overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1},...t.length>0&&{bgcolor:e=>(0,d.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[t.length>0?(0,G.jsxs)(C.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,G.jsx)(C.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Loads"}),(0,G.jsx)(x.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,G.jsx)(c.A,{label:"REF Number",value:s||"",onChange:e=>{o(e.target.value),R(!0)},onKeyUp:Q,size:"small"})}),(0,G.jsx)(x.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,G.jsx)(c.A,{select:!0,SelectProps:{multiple:!0,open:p,renderValue:e=>e.join(", "),onOpen:()=>{g(!0)},onClose:J},label:"Select Status",value:f,onChange:e=>{b(e.target.value),R(!0)},onKeyUpCapture:e=>{"Enter"===e.key&&((0,_.d)(e),J())},onKeyDownCapture:e=>{"Enter"===e.key&&(0,_.d)(e)},onBlur:K,size:"small",fullWidth:!0,title:f.join(", "),children:L.Jf.map((e=>(0,G.jsxs)(m.A,{value:e,children:[(0,G.jsx)(u.A,{checked:f.indexOf(e)>-1,id:e}),(0,G.jsx)(v.A,{primary:e})]},e)))})}),(0,G.jsx)(x.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,G.jsx)(c.A,{label:"Load Number",value:A||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(j(Number(e.target.value)),R(!0))},onKeyUp:Q,size:"small"})}),(0,G.jsx)(x.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,G.jsx)(c.A,{label:"Truck Number",value:k||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(y(Number(e.target.value)),R(!0))},onKeyUp:Q,size:"small"})}),(0,G.jsx)(h.A,{title:"Filter list",children:!E&&(s||A||k||f.length&&f.length!==L.Jf.length)||E&&!s&&E&&(!f.length||f.length===L.Jf.length)&&E&&!A&&E&&!k?(0,G.jsx)("span",{children:(0,G.jsx)(P.A,{onClick:V,children:(0,G.jsx)(D.A,{})})}):(0,G.jsx)("span",{children:(0,G.jsx)(P.A,{disabled:!A&&!k,onClick:q,children:(0,G.jsx)(w.A,{})})})}),(0,G.jsxs)(x.A,{sx:{p:1,display:"inline-flex"},children:[(0,G.jsx)(h.A,{title:"Create",children:(0,G.jsx)("span",{children:(0,G.jsx)(P.A,{onClick:()=>{U("./create",{relative:"path",state:{from:z},replace:!1})},children:(0,G.jsx)(F.A,{})})})}),(0,G.jsx)(h.A,{title:"Edit",children:(0,G.jsx)("span",{children:(0,G.jsx)(P.A,{disabled:1!==t.length,onClick:()=>{U(`./edit/${t[0]}`,{relative:"path",state:{from:z},replace:!1})},children:(0,G.jsx)(N.A,{})})})}),(0,G.jsx)(h.A,{title:"Delete",children:(0,G.jsx)("span",{children:(0,G.jsx)(P.A,{disabled:1!==t.length,onClick:()=>{B(`${t[0]}`)},children:(0,G.jsx)(T.A,{})})})})]}),(0,G.jsx)($.A,{visible:W})]})}function V(){const[e,t]=i.useState("desc"),[l,r]=i.useState("loadNumber"),[a,o]=i.useState([]),[d,c]=i.useState(0),[h,p]=i.useState(15),[v,m]=i.useState({}),A=i.useRef(null),y=(0,n.zy)(),S=(0,n.Zp)(),C=(0,I.dh)(),{isLoading:P,isFetching:F,error:N,data:{items:T,total:w}={items:[],total:0}}=(0,s.I)({queryKey:["loads",d,h,l,e,v],queryFn:O.Qk,keepPreviousData:!0,retry:!1});i.useEffect((()=>{N&&C({severity:"error",message:N instanceof Error?N.message:JSON.stringify(N)})}),[N]);const D=T||[];i.useEffect((()=>{if(A.current){A.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[D]),i.useEffect((()=>{const e=[];a.forEach((t=>{D.find((e=>e.id===t))&&e.push(t)})),o(e)}),[D]);return(0,G.jsxs)(x.A,{sx:{width:"100%",height:"100%"},children:[(0,G.jsxs)(E.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,G.jsx)(K,{selected:a,setQueryParams:e=>{m(e),c(0)}}),(0,G.jsx)(b.A,{ref:A,sx:{height:"calc(100% - 115px)"},children:(0,G.jsxs)(g.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,G.jsx)(J,{numSelected:a.length,order:e,orderBy:l,onSelectAllClick:e=>{if(e.target.checked){const e=D.map((e=>e.id));o(e)}else o([])},onRequestSort:(i,n)=>{const a=l===n&&"asc"===e;l===n&&"desc"===e?(t(void 0),r(void 0)):(t(a?"desc":"asc"),r(n))},rowCount:D.length}),(0,G.jsx)(f.A,{children:D.map(((e,t)=>{const l=(i=`${e.id}`,-1!==a.indexOf(i));var i;const n=`enhanced-table-checkbox-${t}`;return(0,G.jsxs)(k.A,{hover:!0,onDoubleClick:t=>{S(`./view/${e.id}`,{relative:"path",state:{from:y},replace:!1})},role:"checkbox","aria-checked":l,tabIndex:-1,selected:l,sx:{cursor:"pointer"},children:[(0,G.jsx)(W,{padding:"checkbox",children:(0,G.jsx)(u.A,{id:`${n}`,color:"primary",checked:l,inputProps:{"aria-labelledby":n},onClick:t=>((e,t)=>{e.stopPropagation();const l=a.indexOf(t);let i=[];-1===l?i=i.concat(a,t):0===l?i=i.concat(a.slice(1)):l===a.length-1?i=i.concat(a.slice(0,-1)):l>0&&(i=i.concat(a.slice(0,l),a.slice(l+1))),o(i)})(t,`${e.id}`)})}),H.map((t=>{const l=t.getData(e);return(0,G.jsx)(W,{title:l.title,align:t.numeric?"right":"center",children:l.data},t.id)}))]},e.id)}))})]})}),(0,G.jsx)(j.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:w,rowsPerPage:h,page:d,onPageChange:(e,t)=>{c(t)},onRowsPerPageChange:e=>{p(parseInt(e.target.value,10)),c(0)}})]}),(0,G.jsx)($.A,{visible:P||F})]})}},8833:(e,t,l)=>{l.d(t,{$W:()=>p,IY:()=>s,Jf:()=>u,Ju:()=>a,Lv:()=>v,Ny:()=>m,P7:()=>g,Sr:()=>r,fo:()=>n,h9:()=>h,lk:()=>x,mW:()=>d,p5:()=>o,pI:()=>c,z5:()=>i});const i=["EN","UA","ES","RU"],n=["Admin","Super Admin"],r=["BROKER DOMESTIC","BROKER INTERNATIONAL","FREIGHT FORWARDER DOMESTIC","FREIGHT FORWARDER INTERNATIONAL","SHIPPER/CONSIGNEE DOMESTIC","SHIPPER/CONSIGNEE INTERNATIONAL","OTHER"],a=["Cargo van","Reefer van","Box truck","Box truck Reefer","Straight truck","Hotshot","Tented box"],s=["Available","Not Available","Will be available","On route"],o=["Yes","No"],d=["Hazmat","Tsa","TWIC","Tanker Endorsement"],c=["Dock height risers","Air ride","Lift gate","Keep from freezing","ICC bar","Vertical E-track","Horizontal E-track","Pallet jack","PPE","Ramps","Straps","Loads bars","Blankets","Pads","Fire extinguisher","Metal hooks","Reefer","Heater"],u=["Available","Planned","In Progress","TONU","Cancelled","Completed"],h=["New","On route to PU","On site PU","Loaded, Waiting GTG","GTG","Completed"],p=["New","On route to DEL","On site DEL","Unloaded, Waiting GTG","GTG","Completed"],v=["LBS","KG","TON"],m=["FT","IN","M","CM"];let x=function(e){return e.PickUp="PickUp",e.Delivery="Delivery",e}({}),g=function(e){return e.FCFS="FCFS",e.APPT="APPT",e.ASAP="ASAP",e.Direct="Direct",e}({})},9904:(e,t,l)=>{l.d(t,{k:()=>i});const i=Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0})},6910:(e,t,l)=>{l.d(t,{A:()=>r});var i=l(9662),n=l(579);const r=(0,i.A)((0,n.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy")},3768:(e,t,l)=>{l.d(t,{A:()=>r});var i=l(9662),n=l(579);const r=(0,i.A)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},3560:(e,t,l)=>{l.d(t,{A:()=>r});var i=l(9662),n=l(579);const r=(0,i.A)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=6507.d35f1743.chunk.js.map