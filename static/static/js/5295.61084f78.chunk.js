"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[5295],{5295:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Y});var s=r(5043),n=r(3216),i=r(9781),a=r(2836),o=r(5604),l=r(4535),c=r(310),d=r(7784),u=r(1962),h=r(7739),p=r(2420),x=r(3851),m=r(6353),g=r(3462),v=r(6446),A=r(1806),b=r(3460),j=r(9650),f=r(4882),k=r(9090),y=r(8076),C=r(8093),S=r(5263),R=r(5865),w=r(3336),M=r(1045),O=r(5721),D=r(681),E=r(8968),N=r(6600),P=r(7392),F=r(2505),I=r(5540),T=r(3471),L=r(8242),_=r(1833),z=r(532),U=r(2088),q=r(8612),B=r(1079),G=r(9056),H=r(6431),K=r(7166),Q=r(579);const W=[{id:"fullName",orderField:"fullName",getData:e=>({data:"".concat(e.fullName)}),numeric:!1,disablePadding:!0,label:"First\xa0name/Last\xa0name"},{id:"type",getData:e=>{const t="".concat((0,H.Pw)(e)," ");let r="";return"Coordinator"===e.type&&(r="Coordinator"),"CoordinatorDriver"===e.type&&(r="Coordinator/Driver"),{data:(0,Q.jsx)("span",{children:(0,Q.jsx)("b",{children:t})}),title:r}},numeric:!1,disablePadding:!0,label:"Type"},{id:"phone",getData:e=>{const t="".concat(e.phone),r="".concat(e.phone2?e.phone2:"");return{data:(0,Q.jsxs)("span",{children:[(0,Q.jsx)("a",{href:"tel:".concat(t),target:"_blank",onClick:K.d,children:t}),(0,Q.jsx)("br",{}),(0,Q.jsx)("a",{href:r?"tel:".concat(r):void 0,target:"_blank",onClick:K.d,children:r||"\xa0"})]}),title:t+"\n"+r}},numeric:!1,disablePadding:!0,label:"Mobile\xa0phone"},{id:"email",getData:e=>{const t="".concat(e.email);return{data:(0,Q.jsx)("span",{children:(0,Q.jsx)("a",{href:"mailto:".concat(t),target:"_blank",onClick:K.d,children:t})}),title:t}},numeric:!1,disablePadding:!0,label:"Email"},{id:"address",getData:e=>{const t="".concat(e.address);return{data:(0,Q.jsx)("span",{children:t}),title:t}},numeric:!1,disablePadding:!0,label:"Home\xa0address"},{id:"coordinateTrucks",getData:e=>{if(e.coordinateTrucks&&e.coordinateTrucks.length){const t=e.coordinateTrucks;return{data:(0,Q.jsx)("span",{children:t.map(((e,r)=>(0,Q.jsx)("a",{href:"/trucks/view/".concat(e.id),target:"_blank",onClick:K.d,children:"".concat(e.truckNumber).concat(r===t.length-1?"":", ")},r)))}),title:t.map((e=>e.truckNumber)).join(", ")}}return{data:""}},numeric:!1,disablePadding:!0,label:"COORDINATE\xa0TRUCKS"}],J=(0,l.Ay)(f.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),V=(0,l.Ay)(p.A)((e=>{let{theme:t}=e;return{maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}));function Z(e){const{onSelectAllClick:t,order:r,orderBy:s,numSelected:n,rowCount:i,onRequestSort:a}=e;return(0,Q.jsx)(J,{children:(0,Q.jsxs)(y.A,{children:[(0,Q.jsx)(V,{padding:"checkbox",children:(0,Q.jsx)(u.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:n>0&&n<i,checked:i>0&&n===i,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),W.map((e=>{return(0,Q.jsx)(V,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:s===e.id&&r,children:(0,Q.jsxs)(C.A,{active:e.orderField&&s===e.orderField,hideSortIcon:!e.orderField,direction:s===e.orderField?r:"asc",onClick:e.orderField?(t=e.orderField,e=>{a(e,t)}):()=>{},children:[e.label,e.orderField&&s===e.orderField?(0,Q.jsx)(v.A,{component:"span",sx:U.A,children:"desc"===r?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function X(e){const{selected:t,setQueryParams:r}=e,[o,l]=s.useState(!1),[u,p]=s.useState(""),[A,b]=s.useState(0),[j,f]=s.useState(!1),k=(0,n.zy)(),y=(0,n.Zp)(),C=(0,i.jE)(),w=(0,G.dh)(),{mutate:U,isLoading:H}=(0,a.n)(B.Oh,{onSuccess:()=>{w({severity:"success",message:"Deleted"}),C.invalidateQueries(["coordinators"])},onError:e=>{w({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),K=()=>{f(!1),p(""),b(0),r({})},W=()=>{f(!1);const e={};u&&(e.fullName=u),A&&(e.truckNumber=A),r(e)},J=e=>{"Enter"===e.key&&(u||A?W():K())};return(0,Q.jsxs)(S.A,{sx:{overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1},...t.length>0&&{bgcolor:e=>(0,c.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[t.length>0?(0,Q.jsxs)(R.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,Q.jsx)(R.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Coordinators"}),(0,Q.jsx)(v.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,Q.jsx)(d.A,{label:"First name/Last name",value:u,onChange:e=>{p(e.target.value),f(!0)},onKeyUp:J,size:"small"})}),(0,Q.jsx)(v.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,Q.jsx)(d.A,{label:"Truck Number",value:A||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(b(Number(e.target.value)),f(!0))},onKeyUp:J,size:"small"})}),(0,Q.jsx)(h.A,{title:"Filter list",children:!j&&(u||A)||j&&!u&&j&&!A?(0,Q.jsx)("span",{children:(0,Q.jsx)(P.A,{onClick:K,children:(0,Q.jsx)(_.A,{})})}):(0,Q.jsx)("span",{children:(0,Q.jsx)(P.A,{disabled:!u&&!A,onClick:W,children:(0,Q.jsx)(L.A,{})})})}),(0,Q.jsxs)(v.A,{sx:{p:1,display:"inline-flex"},children:[(0,Q.jsx)(h.A,{title:"Create",children:(0,Q.jsx)("span",{children:(0,Q.jsx)(P.A,{onClick:()=>{l(!0)},children:(0,Q.jsx)(F.A,{})})})}),(0,Q.jsx)(h.A,{title:"Edit",children:(0,Q.jsx)("span",{children:(0,Q.jsx)(P.A,{disabled:1!==t.length,onClick:()=>{y("./edit/".concat(t[0]),{relative:"path",state:{from:k},replace:!1})},children:(0,Q.jsx)(I.A,{})})})}),(0,Q.jsx)(h.A,{title:"Delete",children:(0,Q.jsx)("span",{children:(0,Q.jsx)(P.A,{disabled:1!==t.length,onClick:()=>{U("".concat(t[0]))},children:(0,Q.jsx)(T.A,{})})})})]}),(0,Q.jsxs)(g.A,{onClose:()=>{l(!1)},open:o,children:[(0,Q.jsx)(N.A,{children:"Select, what type of coordinator to create"}),(0,Q.jsxs)(O.A,{sx:{pt:0},children:[(0,Q.jsx)(D.Ay,{disableGutters:!0,children:(0,Q.jsxs)(E.A,{onClick:()=>{y("../coordinators/create",{relative:"path",state:{from:k},replace:!1})},children:[(0,Q.jsx)(x.A,{children:(0,Q.jsx)(M.A,{children:(0,Q.jsx)(z.A,{})})}),(0,Q.jsx)(m.A,{primary:"Coordinator"})]})},"coordinator"),(0,Q.jsx)(D.Ay,{disableGutters:!0,children:(0,Q.jsxs)(E.A,{onClick:()=>{y("../coordinatorsDrivers/create",{relative:"path",state:{from:k},replace:!1})},children:[(0,Q.jsx)(x.A,{children:(0,Q.jsx)(M.A,{children:(0,Q.jsx)(z.A,{})})}),(0,Q.jsx)(m.A,{primary:"Coordinator-Driver"})]})},"coordinatorsDriver")]})]}),(0,Q.jsx)(q.A,{visible:H})]})}function Y(){const[e,t]=s.useState("asc"),[r,i]=s.useState("fullName"),[a,l]=s.useState([]),[c,d]=s.useState(0),[h,p]=s.useState(15),[x,m]=s.useState({}),g=s.useRef(null),f=(0,n.zy)(),C=(0,n.Zp)(),S=(0,G.dh)(),{isLoading:R,isFetching:M,data:{items:O,total:D}={items:[],total:0}}=(0,o.I)({queryKey:["coordinators",c,h,r,e,x],queryFn:B.gS,keepPreviousData:!0,retry:!1,onError:e=>{S({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),E=O||[];s.useEffect((()=>{if(g.current){g.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[E]),s.useEffect((()=>{const e=[];a.forEach((t=>{E.find((e=>e.id===t))&&e.push(t)})),l(e)}),[E]);return(0,Q.jsxs)(v.A,{sx:{width:"100%",height:"100%"},children:[(0,Q.jsxs)(w.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,Q.jsx)(X,{selected:a,setQueryParams:e=>{m(e),d(0)}}),(0,Q.jsx)(j.A,{ref:g,sx:{height:"calc(100% - 115px)"},children:(0,Q.jsxs)(A.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,Q.jsx)(Z,{numSelected:a.length,order:e,orderBy:r,onSelectAllClick:e=>{if(e.target.checked){const e=E.map((e=>e.id));l(e)}else l([])},onRequestSort:(s,n)=>{const a=r===n&&"asc"===e;r===n&&"desc"===e?(t(void 0),i(void 0)):(t(a?"desc":"asc"),i(n))},rowCount:E.length}),(0,Q.jsx)(b.A,{children:E.map(((e,t)=>{const r=(s="".concat(e.id),-1!==a.indexOf(s));var s;const n="enhanced-table-checkbox-".concat(t);return(0,Q.jsxs)(y.A,{hover:!0,onDoubleClick:t=>{return r=e,void C("../".concat((0,H.Yn)(r),"/view/").concat(r.id),{relative:"path",state:{from:f},replace:!1});var r},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,sx:{cursor:"pointer"},children:[(0,Q.jsx)(V,{padding:"checkbox",children:(0,Q.jsx)(u.A,{id:"".concat(n),color:"primary",checked:r,inputProps:{"aria-labelledby":n},onClick:t=>((e,t)=>{e.stopPropagation();const r=a.indexOf(t);let s=[];-1===r?s=s.concat(a,t):0===r?s=s.concat(a.slice(1)):r===a.length-1?s=s.concat(a.slice(0,-1)):r>0&&(s=s.concat(a.slice(0,r),a.slice(r+1))),l(s)})(t,"".concat(e.id))})}),W.map((t=>{const r=t.getData(e);return(0,Q.jsx)(V,{title:r.title,align:t.numeric?"right":"center",children:r.data},t.id)}))]},e.id)}))})]})}),(0,Q.jsx)(k.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:D,rowsPerPage:h,page:c,onPageChange:(e,t)=>{d(t)},onRowsPerPageChange:e=>{p(parseInt(e.target.value,10)),d(0)}})]}),(0,Q.jsx)(q.A,{visible:R||M})]})}},3471:(e,t,r)=>{var s=r(4994);t.A=void 0;var n=s(r(39)),i=r(579);t.A=(0,n.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},5540:(e,t,r)=>{var s=r(4994);t.A=void 0;var n=s(r(39)),i=r(579);t.A=(0,n.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},6600:(e,t,r)=>{r.d(t,{A:()=>g});var s=r(8168),n=r(8587),i=r(5043),a=r(8387),o=r(8606),l=r(5865),c=r(4535),d=r(2876),u=r(7034),h=r(2563),p=r(579);const x=["className","id"],m=(0,c.Ay)(l.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),g=i.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiDialogTitle"}),{className:l,id:c}=r,g=(0,n.A)(r,x),v=r,A=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},u.t,t)})(v),{titleId:b=c}=i.useContext(h.A);return(0,p.jsx)(m,(0,s.A)({component:"h2",className:(0,a.A)(A.root,l),ownerState:v,ref:t,variant:"h6",id:null!=c?c:b},g))}))},3851:(e,t,r)=>{r.d(t,{A:()=>v});var s=r(8587),n=r(8168),i=r(5043),a=r(8387),o=r(8606),l=r(1347),c=r(4535),d=r(2876),u=r(7056),h=r(2400);function p(e){return(0,h.Ay)("MuiListItemAvatar",e)}(0,u.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var x=r(579);const m=["className"],g=(0,c.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,n.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),v=i.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiListItemAvatar"}),{className:c}=r,u=(0,s.A)(r,m),h=i.useContext(l.A),v=(0,n.A)({},r,{alignItems:h.alignItems}),A=(e=>{const{alignItems:t,classes:r}=e,s={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,o.A)(s,p,r)})(v);return(0,x.jsx)(g,(0,n.A)({className:(0,a.A)(A.root,c),ownerState:v,ref:t},u))}))},2836:(e,t,r)=>{r.d(t,{n:()=>h});var s=r(5043),n=r(8664),i=r(116),a=r(9939),o=r(2078);class l extends o.Q{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const r=this.options;this.options=this.client.defaultMutationOptions(e),(0,n.f8)(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(t=this.currentMutation)||t.setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null==(e=this.currentMutation)||e.removeObserver(this))}onMutationUpdate(e){this.updateResult();const t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:"undefined"!==typeof e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:(0,i.$)(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){a.j.batch((()=>{var t,r,s,n;if(this.mutateOptions&&this.hasListeners())if(e.onSuccess)null==(t=(r=this.mutateOptions).onSuccess)||t.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(s=(n=this.mutateOptions).onSettled)||s.call(n,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(e.onError){var i,a,o,l;null==(i=(a=this.mutateOptions).onError)||i.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(o=(l=this.mutateOptions).onSettled)||o.call(l,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}e.listeners&&this.listeners.forEach((e=>{let{listener:t}=e;t(this.currentResult)}))}))}}var c=r(8873),d=r(9781),u=r(4084);function h(e,t,r){const i=(0,n.GR)(e,t,r),o=(0,d.jE)({context:i.context}),[h]=s.useState((()=>new l(o,i)));s.useEffect((()=>{h.setOptions(i)}),[h,i]);const x=(0,c.r)(s.useCallback((e=>h.subscribe(a.j.batchCalls(e))),[h]),(()=>h.getCurrentResult()),(()=>h.getCurrentResult())),m=s.useCallback(((e,t)=>{h.mutate(e,t).catch(p)}),[h]);if(x.error&&(0,u.G)(h.options.useErrorBoundary,[x.error]))throw x.error;return{...x,mutate:m,mutateAsync:x.mutate}}function p(){}}}]);
//# sourceMappingURL=5295.61084f78.chunk.js.map