"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[8672],{86:(e,i,t)=>{t.r(i),t.d(i,{default:()=>T,initialFreightValues:()=>P,initialStopDeliveryValues:()=>q,initialStopPickUpValues:()=>I});t(5043);var r=t(3216),a=t(9781),l=t(2836),d=t(3892),n=t(899),o=t(6446),s=t(1906),c=t(9336),u=t(2991),m=t(9404),p=t(2177),f=t(474),b=t(222),h=t(1079),x=t(9056),A=t(8833),k=t(579);const g=n.Ik({type:n.Yj().oneOf([A.P7.FCFS,A.P7.ASAP,A.P7.APPT]).required("Type is required"),at:n.p6().when(["type"],((e,i)=>e[0]===A.P7.FCFS?i.oneOf([void 0]):i.required("At is required"))),from:n.p6().when(["type"],((e,i)=>e[0]!==A.P7.FCFS?i.oneOf([void 0]):i.required("From is required"))),to:n.p6().when(["type"],((e,i)=>e[0]!==A.P7.FCFS?i.oneOf([void 0]):i.required("To is required")))}),j=n.Ik({type:n.Yj().oneOf([A.P7.FCFS,A.P7.Direct,A.P7.APPT]).required("Type is required"),at:n.p6().when(["type"],((e,i)=>e[0]===A.P7.FCFS?i.oneOf([void 0]):i.required("At is required"))),from:n.p6().when(["type"],((e,i)=>e[0]!==A.P7.FCFS?i.oneOf([void 0]):i.required("From is required"))),to:n.p6().when(["type"],((e,i)=>e[0]!==A.P7.FCFS?i.oneOf([void 0]):i.required("To is required")))}),y=n.Ik({pieces:n.ai().integer().min(1).required("Pieces must be at least 1"),unitOfWeight:n.Yj().oneOf(A.Lv).required("Unit of weight is required"),weight:n.ai().moreThan(0).required("Weight is required"),unitOfLength:n.Yj().oneOf(A.Ny).required("Unit of length is required"),length:n.ai().moreThan(0).required("Length is required")}),v=n.Ik({facility:n.Ik({id:n.Yj().required()}).typeError("Enter correct facility").required("Facility is required"),timeFrame:g.required("Time frame is required"),freightList:n.YO().of(y.required("Freight is required")).required("Stop pickup must contain al least one freight"),addInfo:n.Yj()}),C=n.Ik({facility:n.Ik({id:n.Yj().required()}).typeError("Enter correct facility").required("Facility is required"),timeFrame:j.required("Time frame is required"),addInfo:n.Yj()}),N=n.Ik({status:n.Yj().oneOf(A.Jf).required("Status is required"),ref:n.YO().of(n.Yj().required("Ref must not be empty")).max(3),stops:n.YO().of(n.RZ((e=>{switch(e.type){case A.lk.PickUp:return v.required("Stop pickup is required");case A.lk.Delivery:return C.required("Stop delivery is required");default:return n.gl().oneOf([void 0]).required('Type of stop must be "Pick Up" or "Delivery"')}}))).min(2).required("Stops are required"),weight:n.Yj().required("Weight is required"),truckType:n.YO(n.Yj().oneOf(A.Ju)).min(1,"Select at list one").required("Truck Type is required"),rate:n.ai().typeError("Rate must be a number"),totalCharges:n.ai().typeError("Total charges must be a number"),currency:n.Yj().required("Currency is required"),bookedByUser:n.Ik({id:n.Yj().required()}).typeError("Enter correct user").nullable(),bookedByCompany:n.Yj(),assignTo:n.YO(n.Ik({id:n.Yj().required()}).typeError("Enter correct user")),checkInAs:n.Yj(),truck:n.Ik({id:n.Yj().required()}).typeError("Enter correct truck").nullable(),bookedWith:n.Ik({id:n.Yj().required()}).typeError("Enter correct customer").nullable()}),F={type:A.P7.APPT,at:null},S={type:A.P7.APPT,at:null},P={pieces:null,unitOfWeight:"KG",weight:null,unitOfLength:"M",length:null},I={type:A.lk.PickUp,timeFrame:F,facility:null,freightList:[P],addInfo:""},q={type:A.lk.Delivery,timeFrame:S,facility:null,addInfo:""},w={status:"Available",ref:[],stops:[I,q],weight:void 0,truckType:[],rate:void 0,totalCharges:void 0,currency:"USD",bookedByUser:null,bookedByCompany:void 0,assignTo:[],checkInAs:"4ULogistics",truck:null,bookedWith:null};function T(){const e=(0,r.Zp)(),i=(0,a.jE)(),t=(0,x.dh)(),{mutate:n,isLoading:g}=(0,l.n)(h.te,{onSuccess:()=>{t({severity:"success",message:"Created"}),i.invalidateQueries(["loads"]),e(-1)},onError:e=>{t({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),j=(0,d.Wx)({initialValues:w,enableReinitialize:!0,validationSchema:N,onSubmit:e=>{n(e)}});return(0,k.jsxs)(o.A,{sx:{height:"100%"},children:[(0,k.jsx)("form",{onSubmit:j.handleSubmit,onReset:j.handleReset,style:{height:"100%"},children:(0,k.jsxs)(o.A,{sx:{p:3,height:"100%"},children:[(0,k.jsx)(c.A,{}),(0,k.jsxs)(o.A,{sx:{maxHeight:"calc(100% - 70px)",overflowX:"hidden",overflowY:"scroll"},children:[(0,k.jsxs)(o.A,{sx:{marginBottom:-1,p:1},children:[(0,k.jsx)(b.zM,{fieldName:"status",label:"Status",items:A.Jf,formik:j}),(0,k.jsx)(b.A_,{fieldName:"ref",label:"REF",multiline:!0,maxRows:3,formik:j}),(0,k.jsx)(f.A,{fieldName:"stops",formik:j})]},"topControls"),(0,k.jsxs)(o.A,{sx:{display:"inline-flex",width:"100%"},children:[(0,k.jsxs)(o.A,{sx:{p:1,width:"50%"},children:[(0,k.jsx)(b.A_,{fieldName:"weight",label:"Weight",formik:j}),(0,k.jsx)(b.yJ,{fieldName:"truckType",label:"Truck Type",items:A.Ju,formik:j}),(0,k.jsx)(b.Lw,{fieldName:"bookedByUser",label:"Booked By",getSelectedLabel:e=>"".concat(e.fullName),getItemLabel:e=>"".concat(e.fullName),getItemSecondLabel:e=>"".concat(e.jobTitle),ListIcon:p.A,queryFn:h.Fw,orderby:"fullName",order:"asc",formik:j}),(0,k.jsx)(b.Lw,{fieldName:"bookedWith",label:"Booked With",getSelectedLabel:e=>"".concat(e.name),getItemLabel:e=>"".concat(e.name),getItemSecondLabel:e=>"".concat(e.type),ListIcon:m.A,queryFn:h.sg,orderby:"name",order:"asc",formik:j}),(0,k.jsx)(b.Lw,{fieldName:"truck",label:"Truck",getSelectedLabel:e=>"".concat(e.truckNumber),getItemLabel:e=>"".concat(e.truckNumber),getItemSecondLabel:e=>"".concat(e.status,", ").concat(e.licencePlate),ListIcon:u.A,queryFn:h.fG,orderby:"truckNumber",order:"asc",formik:j})]},"left"),(0,k.jsxs)(o.A,{sx:{p:1,width:"50%"},children:[(0,k.jsx)(b.A_,{fieldName:"rate",label:"Rate",number:!0,formik:j}),(0,k.jsx)(b.A_,{fieldName:"totalCharges",label:"Total Charges",number:!0,formik:j}),(0,k.jsx)(b.A_,{fieldName:"currency",label:"Currency",formik:j}),(0,k.jsx)(b.A_,{fieldName:"checkInAs",label:"Check In As",formik:j}),(0,k.jsx)(b.A_,{fieldName:"bookedByCompany",label:"Booked By Company",formik:j})]},"right")]},"centerControls"),(0,k.jsxs)(o.A,{sx:{p:1,paddingBottom:0,paddingTop:0},children:[(0,k.jsx)(b.YY,{fieldName:"assignTo",label:"Assign To",getSelectedLabel:e=>"".concat(e.fullName),getItemLabel:e=>"".concat(e.fullName),getItemSecondLabel:e=>"".concat(e.jobTitle),ListIcon:p.A,queryFn:h.Fw,orderby:"fullName",order:"asc",formik:j}),(0,k.jsx)(o.A,{sx:{paddingBottom:2,paddingTop:2}},"spacer")]},"bottomControls")]},"controls"),(0,k.jsx)(c.A,{}),(0,k.jsxs)(o.A,{sx:{paddingTop:3,display:"flex"},children:[(0,k.jsx)(o.A,{sx:{p:1,paddingTop:0,width:"50%"},children:(0,k.jsx)(s.A,{fullWidth:!0,variant:"contained",size:"small",color:"primary",type:"submit",children:"Create"})},"left"),(0,k.jsx)(o.A,{sx:{p:1,paddingTop:0,width:"50%"},children:(0,k.jsx)(s.A,{fullWidth:!0,variant:"contained",size:"small",color:"primary",type:"button",onClick:()=>{e(-1)},children:"Cancel"})},"right")]},"buttons")]})}),(0,k.jsx)(b.aH,{visible:g})]})}},474:(e,i,t)=>{t.d(i,{A:()=>I});var r=t(5043),a=t(3097),l=t.n(a),d=t(6446),n=t(3766),o=t(6605),s=t(710),c=t(3577),u=t(430),m=t(5865),p=t(7392),f=t(3608),b=t(3358),h=t(2505),x=t(6164),A=t(222),k=t(8833),g=t(579);function j(e){let{fieldName:i,values:t,disabled:a,formik:n}=e;const o=l()(n.values,i);return r.useEffect((()=>{o.type===k.P7.FCFS?(o.at&&n.setFieldValue("".concat(i,".at"),void 0),!o.from&&n.setFieldValue("".concat(i,".from"),null),!o.to&&n.setFieldValue("".concat(i,".to"),null)):o.type&&(!o.at&&n.setFieldValue("".concat(i,".at"),null),o.from&&n.setFieldValue("".concat(i,".from"),void 0),o.to&&n.setFieldValue("".concat(i,".to"),void 0))}),[o.type]),(0,g.jsxs)(d.A,{sx:{display:"flex",width:"100%"},children:[(0,g.jsx)(d.A,{sx:{paddingRight:1,flex:1},children:(0,g.jsx)(A.zM,{fieldName:"".concat(i,".type"),label:"Time frame type",items:t,disabled:a,formik:n})},"typeContainer"),o.type===k.P7.FCFS?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.A,{sx:{paddingRight:1,paddingLeft:1,flex:1},children:(0,g.jsx)(A.Id,{fieldName:"".concat(i,".from"),label:"From",disablePast:!0,disabled:a,formik:n})},"fromContainer"),(0,g.jsx)(d.A,{sx:{paddingLeft:1,flex:1},children:(0,g.jsx)(A.Id,{fieldName:"".concat(i,".to"),label:"To",disablePast:!0,disabled:a,formik:n})},"toContainer")]}):(0,g.jsx)(d.A,{sx:{paddingLeft:1,flex:1},children:(0,g.jsx)(A.Id,{fieldName:"".concat(i,".at"),label:"At",disablePast:!0,disabled:a,formik:n})},"atContainer")]},"inlineControls")}var y=t(7166);function v(e){let{number:i,fieldName:t,onAdd:a,onRemove:l,removeDisabled:c,disabled:f,formik:b}=e;const[j,v]=r.useState(!1);return(0,g.jsxs)(n.A,{expanded:j,onChange:()=>{v((e=>!e))},sx:{backgroundColor:"unset"},children:[(0,g.jsx)(o.A,{expandIcon:(0,g.jsx)(u.A,{}),"aria-controls":"freight-content",id:"freight-header",children:(0,g.jsxs)(d.A,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[(0,g.jsx)(m.A,{children:"Freight #".concat(i)}),(0,g.jsxs)(d.A,{children:[(0,g.jsx)(p.A,{component:"label","aria-label":"add",sx:{padding:0},onClickCapture:e=>{(0,y.d)(e),a()},disabled:f,children:(0,g.jsx)(h.A,{})}),(0,g.jsx)(p.A,{component:"label","aria-label":"remove",sx:{padding:0},onClickCapture:e=>{(0,y.d)(e),l()},disabled:f||c,children:(0,g.jsx)(x.A,{})})]})]})}),(0,g.jsxs)(s.A,{children:[(0,g.jsx)(A.A_,{fieldName:"".concat(t,".pieces"),label:"Picies",number:!0,disabled:f,formik:b}),(0,g.jsxs)(d.A,{sx:{display:"flex",width:"100%"},children:[(0,g.jsxs)(d.A,{sx:{paddingRight:1,flex:1},children:[(0,g.jsx)(A.zM,{fieldName:"".concat(t,".unitOfWeight"),label:"Unit Of Weight",items:k.Lv,disabled:f,formik:b}),(0,g.jsx)(A.A_,{fieldName:"".concat(t,".weight"),label:"Weight",number:!0,disabled:f,formik:b})]},"left"),(0,g.jsxs)(d.A,{sx:{paddingLeft:1,flex:1},children:[(0,g.jsx)(A.zM,{fieldName:"".concat(t,".unitOfLength"),label:"Unit Of Length",items:k.Ny,disabled:f,formik:b}),(0,g.jsx)(A.A_,{fieldName:"".concat(t,".length"),label:"Length",number:!0,disabled:f,formik:b})]},"right")]},"inlineControls")]})]})}var C=t(86);function N(e){let{fieldName:i,disabled:t,formik:r}=e;const a=l()(r.values,i);return(0,g.jsx)(d.A,{sx:{paddingBottom:3,width:"100%"},children:a.map(((e,l)=>(0,g.jsx)(v,{number:l+1,fieldName:"".concat(i,"[").concat(l,"]"),onAdd:()=>(e=>{const t=a.toSpliced(e+1,0,C.initialFreightValues);r.setFieldValue(i,t)})(l),onRemove:()=>(e=>{const t=a.toSpliced(e,1);r.setFieldValue(i,t)})(l),removeDisabled:1===a.length,disabled:t,formik:r},l)))},"freightList")}var F=t(1079);function S(e){let{stopNumber:i,pickUpNumber:t,fieldName:a,onUp:l,onDown:v,onAdd:C,onRemove:S,upDisabled:P,downDisabled:I,removeDisabled:q,disabled:w,formik:T}=e;const[L,E]=r.useState(!1);return(0,g.jsxs)(n.A,{expanded:L,onChange:()=>{E((e=>!e))},sx:{backgroundColor:"unset"},children:[(0,g.jsx)(o.A,{expandIcon:(0,g.jsx)(u.A,{}),"aria-controls":"stop-pickup-content",id:"stop-pickup-header",children:(0,g.jsxs)(d.A,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[(0,g.jsx)(m.A,{children:"Stop (".concat(i,") PickUp #").concat(t)}),(0,g.jsxs)(d.A,{children:[(0,g.jsx)(p.A,{component:"label","aria-label":"up",sx:{padding:0},onClickCapture:e=>{(0,y.d)(e),l()},disabled:w||P,children:(0,g.jsx)(f.A,{})}),(0,g.jsx)(p.A,{component:"label","aria-label":"down",sx:{padding:0},onClickCapture:e=>{(0,y.d)(e),v()},disabled:w||I,children:(0,g.jsx)(b.A,{})}),(0,g.jsx)(p.A,{component:"label","aria-label":"add",sx:{padding:0},onClickCapture:e=>{(0,y.d)(e),C()},disabled:w,children:(0,g.jsx)(h.A,{})}),(0,g.jsx)(p.A,{component:"label","aria-label":"remove",sx:{padding:0},onClickCapture:e=>{(0,y.d)(e),S()},disabled:w||q,children:(0,g.jsx)(x.A,{})})]})]})}),(0,g.jsxs)(s.A,{children:[(0,g.jsx)(A.Lw,{fieldName:"".concat(a,".facility"),label:"Facility",getSelectedLabel:e=>"".concat(e.name),getItemLabel:e=>"".concat(e.name),getItemSecondLabel:e=>"".concat(e.address),ListIcon:c.A,queryFn:F.Kw,startEmpty:!1,orderby:"name",order:"asc",disabled:w,formik:T}),(0,g.jsx)(j,{fieldName:"".concat(a,".timeFrame"),values:[k.P7.FCFS,k.P7.APPT,k.P7.ASAP],disabled:w,formik:T}),(0,g.jsx)(N,{fieldName:"".concat(a,".freightList"),disabled:w,formik:T}),(0,g.jsx)(A.A_,{fieldName:"".concat(a,".addInfo"),label:"Additional stop info",disabled:w,formik:T})]})]})}function P(e){let{stopNumber:i,deliveryNumber:t,fieldName:a,onUp:l,onDown:v,onAdd:C,onRemove:N,upDisabled:S,downDisabled:P,removeDisabled:I,disabled:q,formik:w}=e;const[T,L]=r.useState(!1);return(0,g.jsxs)(n.A,{expanded:T,onChange:()=>{L((e=>!e))},sx:{backgroundColor:"unset"},children:[(0,g.jsx)(o.A,{expandIcon:(0,g.jsx)(u.A,{}),"aria-controls":"stop-delivery-content",id:"stop-delivery-header",children:(0,g.jsxs)(d.A,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[(0,g.jsx)(m.A,{children:"Stop (".concat(i,") Delivery #").concat(t)}),(0,g.jsxs)(d.A,{children:[(0,g.jsx)(p.A,{component:"label","aria-label":"up",sx:{padding:0},onClickCapture:e=>{(0,y.d)(e),l()},disabled:q||S,children:(0,g.jsx)(f.A,{})}),(0,g.jsx)(p.A,{component:"label","aria-label":"down",sx:{padding:0},onClickCapture:e=>{(0,y.d)(e),v()},disabled:q||P,children:(0,g.jsx)(b.A,{})}),(0,g.jsx)(p.A,{component:"label","aria-label":"add",sx:{padding:0},onClickCapture:e=>{(0,y.d)(e),C()},disabled:q,children:(0,g.jsx)(h.A,{})}),(0,g.jsx)(p.A,{component:"label","aria-label":"remove",sx:{padding:0},onClickCapture:e=>{(0,y.d)(e),N()},disabled:q||I,children:(0,g.jsx)(x.A,{})})]})]})}),(0,g.jsxs)(s.A,{children:[(0,g.jsx)(A.Lw,{fieldName:"".concat(a,".facility"),label:"Facility",getSelectedLabel:e=>"".concat(e.name),getItemLabel:e=>"".concat(e.name),getItemSecondLabel:e=>"".concat(e.address),ListIcon:c.A,queryFn:F.Kw,startEmpty:!1,orderby:"name",order:"asc",disabled:q,formik:w}),(0,g.jsx)(j,{fieldName:"".concat(a,".timeFrame"),values:[k.P7.FCFS,k.P7.APPT,k.P7.Direct],disabled:q,formik:w}),(0,g.jsx)(A.A_,{fieldName:"".concat(a,".addInfo"),label:"Additional stop info",disabled:q,formik:w})]})]})}function I(e){let{fieldName:i,disabled:t,formik:r}=e;const a=l()(r.values,i),n=e=>{const t=a[e-1],l=a[e],d=a.toSpliced(e-1,2,l,t);r.setFieldValue(i,d)},o=e=>{const t=a[e],l=a[e+1],d=a.toSpliced(e,2,l,t);r.setFieldValue(i,d)},s=e=>{const t=a.toSpliced(e,1);r.setFieldValue(i,t)};return(0,g.jsx)(d.A,{sx:{paddingBottom:3,width:"100%"},children:a?a.map(((e,l)=>{switch(e.type){case k.lk.PickUp:return(0,g.jsx)(S,{stopNumber:l+1,pickUpNumber:a.slice(0,l+1).filter((e=>e.type===k.lk.PickUp)).length,fieldName:"".concat(i,"[").concat(l,"]"),onUp:()=>n(l),onDown:()=>o(l),onAdd:()=>(e=>{const t=a.toSpliced(e+1,0,C.initialStopPickUpValues);r.setFieldValue(i,t)})(l),onRemove:()=>s(l),upDisabled:0===l,downDisabled:l===a.length-2||0===l&&a[1].type===k.lk.Delivery,removeDisabled:0===l,disabled:t,formik:r},l);case k.lk.Delivery:return(0,g.jsx)(P,{stopNumber:l+1,deliveryNumber:a.slice(0,l+1).filter((e=>e.type===k.lk.Delivery)).length,fieldName:"".concat(i,"[").concat(l,"]"),onUp:()=>n(l),onDown:()=>o(l),onAdd:()=>(e=>{const t=a.toSpliced(e+1,0,C.initialStopDeliveryValues);r.setFieldValue(i,t)})(l),onRemove:()=>s(l),upDisabled:l===a.length-1&&a[a.length-2].type===k.lk.PickUp||1===l,downDisabled:l===a.length-1,removeDisabled:l===a.length-1,disabled:t,formik:r},l)}})):null},"stops")}},8833:(e,i,t)=>{t.d(i,{IY:()=>n,Jf:()=>u,Ju:()=>d,Lv:()=>m,Ny:()=>p,P7:()=>b,Sr:()=>l,fo:()=>a,lk:()=>f,mW:()=>s,p5:()=>o,pI:()=>c,z5:()=>r});const r=["EN","UA","ES","RU"],a=["Admin","Super Admin"],l=["BROKER DOMESTIC","BROKER INTERNATIONAL","FREIGHT FORWARDER DOMESTIC","FREIGHT FORWARDER INTERNATIONAL","SHIPPER/CONSIGNEE DOMESTIC","SHIPPER/CONSIGNEE INTERNATIONAL","OTHER"],d=["Cargo van","Reefer van","Box truck","Box truck Reefer","Straight truck","Hotshot","Tented box"],n=["Available","Not Available","Will be available","On route"],o=["Yes","No"],s=["Hazmat","Tsa","TWIC","Tanker Endorsement"],c=["Dock height risers","Air ride","Lift gate","Keep from freezing","ICC bar","Vertical E-track","Horizontal E-track","Pallet jack","PPE","Ramps","Straps","Loads bars","Blankets","Pads","Fire extinguisher","Metal hooks","Reefer","Heater"],u=["Available","Planned","In Progress","TONU","Cancelled","Completed"],m=["LBS","KG","TON"],p=["FT","IN","M","CM"];let f=function(e){return e.PickUp="PickUp",e.Delivery="Delivery",e}({}),b=function(e){return e.FCFS="FCFS",e.APPT="APPT",e.ASAP="ASAP",e.Direct="Direct",e}({})},7166:(e,i,t)=>{function r(e){e.stopPropagation()}t.d(i,{d:()=>r})},3358:(e,i,t)=>{var r=t(4994);i.A=void 0;var a=r(t(39)),l=t(579);i.A=(0,a.default)((0,l.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward")},3608:(e,i,t)=>{var r=t(4994);i.A=void 0;var a=r(t(39)),l=t(579);i.A=(0,a.default)((0,l.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward")},2177:(e,i,t)=>{var r=t(4994);i.A=void 0;var a=r(t(39)),l=t(579);i.A=(0,a.default)((0,l.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person")},6164:(e,i,t)=>{var r=t(4994);i.A=void 0;var a=r(t(39)),l=t(579);i.A=(0,a.default)((0,l.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove")}}]);
//# sourceMappingURL=8672.f479647b.chunk.js.map