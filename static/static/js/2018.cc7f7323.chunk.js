"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[2018],{9637:(e,r,i)=>{i.r(r),i.d(r,{default:()=>L});var t=i(5043),o=i(3216),s=i(9781),d=i(5604),a=i(2836),n=i(3892),l=i(899),u=i(6446),c=i(1906),m=i(9336),f=i(2991),p=i(9404),y=i(2177),h=i(474),q=i(695),b=i(1079),g=i(9056),k=i(8833),j=i(6431),x=i(579);const A=l.Ik({type:l.Yj().oneOf([k.P7.FCFS,k.P7.ASAP,k.P7.APPT]).required("Type is required"),at:l.p6().when(["type"],((e,r)=>e[0]===k.P7.FCFS?r.oneOf([void 0]):r.required("At is required"))),from:l.p6().when(["type"],((e,r)=>e[0]!==k.P7.FCFS?r.oneOf([void 0]):r.required("From is required"))),to:l.p6().when(["type"],((e,r)=>e[0]!==k.P7.FCFS?r.oneOf([void 0]):r.required("To is required")))}),v=l.Ik({type:l.Yj().oneOf([k.P7.FCFS,k.P7.Direct,k.P7.APPT]).required("Type is required"),at:l.p6().when(["type"],((e,r)=>e[0]===k.P7.FCFS?r.oneOf([void 0]):r.required("At is required"))),from:l.p6().when(["type"],((e,r)=>e[0]!==k.P7.FCFS?r.oneOf([void 0]):r.required("From is required"))),to:l.p6().when(["type"],((e,r)=>e[0]!==k.P7.FCFS?r.oneOf([void 0]):r.required("To is required")))}),T=l.Ik({pieces:l.ai().integer().min(1).required("Pieces must be at least 1"),unitOfWeight:l.Yj().oneOf(k.Lv).required("Unit of weight is required"),weight:l.ai().moreThan(0).required("Weight is required"),unitOfLength:l.Yj().oneOf(k.Ny).required("Unit of length is required"),length:l.ai().moreThan(0).required("Length is required")}),F=l.Ik({facility:l.Ik({id:l.Yj().required()}).typeError("Enter correct facility").required("Facility is required"),timeFrame:A.required("Time frame is required"),freightList:l.YO().of(T.required("Freight is required")).required("Stop pickup must contain al least one freight"),addInfo:l.Yj()}),S=l.Ik({facility:l.Ik({id:l.Yj().required()}).typeError("Enter correct facility").required("Facility is required"),timeFrame:v.required("Time frame is required"),addInfo:l.Yj()}),I=l.Ik({status:l.Yj().oneOf(k.Jf).required("Status is required"),ref:l.YO().of(l.Yj().required("Ref must not be empty")).min(1,"REF is required").max(3,"REF must contain not more then 3 items").required("REF is required"),stops:l.YO().of(l.RZ((e=>{switch(e.type){case k.lk.PickUp:return F.required("Stop pickup is required");case k.lk.Delivery:return S.required("Stop delivery is required");default:return l.gl().oneOf([void 0]).required('Type of stop must be "Pick Up" or "Delivery"')}}))).min(2).required("Stops are required"),weight:l.Yj().required("Weight is required"),truckType:l.YO(l.Yj().oneOf(k.Ju)).min(1,"Select at list one").required("Truck Type is required"),rate:l.ai().typeError("Rate must be a number"),totalCharges:l.ai().typeError("Total charges must be a number").required("Total charges is required"),currency:l.Yj().required("Currency is required"),bookedByUser:l.Ik({id:l.Yj().required()}).required("Booked by is required"),bookedByCompany:l.Yj(),assignTo:l.YO(l.Ik({id:l.Yj().required()}).typeError("Enter correct user")).min(1,"Assign To is required").required("Assign To is required"),checkInAs:l.Yj(),truck:l.Ik({id:l.Yj().required()}).typeError("Enter correct truck").nullable(),bookedWith:l.Ik({id:l.Yj().required()}).typeError("Enter correct customer").required("Booked with is required")}),w={id:"",status:"Available",ref:[],stops:[],weight:void 0,truckType:[],rate:void 0,totalCharges:void 0,currency:"USD",bookedByUser:null,bookedByCompany:void 0,assignTo:[],checkInAs:"4ULogistics",truck:null,bookedWith:null};function L(){const[e,r]=t.useState(w),{pathname:i}=(0,o.zy)(),l=(0,o.Zp)(),A=(0,s.jE)(),v=(0,g.dh)(),{isLoading:T,isFetching:F,data:S}=(0,d.I)({queryKey:["load",i.split("/")[3]],queryFn:b.bQ,retry:!1,onError:e=>{v({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),{mutate:L,isLoading:Y}=(0,a.n)(b.QD,{onSuccess:()=>{v({severity:"success",message:"Saved"}),A.invalidateQueries(["load",i.split("/")[3]]),A.invalidateQueries(["loads"]),l(-1)},onError:e=>{v({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),C=(0,n.Wx)({initialValues:e,enableReinitialize:!0,validationSchema:I,onSubmit:e=>{L(e)}});t.useEffect((()=>{r({...e,...(0,j.jv)(S,Object.keys(e))})}),[S]);return(0,x.jsxs)(u.A,{sx:{height:"100%"},children:[(0,x.jsx)("form",{onSubmit:C.handleSubmit,onReset:C.handleReset,style:{height:"100%"},children:(0,x.jsxs)(u.A,{sx:{p:3,height:"100%"},children:[(0,x.jsx)(m.A,{}),(0,x.jsxs)(u.A,{sx:{maxHeight:"calc(100% - 70px)",overflowX:"hidden",overflowY:"scroll"},children:[(0,x.jsxs)(u.A,{sx:{marginBottom:-1,p:1},children:[(0,x.jsx)(q.zM,{fieldName:"status",label:"Status",items:k.Jf,formik:C}),(0,x.jsx)(q.A_,{fieldName:"ref",label:"REF",multiline:!0,maxRows:3,formik:C}),(0,x.jsx)(h.A,{fieldName:"stops",formik:C})]},"topControls"),(0,x.jsxs)(u.A,{sx:{display:"inline-flex",width:"100%"},children:[(0,x.jsxs)(u.A,{sx:{p:1,width:"50%"},children:[(0,x.jsx)(q.A_,{fieldName:"weight",label:"Weight",formik:C}),(0,x.jsx)(q.yJ,{fieldName:"truckType",label:"Truck Type",items:k.Ju,formik:C}),(0,x.jsx)(q.Lw,{fieldName:"bookedByUser",label:"Booked By",getSelectedLabel:e=>"".concat(e.fullName),getItemLabel:e=>"".concat(e.fullName),getItemSecondLabel:e=>"".concat(e.jobTitle),ListIcon:y.A,queryFn:b.Fw,orderby:"fullName",order:"asc",formik:C}),(0,x.jsx)(q.Lw,{fieldName:"bookedWith",label:"Booked With",getSelectedLabel:e=>"".concat(e.name),getItemLabel:e=>"".concat(e.name),getItemSecondLabel:e=>"".concat(e.type),ListIcon:p.A,queryFn:b.sg,orderby:"name",order:"asc",formik:C}),(0,x.jsx)(q.Lw,{fieldName:"truck",label:"Truck",getSelectedLabel:e=>"".concat(e.truckNumber),getItemLabel:e=>"".concat(e.truckNumber),getItemSecondLabel:e=>"".concat(e.status,", ").concat(e.licencePlate),ListIcon:f.A,queryFn:b.fG,orderby:"truckNumber",order:"asc",formik:C})]},"left"),(0,x.jsxs)(u.A,{sx:{p:1,width:"50%"},children:[(0,x.jsx)(q.A_,{fieldName:"rate",label:"Rate",number:!0,formik:C}),(0,x.jsx)(q.A_,{fieldName:"totalCharges",label:"Total Charges",placeholder:"Enter total rate",number:!0,formik:C}),(0,x.jsx)(q.A_,{fieldName:"currency",label:"Currency",formik:C}),(0,x.jsx)(q.A_,{fieldName:"checkInAs",label:"Check In As",formik:C}),(0,x.jsx)(q.A_,{fieldName:"bookedByCompany",label:"Booked By Company",formik:C})]},"right")]},"centerControls"),(0,x.jsxs)(u.A,{sx:{p:1,paddingBottom:0,paddingTop:0},children:[(0,x.jsx)(q.YY,{fieldName:"assignTo",label:"Assign To",getSelectedLabel:e=>"".concat(e.fullName),getItemLabel:e=>"".concat(e.fullName),getItemSecondLabel:e=>"".concat(e.jobTitle),ListIcon:y.A,queryFn:b.Fw,orderby:"fullName",order:"asc",formik:C}),(0,x.jsx)(u.A,{sx:{paddingBottom:2,paddingTop:2}},"spacerRate"),(0,x.jsx)(q.$c,{objectId:null===S||void 0===S?void 0:S.id,objectType:"Load",label:"Rate Files",tags:{["".concat(null===S||void 0===S?void 0:S.id)]:"Rate"}}),(0,x.jsx)(u.A,{sx:{paddingBottom:2,paddingTop:2}},"spacerBill"),(0,x.jsx)(q.$c,{objectId:null===S||void 0===S?void 0:S.id,objectType:"Load",label:"Bill Files",tags:{["".concat(null===S||void 0===S?void 0:S.id)]:"Bill"}})]},"bottomControls")]},"controls"),(0,x.jsx)(m.A,{}),(0,x.jsxs)(u.A,{sx:{paddingTop:3,display:"flex"},children:[(0,x.jsx)(u.A,{sx:{p:1,paddingTop:0,width:"50%"},children:(0,x.jsx)(c.A,{fullWidth:!0,variant:"contained",size:"small",color:"primary",type:"submit",disabled:!C.dirty,children:"Save"})},"left"),(0,x.jsx)(u.A,{sx:{p:1,paddingTop:0,width:"50%"},children:(0,x.jsx)(c.A,{fullWidth:!0,variant:"contained",size:"small",color:"primary",type:"button",onClick:()=>{l(-1)},children:"Cancel"})},"right")]},"buttons")]})}),(0,x.jsx)(q.aH,{visible:Y||T||F})]})}}}]);
//# sourceMappingURL=2018.cc7f7323.chunk.js.map