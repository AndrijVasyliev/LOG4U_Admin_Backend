"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[9507],{9507:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var a=n(5043),i=n(3216),r=n(9781),s=n(2836),c=n(5604),l=n(4535),d=n(310),o=n(7784),u=n(1962),h=n(7739),x=n(2420),p=n(6446),g=n(1806),b=n(3460),m=n(9650),j=n(4882),A=n(9090),f=n(8076),v=n(8093),k=n(5263),y=n(5865),w=n(3336),S=n(7392),P=n(8242),C=n(1833),F=n(2088),D=n(8612),E=n(1079),T=n(908),N=n(7166),O=n(6431),_=n(579);const z=[{id:"state",orderField:"state",getData:e=>({data:"".concat(e.state)}),numeric:!1,disablePadding:!0,label:"Push\xa0State"},{id:"createdAt",orderField:"createdAt",getData:e=>{const t=new Date(e.createdAt).toLocaleString();return{data:(0,_.jsx)("span",{children:"".concat(t)}),title:t}},numeric:!1,disablePadding:!0,label:"Created\xa0At"},{id:"updatedAt",orderField:"updatedAt",getData:e=>{const t=new Date(e.updatedAt).toLocaleString();return{data:(0,_.jsx)("span",{children:"".concat(t)}),title:t}},numeric:!1,disablePadding:!0,label:"Updated\xa0At"},{id:"title",getData:e=>{const t="".concat(e.title||""),n="".concat(e.subtitle||"");return{data:(0,_.jsxs)("span",{children:["".concat(t),(0,_.jsx)("br",{}),"".concat(n)]}),title:t+"\n"+n}},numeric:!1,disablePadding:!0,label:"Title/Subtitle"},{id:"body",getData:e=>{const t="".concat(e.body||"");return{data:(0,_.jsx)("span",{children:"".concat(t)}),title:t}},numeric:!1,disablePadding:!0,label:"Body"},{id:"to",getData:e=>{const t="".concat(e.to.fullName),n="".concat((0,O.Pw)(e.to)),a="./".concat((0,O.Yn)(e.to),"/view/").concat(e.to.id);return{data:(0,_.jsxs)("span",{children:[(0,_.jsx)("a",{href:a,target:"_blank",onClick:N.d,children:"".concat(t)}),(0,_.jsx)("br",{}),"".concat(n)]}),title:t+"\n"+n}},numeric:!1,disablePadding:!0,label:"To"}],q=(0,l.Ay)(j.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),B=(0,l.Ay)(x.A)((()=>({maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})));function I(e){const{onSelectAllClick:t,order:n,orderBy:a,numSelected:i,rowCount:r,onRequestSort:s}=e;return(0,_.jsx)(q,{children:(0,_.jsxs)(f.A,{children:[(0,_.jsx)(B,{padding:"checkbox",children:(0,_.jsx)(u.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:i>0&&i<r,checked:r>0&&i===r,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),z.map((e=>{return(0,_.jsx)(B,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:a===e.id&&n,children:(0,_.jsxs)(v.A,{active:e.orderField&&a===e.orderField,hideSortIcon:!e.orderField,direction:a===e.orderField?n:"asc",onClick:e.orderField?(t=e.orderField,e=>{s(e,t)}):()=>{},children:[e.label,e.orderField&&a===e.orderField?(0,_.jsx)(p.A,{component:"span",sx:F.A,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function L(e){const{selected:t,setQueryParams:n}=e,[c,l]=a.useState(""),[u,x]=a.useState(0),[g,b]=a.useState(!1),m=((0,i.zy)(),(0,i.Zp)(),(0,r.jE)()),j=(0,T.dh)(),{mutate:A,isLoading:f}=(0,s.n)(E.$l,{onSuccess:()=>{j({severity:"success",message:"Deleted"}),m.invalidateQueries(["push"])},onError:e=>{j({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),v=()=>{b(!1),l(""),x(0),n({})},w=()=>{b(!1);const e={};c&&(e.search=c),u&&(e.truckNumber=u),n(e)},F=e=>{"Enter"===e.key&&(c?w():v())};return(0,_.jsxs)(k.A,{sx:{overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1},...t.length>0&&{bgcolor:e=>(0,d.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[t.length>0?(0,_.jsxs)(y.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,_.jsx)(y.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Pushs"}),(0,_.jsx)(p.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,_.jsx)(o.A,{label:"Person",value:c,onChange:e=>{l(e.target.value),b(!0)},onKeyUp:F,size:"small"})}),(0,_.jsx)(p.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,_.jsx)(o.A,{label:"Truck Number",value:u||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(x(Number(e.target.value)),b(!0))},onKeyUp:F,size:"small"})}),(0,_.jsx)(h.A,{title:"Filter list",children:!g&&(c||u)||g&&!c&&g&&!u?(0,_.jsx)("span",{children:(0,_.jsx)(S.A,{onClick:v,children:(0,_.jsx)(C.A,{})})}):(0,_.jsx)("span",{children:(0,_.jsx)(S.A,{disabled:!c&&!u,onClick:w,children:(0,_.jsx)(P.A,{})})})}),(0,_.jsx)(p.A,{sx:{p:1,display:"inline-flex"}}),(0,_.jsx)(D.A,{visible:f})]})}function R(){const[e,t]=a.useState("desc"),[n,r]=a.useState("createdAt"),[s,l]=a.useState([]),[d,o]=a.useState(0),[h,x]=a.useState(15),[j,v]=a.useState({}),k=a.useRef(null),y=((0,i.zy)(),(0,i.Zp)(),(0,T.dh)()),{isLoading:S,isFetching:P,data:{items:C,total:F}={items:[],total:0}}=(0,c.I)({queryKey:["pushs",d,h,n,e,j],queryFn:E.wA,keepPreviousData:!0,retry:!1,onError:e=>{y({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),N=C||[];a.useEffect((()=>{if(k.current){k.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[N]),a.useEffect((()=>{const e=[];s.forEach((t=>{N.find((e=>e.id===t))&&e.push(t)})),l(e)}),[N]);return(0,_.jsxs)(p.A,{sx:{width:"100%",height:"100%"},children:[(0,_.jsxs)(w.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,_.jsx)(L,{selected:s,setQueryParams:e=>{v(e),o(0)}}),(0,_.jsx)(m.A,{ref:k,sx:{height:"calc(100% - 115px)"},children:(0,_.jsxs)(g.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,_.jsx)(I,{numSelected:s.length,order:e,orderBy:n,onSelectAllClick:e=>{if(e.target.checked){const e=N.map((e=>e.id));l(e)}else l([])},onRequestSort:(a,i)=>{const s=n===i&&"asc"===e;n===i&&"desc"===e?(t(void 0),r(void 0)):(t(s?"desc":"asc"),r(i))},rowCount:N.length}),(0,_.jsx)(b.A,{children:N.map(((e,t)=>{const n=(a="".concat(e.id),-1!==s.indexOf(a));var a;const i="enhanced-table-checkbox-".concat(t);return(0,_.jsxs)(f.A,{hover:!0,onDoubleClick:e=>{},role:"checkbox","aria-checked":n,tabIndex:-1,selected:n,sx:{cursor:"pointer"},children:[(0,_.jsx)(B,{padding:"checkbox",children:(0,_.jsx)(u.A,{id:"".concat(i),color:"primary",checked:n,inputProps:{"aria-labelledby":i},onClick:t=>((e,t)=>{e.stopPropagation();const n=s.indexOf(t);let a=[];-1===n?a=a.concat(s,t):0===n?a=a.concat(s.slice(1)):n===s.length-1?a=a.concat(s.slice(0,-1)):n>0&&(a=a.concat(s.slice(0,n),s.slice(n+1))),l(a)})(t,"".concat(e.id))})}),z.map((t=>{const n=t.getData(e);return(0,_.jsx)(B,{title:n.title,align:t.numeric?"right":"center",children:n.data},t.id)}))]},e.id)}))})]})}),(0,_.jsx)(A.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:F,rowsPerPage:h,page:d,onPageChange:(e,t)=>{o(t)},onRowsPerPageChange:e=>{x(parseInt(e.target.value,10)),o(0)}})]}),(0,_.jsx)(D.A,{visible:S||P})]})}}}]);
//# sourceMappingURL=9507.0f61d89e.chunk.js.map