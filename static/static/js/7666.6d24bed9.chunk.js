"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[7666],{7666:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ie});var r=n(5043),a=n(3216),i=n(9781),s=n(2836),l=n(5604),o=n(4535),c=n(310),d=n(7784),u=n(1962),h=n(7739),x=n(2420),p=n(3851),m=n(6353),g=n(3462),A=n(5316),f=n(8533),j=n(9347),v=n(1906),b=n(6446),w=n(1806),k=n(3460),y=n(9650),C=n(4882),D=n(9090),S=n(8076),N=n(8093),P=n(5263),F=n(5865),T=n(3336),I=n(1045),M=n(5721),O=n(681),R=n(8968),E=n(6600),_=n(7392),z=n(2505),L=n(5540),H=n(3471),W=n(8242),q=n(1833),K=n(5681),B=n(2088),J=n(8612),Q=n(1079),U=n(9056),G=n(6431),V=n(7166);var Y=n(4836),Z=n(579);const X=r.forwardRef((function(e,t){return(0,Z.jsx)(Y.A,{direction:"up",ref:t,...e})})),$=[{id:"fullName",orderField:"fullName",getData:e=>({data:"".concat(e.fullName)}),numeric:!1,disablePadding:!0,label:"First\xa0name/Last\xa0name"},{id:"type",getData:e=>{const t="".concat((0,G.Pw)(e)," ");let n="";return"Owner"===e.type&&(n="Owner"),"OwnerDriver"===e.type&&(n="Owner/Driver"),{data:(0,Z.jsx)("span",{children:(0,Z.jsx)("b",{children:t})}),title:n}},numeric:!1,disablePadding:!0,label:"Type"},{id:"phone",getData:e=>{const t="".concat(e.phone),n="".concat(e.phone2?e.phone2:"");return{data:(0,Z.jsxs)("span",{children:[(0,Z.jsx)("a",{href:"tel:".concat(t),target:"_blank",onClick:V.d,children:t}),(0,Z.jsx)("br",{}),(0,Z.jsx)("a",{href:n?"tel:".concat(n):void 0,target:"_blank",onClick:V.d,children:n||"\xa0"})]}),title:t+"\n"+n}},numeric:!1,disablePadding:!0,label:"Mobile\xa0phone"},{id:"email",getData:e=>{const t="".concat(e.email);return{data:(0,Z.jsx)("span",{children:(0,Z.jsx)("a",{href:"mailto:".concat(t),target:"_blank",onClick:V.d,children:t})}),title:t}},numeric:!1,disablePadding:!0,label:"Email"},{id:"address",getData:e=>{const t="".concat(e.address);return{data:(0,Z.jsx)("span",{children:t}),title:t}},numeric:!1,disablePadding:!0,label:"Home\xa0address"},{id:"ownTrucks",getData:e=>{if(e.ownTrucks&&e.ownTrucks.length){const t=e.ownTrucks;return{data:(0,Z.jsx)("span",{children:t.map(((e,n)=>(0,Z.jsx)("a",{href:"/trucks/view/".concat(e.id),target:"_blank",onClick:V.d,children:"".concat(e.truckNumber).concat(n===t.length-1?"":", ")},n)))}),title:t.map((e=>e.truckNumber)).join(", "),elementsCount:t.length}}return{data:""}},numeric:!1,disablePadding:!0,openInDialog:!0,label:"OWN\xa0TRUCKS"},{id:"driversCoordinators",getData:e=>{if(e.coordinators||e.drivers){var t,n;const r=new Map;null===(t=e.coordinators)||void 0===t||t.forEach((e=>r.set(e.id,{id:e.id,fullName:e.fullName,type:e.type}))),null===(n=e.drivers)||void 0===n||n.forEach((e=>!r.has(e.id)&&r.set(e.id,{id:e.id,fullName:e.fullName,type:e.type})));const a=Array.from(r.values());return{data:(0,Z.jsx)("span",{children:a.map(((e,t)=>(0,Z.jsx)("a",{href:"./".concat((0,G.Yn)(e),"/view/").concat(e.id),target:"_blank",onClick:V.d,children:"".concat(e.fullName," ").concat((0,G.Pw)(e)," ").concat(t===a.length-1?"":", ")},e.id)))}),title:a.map((e=>"".concat(e.fullName," ").concat((0,G.Pw)(e)))).join(", "),elementsCount:a.length}}return{data:""}},numeric:!1,disablePadding:!0,openInDialog:!0,label:"Drivers/Coordinators"}],ee=(0,o.Ay)(C.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),te=(0,o.Ay)(x.A)((()=>({maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})));function ne(e){const{onSelectAllClick:t,order:n,orderBy:r,numSelected:a,rowCount:i,onRequestSort:s}=e;return(0,Z.jsx)(ee,{children:(0,Z.jsxs)(S.A,{children:[(0,Z.jsx)(te,{padding:"checkbox",children:(0,Z.jsx)(u.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:a>0&&a<i,checked:i>0&&a===i,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),$.map((e=>{return(0,Z.jsx)(te,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:r===e.id&&n,children:(0,Z.jsxs)(N.A,{active:e.orderField&&r===e.orderField,hideSortIcon:!e.orderField,direction:r===e.orderField?n:"asc",onClick:e.orderField?(t=e.orderField,e=>{s(e,t)}):()=>{},children:[e.label,e.orderField&&r===e.orderField?(0,Z.jsx)(b.A,{component:"span",sx:B.A,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function re(e){const{selected:t,setQueryParams:n}=e,[l,o]=r.useState(!1),[u,x]=r.useState(""),[A,f]=r.useState(0),[j,v]=r.useState(!1),w=(0,a.zy)(),k=(0,a.Zp)(),y=(0,i.jE)(),C=(0,U.dh)(),{mutate:D,isLoading:S}=(0,s.n)(Q.Jx,{onSuccess:()=>{C({severity:"success",message:"Deleted"}),y.invalidateQueries(["owners"])},onError:e=>{C({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),N=()=>{v(!1),x(""),f(0),n({})},T=()=>{v(!1);const e={};u&&(e.fullName=u),A&&(e.truckNumber=A),n(e)},B=e=>{"Enter"===e.key&&(u||A?T():N())};return(0,Z.jsxs)(P.A,{sx:{overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1},...t.length>0&&{bgcolor:e=>(0,c.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[t.length>0?(0,Z.jsxs)(F.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,Z.jsx)(F.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Owners"}),(0,Z.jsx)(b.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,Z.jsx)(d.A,{label:"First name/Last name",value:u,onChange:e=>{x(e.target.value),v(!0)},onKeyUp:B,size:"small"})}),(0,Z.jsx)(b.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,Z.jsx)(d.A,{label:"Truck Number",value:A||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(f(Number(e.target.value)),v(!0))},onKeyUp:B,size:"small"})}),(0,Z.jsx)(h.A,{title:"Filter list",children:!j&&(u||A)||j&&!u&&j&&!A?(0,Z.jsx)("span",{children:(0,Z.jsx)(_.A,{onClick:N,children:(0,Z.jsx)(q.A,{})})}):(0,Z.jsx)("span",{children:(0,Z.jsx)(_.A,{disabled:!u&&!A,onClick:T,children:(0,Z.jsx)(W.A,{})})})}),(0,Z.jsxs)(b.A,{sx:{p:1,display:"inline-flex"},children:[(0,Z.jsx)(h.A,{title:"Create",children:(0,Z.jsx)("span",{children:(0,Z.jsx)(_.A,{onClick:()=>{o(!0)},children:(0,Z.jsx)(z.A,{})})})}),(0,Z.jsx)(h.A,{title:"Edit",children:(0,Z.jsx)("span",{children:(0,Z.jsx)(_.A,{disabled:1!==t.length,onClick:()=>{k("./edit/".concat(t[0]),{relative:"path",state:{from:w},replace:!1})},children:(0,Z.jsx)(L.A,{})})})}),(0,Z.jsx)(h.A,{title:"Delete",children:(0,Z.jsx)("span",{children:(0,Z.jsx)(_.A,{disabled:1!==t.length,onClick:()=>{D("".concat(t[0]))},children:(0,Z.jsx)(H.A,{})})})})]}),(0,Z.jsxs)(g.A,{onClose:()=>{o(!1)},open:l,children:[(0,Z.jsx)(E.A,{children:"Select, what type of owner to create"}),(0,Z.jsxs)(M.A,{sx:{pt:0},children:[(0,Z.jsx)(O.Ay,{disableGutters:!0,children:(0,Z.jsxs)(R.A,{onClick:()=>{k("../owners/create",{relative:"path",state:{from:w},replace:!1})},children:[(0,Z.jsx)(p.A,{children:(0,Z.jsx)(I.A,{children:(0,Z.jsx)(K.A,{})})}),(0,Z.jsx)(m.A,{primary:"Owner"})]})},"owner"),(0,Z.jsx)(O.Ay,{disableGutters:!0,children:(0,Z.jsxs)(R.A,{onClick:()=>{k("../ownersDrivers/create",{relative:"path",state:{from:w},replace:!1})},children:[(0,Z.jsx)(p.A,{children:(0,Z.jsx)(I.A,{children:(0,Z.jsx)(K.A,{})})}),(0,Z.jsx)(m.A,{primary:"Owner-Driver"})]})},"ownerDriver")]})]}),(0,Z.jsx)(J.A,{visible:S})]})}const ae=e=>{let{row:t,cell:n,setDialogData:a}=e;const i=n.getData(t),s=r.useRef(null);return(0,Z.jsx)(te,{ref:s,title:i.title,align:n.numeric?"right":"center",onClickCapture:e=>{if(!n.openInDialog)return;if(i.elementsCount&&i.elementsCount<2)return;const t=s.current;t&&function(e){let{clientWidth:t,clientHeight:n,scrollWidth:r,scrollHeight:a}=e;return a>n||r>t}(t)&&(e.preventDefault(),(0,V.d)(e),a(i.data))},children:i.data},n.id)};function ie(){const[e,t]=r.useState(void 0),[n,i]=r.useState("asc"),[s,o]=r.useState("fullName"),[c,d]=r.useState([]),[h,x]=r.useState(0),[p,m]=r.useState(15),[C,N]=r.useState({}),P=r.useRef(null),F=(0,a.zy)(),I=(0,a.Zp)(),M=(0,U.dh)(),{isLoading:O,isFetching:R,data:{items:E,total:_}={items:[],total:0}}=(0,l.I)({queryKey:["owners",h,p,s,n,C],queryFn:Q.Dc,keepPreviousData:!0,retry:!1,onError:e=>{M({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),z=E||[];r.useEffect((()=>{if(P.current){P.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[z]),r.useEffect((()=>{const e=[];c.forEach((t=>{z.find((e=>e.id===t))&&e.push(t)})),d(e)}),[z]);const L=()=>{t(void 0)};return(0,Z.jsxs)(b.A,{sx:{width:"100%",height:"100%"},children:[(0,Z.jsxs)(T.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,Z.jsx)(re,{selected:c,setQueryParams:e=>{N(e),x(0)}}),(0,Z.jsx)(y.A,{ref:P,sx:{height:"calc(100% - 115px)"},children:(0,Z.jsxs)(w.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,Z.jsx)(ne,{numSelected:c.length,order:n,orderBy:s,onSelectAllClick:e=>{if(e.target.checked){const e=z.map((e=>e.id));d(e)}else d([])},onRequestSort:(e,t)=>{const r=s===t&&"asc"===n;s===t&&"desc"===n?(i(void 0),o(void 0)):(i(r?"desc":"asc"),o(t))},rowCount:z.length}),(0,Z.jsx)(k.A,{children:z.map(((e,n)=>{const r=(a="".concat(e.id),-1!==c.indexOf(a));var a;const i="enhanced-table-checkbox-".concat(n);return(0,Z.jsxs)(S.A,{hover:!0,onDoubleClick:t=>{return n=e,void I("../".concat((0,G.Yn)(n),"/view/").concat(n.id),{relative:"path",state:{from:F},replace:!1});var n},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,sx:{cursor:"pointer"},children:[(0,Z.jsx)(te,{padding:"checkbox",children:(0,Z.jsx)(u.A,{id:"".concat(i),color:"primary",checked:r,inputProps:{"aria-labelledby":i},onClick:t=>((e,t)=>{e.stopPropagation();const n=c.indexOf(t);let r=[];-1===n?r=r.concat(c,t):0===n?r=r.concat(c.slice(1)):n===c.length-1?r=r.concat(c.slice(0,-1)):n>0&&(r=r.concat(c.slice(0,n),c.slice(n+1))),d(r)})(t,"".concat(e.id))})}),$.map((n=>(0,Z.jsx)(ae,{row:e,cell:n,setDialogData:t},n.id)))]},e.id)}))})]})}),(0,Z.jsx)(D.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:_,rowsPerPage:p,page:h,onPageChange:(e,t)=>{x(t)},onRowsPerPageChange:e=>{m(parseInt(e.target.value,10)),x(0)}})]}),(0,Z.jsxs)(g.A,{open:!!e,TransitionComponent:X,keepMounted:!0,onClose:L,"aria-describedby":"alert-dialog-slide-description",children:[(0,Z.jsx)(A.A,{children:(0,Z.jsx)(f.A,{id:"dialog-content",sx:{span:{display:"grid"}},children:e})}),(0,Z.jsx)(j.A,{children:(0,Z.jsx)(v.A,{onClick:L,children:"Close"})})]}),(0,Z.jsx)(J.A,{visible:O||R})]})}},3471:(e,t,n)=>{var r=n(4994);t.A=void 0;var a=r(n(39)),i=n(579);t.A=(0,a.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},5540:(e,t,n)=>{var r=n(4994);t.A=void 0;var a=r(n(39)),i=n(579);t.A=(0,a.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},8533:(e,t,n)=>{n.d(t,{A:()=>f});var r=n(8587),a=n(8168),i=n(5043),s=n(8387),l=n(8606),o=n(4535),c=n(1475),d=n(2876),u=n(5865),h=n(7056),x=n(2400);function p(e){return(0,x.Ay)("MuiDialogContentText",e)}(0,h.A)("MuiDialogContentText",["root"]);var m=n(579);const g=["children","className"],A=(0,o.Ay)(u.A,{shouldForwardProp:e=>(0,c.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),f=i.forwardRef((function(e,t){const n=(0,d.A)({props:e,name:"MuiDialogContentText"}),{className:i}=n,o=(0,r.A)(n,g),c=(e=>{const{classes:t}=e,n=(0,l.A)({root:["root"]},p,t);return(0,a.A)({},t,n)})(o);return(0,m.jsx)(A,(0,a.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:o,className:(0,s.A)(c.root,i)},n,{classes:c}))}))},6600:(e,t,n)=>{n.d(t,{A:()=>g});var r=n(8168),a=n(8587),i=n(5043),s=n(8387),l=n(8606),o=n(5865),c=n(4535),d=n(2876),u=n(7034),h=n(2563),x=n(579);const p=["className","id"],m=(0,c.Ay)(o.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),g=i.forwardRef((function(e,t){const n=(0,d.A)({props:e,name:"MuiDialogTitle"}),{className:o,id:c}=n,g=(0,a.A)(n,p),A=n,f=(e=>{const{classes:t}=e;return(0,l.A)({root:["root"]},u.t,t)})(A),{titleId:j=c}=i.useContext(h.A);return(0,x.jsx)(m,(0,r.A)({component:"h2",className:(0,s.A)(f.root,o),ownerState:A,ref:t,variant:"h6",id:null!=c?c:j},g))}))},3851:(e,t,n)=>{n.d(t,{A:()=>A});var r=n(8587),a=n(8168),i=n(5043),s=n(8387),l=n(8606),o=n(1347),c=n(4535),d=n(2876),u=n(7056),h=n(2400);function x(e){return(0,h.Ay)("MuiListItemAvatar",e)}(0,u.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var p=n(579);const m=["className"],g=(0,c.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,a.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),A=i.forwardRef((function(e,t){const n=(0,d.A)({props:e,name:"MuiListItemAvatar"}),{className:c}=n,u=(0,r.A)(n,m),h=i.useContext(o.A),A=(0,a.A)({},n,{alignItems:h.alignItems}),f=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,l.A)(r,x,n)})(A);return(0,p.jsx)(g,(0,a.A)({className:(0,s.A)(f.root,c),ownerState:A,ref:t},u))}))}}]);
//# sourceMappingURL=7666.6d24bed9.chunk.js.map