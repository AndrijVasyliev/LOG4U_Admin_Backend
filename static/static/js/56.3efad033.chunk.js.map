{"version":3,"file":"static/js/56.3efad033.chunk.js","mappings":"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","sources":["GoogleMaps/map.tsx","api/api.ts"],"sourcesContent":["import * as React from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport Snackbar from '@mui/material/Snackbar';\nimport MuiAlert from '@mui/material/Alert';\nimport Slide from '@mui/material/Slide';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport Button from '@mui/material/Button';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport Box from '@mui/material/Box';\nimport { TransitionProps } from '@mui/material/transitions';\nimport { Wrapper, Status } from '@googlemaps/react-wrapper';\nimport { MarkerClusterer as MarkerClustererClass } from '@googlemaps/markerclusterer';\nimport Loader from '../components/Loader';\nimport { TrucksQuery } from '../api';\nimport { Truck } from '../utils/dataTypes';\n\nconst center = { lat: 39.828922654821866, lng: -98.57947970000001 };\nconst zoom = 5;\n\nconst Transition = React.forwardRef(function Transition(\n  props: TransitionProps & {\n    children: React.ReactElement<any, any>;\n  },\n  ref: React.Ref<unknown>,\n) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function GeneralMap() {\n  const [selectedTruck, setSelectedTruck] = React.useState<Truck | null>(null);\n\n  const {\n    isLoading,\n    isFetching,\n    data: { items } = { items: [] },\n  } = useQuery({\n    queryKey: ['trucksMap'],\n    queryFn: () => TrucksQuery(0, 25000),\n    keepPreviousData: true,\n  });\n  const rows: Truck[] = items || [];\n\n  const handleClickOpen = (truckId: string) => {\n    setSelectedTruck(rows.find((truck) => truck.id === truckId) || null);\n  };\n\n  const handleDialogClose = () => {\n    setSelectedTruck(null);\n  };\n\n  return (\n    <>\n      <Box\n        component=\"main\"\n        sx={{ flexGrow: 1, p: 1, height: '100%', width: '100%' }}\n      >\n        <Wrapper\n          apiKey={'AIzaSyCXHo65x6xwfIPmz5GAZ2B2laVghupH7Dg'}\n          render={render}\n        >\n          <Map center={center} zoom={zoom}>\n            <MarkerClusterer>\n              {rows\n                .filter((truck) => truck.lastLocation)\n                .map((truck) => {\n                  return (\n                    <Marker\n                      key={truck.id}\n                      onCLick={() => handleClickOpen(truck.id)}\n                      optimized\n                      animation={\n                        window.google.maps.Animation &&\n                        window.google.maps.Animation.DROP\n                      }\n                      title={`${truck.truckNumber}\\n${truck.status}`}\n                      position={{\n                        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                        // @ts-ignore\n                        lat: truck.lastLocation[0],\n                        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                        // @ts-ignore\n                        lng: truck.lastLocation[1],\n                      }}\n                    />\n                  );\n                })}\n            </MarkerClusterer>\n          </Map>\n        </Wrapper>\n      </Box>\n      <Dialog\n        open={!!selectedTruck}\n        TransitionComponent={Transition}\n        keepMounted\n        onClose={handleDialogClose}\n        aria-describedby=\"alert-dialog-slide-description\"\n      >\n        <DialogTitle>\n          <span>\n            TRUCK NUMBER:Â \n            <a href={`./trucks/${selectedTruck?.id}`} target=\"_blank\">\n              {selectedTruck?.truckNumber}\n            </a>\n          </span>\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-slide-description\">\n            {`CURRENT STATUS: ${selectedTruck?.status}`}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleDialogClose}>Close</Button>\n        </DialogActions>\n      </Dialog>\n      <Loader visible={isLoading || isFetching} />\n    </>\n  );\n}\n\nconst render = (status: Status): React.ReactElement => {\n  return (\n    <>\n      <Snackbar\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        open={status === Status.FAILURE}\n        TransitionComponent={Transition}\n      >\n        <MuiAlert\n          elevation={6}\n          variant=\"filled\"\n          severity=\"error\"\n          sx={{ width: '100%' }}\n        >\n          {'Error loading maps!'}\n        </MuiAlert>\n      </Snackbar>\n      <Loader visible={status === Status.LOADING} />\n    </>\n  );\n};\n\nfunction Map({\n  center,\n  zoom,\n  children,\n}: {\n  center: google.maps.LatLngLiteral;\n  zoom: number;\n  children?: React.ReactNode;\n}) {\n  const mapRef = React.useRef(null);\n  const [map, setMap] = React.useState<google.maps.Map>();\n\n  React.useEffect(() => {\n    if (mapRef.current && !map) {\n      setMap(\n        new window.google.maps.Map(mapRef.current, {\n          center,\n          zoom,\n        }),\n      );\n    }\n  }, [mapRef, map]);\n\n  const child = React.Children.only(children);\n\n  return (\n    <>\n      <div style={{ height: '100%', width: '100%' }} ref={mapRef} id=\"map\" />\n      {React.isValidElement(child) &&\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        React.cloneElement(child, { map })}\n    </>\n  );\n}\n\nfunction MarkerClusterer({\n  map,\n  children,\n}: {\n  map?: google.maps.Map;\n  children?: React.ReactNode;\n}) {\n  const [clusterer, setClasterer] = React.useState<MarkerClustererClass>();\n\n  React.useEffect(() => {\n    if (!clusterer) {\n      setClasterer(new MarkerClustererClass({}));\n    }\n\n    return () => {\n      if (clusterer) {\n        clusterer.setMap(null);\n      }\n    };\n  }, [clusterer]);\n\n  React.useEffect(() => {\n    if (clusterer && map) {\n      clusterer.setMap(map);\n    }\n  }, [map]);\n\n  React.useEffect(() => {\n    if (clusterer) {\n      clusterer.render();\n    }\n  }, [map, children]);\n  clusterer?.render();\n\n  return (\n    <>\n      {React.Children.map(children, (child) => {\n        if (React.isValidElement(child)) {\n          // set the map prop on the child component\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          return React.cloneElement(child, { map, clusterer });\n        }\n      })}\n    </>\n  );\n}\n\nconst Marker: React.FC<\n  google.maps.MarkerOptions & {\n    onCLick: () => void;\n    clusterer?: MarkerClustererClass;\n  }\n> = (options) => {\n  const { onCLick, clusterer, map, position, ...otherMarkerOptions } = options;\n  const [marker, setMarker] = React.useState<google.maps.Marker>();\n\n  React.useEffect(() => {\n    if (!marker) {\n      const newMarker = new window.google.maps.Marker();\n      setMarker(newMarker);\n      newMarker.addListener('click', onCLick);\n    }\n\n    return () => {\n      if (marker) {\n        marker.setMap(null);\n        clusterer?.removeMarker(marker, false);\n      }\n    };\n  }, [marker]);\n\n  React.useEffect(() => {\n    if (marker) {\n      marker.setMap(map || null);\n    }\n  }, [marker, map]);\n\n  React.useEffect(() => {\n    if (marker) {\n      marker.setPosition(position);\n    }\n  }, [marker, position && `${position?.lat},${position?.lng}`]);\n\n  React.useEffect(() => {\n    if (marker) {\n      clusterer?.addMarker(marker, false);\n    }\n  }, [marker, clusterer]);\n\n  React.useEffect(() => {\n    if (marker) {\n      marker.setOptions(otherMarkerOptions);\n    }\n  }, [marker, otherMarkerOptions]);\n\n  return null;\n};\n","import { authProvider } from '../utils/auth';\n\nconst { origin } = new URL(window.location.href);\n\nexport type Order = 'asc' | 'desc';\n\nexport const authFetch: (input: string | URL) => Promise<Response> = (\n  input,\n) => {\n  const init = { headers: new Headers() };\n  init.headers.set(\n    'Authorization',\n    'Basic ' +\n      btoa(authProvider.user?.username + ':' + authProvider.user?.password),\n  );\n  return fetch(input, init);\n};\n\nexport const TrucksQuery = (\n  page: number,\n  rowsPerPage: number,\n  orderBy?: string,\n  order?: Order,\n  queryParams?: {\n    truckNumber?: number;\n    lastLocation?: string;\n    distance?: string;\n  },\n) => {\n  const url = new URL('/truck', origin);\n  url.searchParams.append('limit', `${rowsPerPage}`);\n  url.searchParams.append('offset', `${rowsPerPage * page}`);\n  if (orderBy && order) {\n    url.searchParams.append('orderby', `${orderBy}`);\n    url.searchParams.append('direction', `${order}`);\n  }\n  if (queryParams?.truckNumber) {\n    url.searchParams.append('truckNumber', `${queryParams.truckNumber}`);\n  }\n  if (queryParams?.lastLocation && queryParams?.distance) {\n    url.searchParams.append('lastLocation', `${queryParams.lastLocation}`);\n    url.searchParams.append('distance', `${queryParams.distance}`);\n  }\n  return authFetch(url).then((res) => res.json());\n};\n\nexport const LocationsQuery = (\n  page: number,\n  rowsPerPage: number,\n  orderBy?: string,\n  order?: Order,\n  queryParams?: { search?: string; name?: string },\n) => {\n  const url = new URL('/location', origin);\n  url.searchParams.append('limit', `${rowsPerPage}`);\n  url.searchParams.append('offset', `${rowsPerPage * page}`);\n  if (orderBy && order) {\n    url.searchParams.append('orderby', `${orderBy}`);\n    url.searchParams.append('direction', `${order}`);\n  }\n  if (queryParams?.search) {\n    url.searchParams.append('search', `${queryParams.search}`);\n  }\n  if (queryParams?.name) {\n    url.searchParams.append('name', `${queryParams.name}`);\n  }\n  return authFetch(url).then((res) => res.json());\n};\n\nexport const LoadsQuery = (\n  page: number,\n  rowsPerPage: number,\n  orderBy?: string,\n  order?: Order,\n  queryParams?: { loadNumber?: number; truckNumber?: number },\n) => {\n  const url = new URL('/load', origin);\n  url.searchParams.append('limit', `${rowsPerPage}`);\n  url.searchParams.append('offset', `${rowsPerPage * page}`);\n  if (orderBy && order) {\n    url.searchParams.append('orderby', `${orderBy}`);\n    url.searchParams.append('direction', `${order}`);\n  }\n  if (queryParams?.loadNumber) {\n    url.searchParams.append('loadNumber', `${queryParams.loadNumber}`);\n  }\n  if (queryParams?.truckNumber) {\n    url.searchParams.append('truckNumber', `${queryParams.truckNumber}`);\n  }\n  return authFetch(url).then((res) => res.json());\n};\n\nexport const OwnersQuery = (\n  page: number,\n  rowsPerPage: number,\n  orderBy?: string,\n  order?: Order,\n  queryParams?: { fullName?: number; truckNumber?: number },\n) => {\n  const url = new URL('/owner', origin);\n  url.searchParams.append('limit', `${rowsPerPage}`);\n  url.searchParams.append('offset', `${rowsPerPage * page}`);\n  if (orderBy && order) {\n    url.searchParams.append('orderby', `${orderBy}`);\n    url.searchParams.append('direction', `${order}`);\n  }\n  if (queryParams?.fullName) {\n    url.searchParams.append('fullName', `${queryParams.fullName}`);\n  }\n  if (queryParams?.truckNumber) {\n    url.searchParams.append('truckNumber', `${queryParams.truckNumber}`);\n  }\n  return authFetch(url).then((res) => res.json());\n};\n\nexport const DriversQuery = (\n  page: number,\n  rowsPerPage: number,\n  orderBy?: string,\n  order?: Order,\n  queryParams?: { fullName?: number; truckNumber?: number },\n) => {\n  const url = new URL('/driver', origin);\n  url.searchParams.append('limit', `${rowsPerPage}`);\n  url.searchParams.append('offset', `${rowsPerPage * page}`);\n  if (orderBy && order) {\n    url.searchParams.append('orderby', `${orderBy}`);\n    url.searchParams.append('direction', `${order}`);\n  }\n  if (queryParams?.fullName) {\n    url.searchParams.append('fullName', `${queryParams.fullName}`);\n  }\n  if (queryParams?.truckNumber) {\n    url.searchParams.append('truckNumber', `${queryParams.truckNumber}`);\n  }\n  return authFetch(url).then((res) => res.json());\n};\n\nexport const CoordinatorsQuery = (\n  page: number,\n  rowsPerPage: number,\n  orderBy?: string,\n  order?: Order,\n  queryParams?: { fullName?: number; truckNumber?: number },\n) => {\n  const url = new URL('/coordinator', origin);\n  url.searchParams.append('limit', `${rowsPerPage}`);\n  url.searchParams.append('offset', `${rowsPerPage * page}`);\n  if (orderBy && order) {\n    url.searchParams.append('orderby', `${orderBy}`);\n    url.searchParams.append('direction', `${order}`);\n  }\n  if (queryParams?.fullName) {\n    url.searchParams.append('fullName', `${queryParams.fullName}`);\n  }\n  if (queryParams?.truckNumber) {\n    url.searchParams.append('truckNumber', `${queryParams.truckNumber}`);\n  }\n  return authFetch(url).then((res) => res.json());\n};\n\nexport const UsersQuery = (\n  page: number,\n  rowsPerPage: number,\n  orderBy?: string,\n  order?: Order,\n  queryParams?: { fullName?: number },\n) => {\n  const url = new URL('/user', origin);\n  url.searchParams.append('limit', `${rowsPerPage}`);\n  url.searchParams.append('offset', `${rowsPerPage * page}`);\n  if (orderBy && order) {\n    url.searchParams.append('orderby', `${orderBy}`);\n    url.searchParams.append('direction', `${order}`);\n  }\n  if (queryParams?.fullName) {\n    url.searchParams.append('fullName', `${queryParams.fullName}`);\n  }\n  return authFetch(url).then((res) => res.json());\n};\n"],"names":["center","lat","lng","zoom","Transition","React","props","ref","_jsx","Slide","_objectSpread","direction","GeneralMap","_React$useState","_React$useState2","_slicedToArray","selectedTruck","setSelectedTruck","_useQuery","useQuery","queryKey","queryFn","TrucksQuery","keepPreviousData","isLoading","isFetching","_useQuery$data","data","rows","items","handleDialogClose","_jsxs","_Fragment","children","Box","component","sx","flexGrow","p","height","width","Wrapper","apiKey","render","Map","MarkerClusterer","filter","truck","lastLocation","map","Marker","onCLick","truckId","id","find","optimized","animation","window","google","maps","Animation","DROP","title","concat","truckNumber","status","position","Dialog","open","TransitionComponent","keepMounted","onClose","DialogTitle","href","target","DialogContent","DialogContentText","DialogActions","Button","onClick","Loader","visible","Snackbar","anchorOrigin","vertical","horizontal","Status","FAILURE","MuiAlert","elevation","variant","severity","LOADING","_ref","mapRef","_React$useState3","_React$useState4","setMap","current","child","only","style","_ref2","_React$useState5","_React$useState6","clusterer","setClasterer","MarkerClustererClass","options","otherMarkerOptions","_objectWithoutProperties","_excluded","_React$useState7","_React$useState8","marker","setMarker","newMarker","addListener","removeMarker","setPosition","addMarker","setOptions","origin","URL","location","authFetch","input","_authProvider$user","_authProvider$user2","init","headers","Headers","set","btoa","authProvider","user","username","password","fetch","page","rowsPerPage","orderBy","order","queryParams","url","searchParams","append","distance","then","res","json","LocationsQuery","search","name","LoadsQuery","loadNumber","OwnersQuery","fullName","DriversQuery","CoordinatorsQuery","UsersQuery"],"sourceRoot":""}