"use strict";(self.webpackChunkadmin_frontend=self.webpackChunkadmin_frontend||[]).push([[56],{9056:function(n,e,r){r.r(e),r.d(e,{default:function(){return R}});var a=r(5987),t=r(9439),c=r(1413),o=r(2791),i=r(2917),u=r(3543),s=r(4070),d=r(5931),l=r(5289),f=r(7123),m=r(9157),p=r(6151),h=r(1691),v=r(5661),P=r(4554),w=r(9259),k=r(1697),E=r(4765),b=r(344),j=r(184),L=["onCLick","clusterer","map","position"],N={lat:39.828922654821866,lng:-98.57947970000001},g=5,x=o.forwardRef((function(n,e){return(0,j.jsx)(d.Z,(0,c.Z)({direction:"up",ref:e},n))}));function R(){var n=o.useState(null),e=(0,t.Z)(n,2),r=e[0],a=e[1],c=(0,i.a)({queryKey:["trucksMap"],queryFn:function(){return(0,b.g7)(0,25e3)},keepPreviousData:!0}),u=c.isLoading,s=c.isFetching,d=c.data,k=(void 0===d?{items:[]}:d).items||[],L=function(){a(null)};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(P.Z,{component:"main",sx:{flexGrow:1,p:1,height:"100%",width:"100%"},children:(0,j.jsx)(w.Wrapper,{apiKey:"AIzaSyCXHo65x6xwfIPmz5GAZ2B2laVghupH7Dg",render:Z,children:(0,j.jsx)(U,{center:N,zoom:g,children:(0,j.jsx)(y,{children:k.filter((function(n){return n.lastLocation})).map((function(n){return(0,j.jsx)(C,{onCLick:function(){return e=n.id,void a(k.find((function(n){return n.id===e}))||null);var e},optimized:!0,animation:window.google.maps.Animation&&window.google.maps.Animation.DROP,title:"".concat(n.truckNumber,"\n").concat(n.status),position:{lat:n.lastLocation[0],lng:n.lastLocation[1]}},n.id)}))})})})}),(0,j.jsxs)(l.Z,{open:!!r,TransitionComponent:x,keepMounted:!0,onClose:L,"aria-describedby":"alert-dialog-slide-description",children:[(0,j.jsx)(v.Z,{children:(0,j.jsxs)("span",{children:["TRUCK NUMBER:\xa0",(0,j.jsx)("a",{href:"./trucks/".concat(null===r||void 0===r?void 0:r.id),target:"_blank",children:null===r||void 0===r?void 0:r.truckNumber})]})}),(0,j.jsx)(m.Z,{children:(0,j.jsx)(h.Z,{id:"alert-dialog-slide-description",children:"CURRENT STATUS: ".concat(null===r||void 0===r?void 0:r.status)})}),(0,j.jsx)(f.Z,{children:(0,j.jsx)(p.Z,{onClick:L,children:"Close"})})]}),(0,j.jsx)(E.Z,{visible:u||s})]})}var Z=function(n){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(u.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:n===w.Status.FAILURE,TransitionComponent:x,children:(0,j.jsx)(s.Z,{elevation:6,variant:"filled",severity:"error",sx:{width:"100%"},children:"Error loading maps!"})}),(0,j.jsx)(E.Z,{visible:n===w.Status.LOADING})]})};function U(n){var e=n.center,r=n.zoom,a=n.children,c=o.useRef(null),i=o.useState(),u=(0,t.Z)(i,2),s=u[0],d=u[1];o.useEffect((function(){c.current&&!s&&d(new window.google.maps.Map(c.current,{center:e,zoom:r}))}),[c,s]);var l=o.Children.only(a);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{style:{height:"100%",width:"100%"},ref:c,id:"map"}),o.isValidElement(l)&&o.cloneElement(l,{map:s})]})}function y(n){var e=n.map,r=n.children,a=o.useState(),c=(0,t.Z)(a,2),i=c[0],u=c[1];return o.useEffect((function(){return i||u(new k.XL({})),function(){i&&i.setMap(null)}}),[i]),o.useEffect((function(){i&&e&&i.setMap(e)}),[e]),o.useEffect((function(){i&&i.render()}),[e,r]),null===i||void 0===i||i.render(),(0,j.jsx)(j.Fragment,{children:o.Children.map(r,(function(n){if(o.isValidElement(n))return o.cloneElement(n,{map:e,clusterer:i})}))})}var C=function(n){var e=n.onCLick,r=n.clusterer,c=n.map,i=n.position,u=(0,a.Z)(n,L),s=o.useState(),d=(0,t.Z)(s,2),l=d[0],f=d[1];return o.useEffect((function(){if(!l){var n=new window.google.maps.Marker;f(n),n.addListener("click",e)}return function(){l&&(l.setMap(null),null===r||void 0===r||r.removeMarker(l,!1))}}),[l]),o.useEffect((function(){l&&l.setMap(c||null)}),[l,c]),o.useEffect((function(){l&&l.setPosition(i)}),[l,i&&"".concat(null===i||void 0===i?void 0:i.lat,",").concat(null===i||void 0===i?void 0:i.lng)]),o.useEffect((function(){l&&(null===r||void 0===r||r.addMarker(l,!1))}),[l,r]),o.useEffect((function(){l&&l.setOptions(u)}),[l,u]),null}},344:function(n,e,r){r.d(e,{E8:function(){return w},Wn:function(){return P},k4:function(){return v},BB:function(){return h},P9:function(){return f},kg:function(){return l},rz:function(){return d},He:function(){return s},kD:function(){return p},_H:function(){return m},RS:function(){return u},g7:function(){return i},uW:function(){return E},np:function(){return k}});var a=r(1413),t=r(3619),c=new URL(window.location.href).origin,o=function(n){var e,r,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,a.Z)((0,a.Z)({},c),{},{headers:new Headers});return o.headers.set("Authorization","Basic "+btoa((null===(e=t.b.user)||void 0===e?void 0:e.username)+":"+(null===(r=t.b.user)||void 0===r?void 0:r.password))),fetch(n,o)},i=function(n,e,r,a,t){var i=new URL("/truck",c);return i.searchParams.append("limit","".concat(e)),i.searchParams.append("offset","".concat(e*n)),r&&a&&(i.searchParams.append("orderby","".concat(r)),i.searchParams.append("direction","".concat(a))),null!==t&&void 0!==t&&t.truckNumber&&i.searchParams.append("truckNumber","".concat(t.truckNumber)),null!==t&&void 0!==t&&t.lastLocation&&null!==t&&void 0!==t&&t.distance&&(i.searchParams.append("lastLocation","".concat(t.lastLocation)),i.searchParams.append("distance","".concat(t.distance))),o(i).then((function(n){return n.json()}))},u=function(n){var e=new URL("/truck/".concat(n),c);return o(e,{method:"DELETE"}).then((function(n){return n.json()}))},s=function(n,e,r,a,t){var i=new URL("/location",c);return i.searchParams.append("limit","".concat(e)),i.searchParams.append("offset","".concat(e*n)),r&&a&&(i.searchParams.append("orderby","".concat(r)),i.searchParams.append("direction","".concat(a))),null!==t&&void 0!==t&&t.search&&i.searchParams.append("search","".concat(t.search)),null!==t&&void 0!==t&&t.name&&i.searchParams.append("name","".concat(t.name)),o(i).then((function(n){return n.json()}))},d=function(n){var e=new URL("/location/".concat(n),c);return o(e,{method:"DELETE"}).then((function(n){return n.json()}))},l=function(n,e,r,a,t){var i=new URL("/load",c);return i.searchParams.append("limit","".concat(e)),i.searchParams.append("offset","".concat(e*n)),r&&a&&(i.searchParams.append("orderby","".concat(r)),i.searchParams.append("direction","".concat(a))),null!==t&&void 0!==t&&t.loadNumber&&i.searchParams.append("loadNumber","".concat(t.loadNumber)),null!==t&&void 0!==t&&t.truckNumber&&i.searchParams.append("truckNumber","".concat(t.truckNumber)),o(i).then((function(n){return n.json()}))},f=function(n){var e=new URL("/load/".concat(n),c);return o(e,{method:"DELETE"}).then((function(n){return n.json()}))},m=function(n,e,r,a,t){var i=new URL("/owner",c);return i.searchParams.append("limit","".concat(e)),i.searchParams.append("offset","".concat(e*n)),r&&a&&(i.searchParams.append("orderby","".concat(r)),i.searchParams.append("direction","".concat(a))),null!==t&&void 0!==t&&t.fullName&&i.searchParams.append("fullName","".concat(t.fullName)),null!==t&&void 0!==t&&t.truckNumber&&i.searchParams.append("truckNumber","".concat(t.truckNumber)),o(i).then((function(n){return n.json()}))},p=function(n){var e=new URL("/owner/".concat(n),c);return o(e,{method:"DELETE"}).then((function(n){return n.json()}))},h=function(n,e,r,a,t){var i=new URL("/driver",c);return i.searchParams.append("limit","".concat(e)),i.searchParams.append("offset","".concat(e*n)),r&&a&&(i.searchParams.append("orderby","".concat(r)),i.searchParams.append("direction","".concat(a))),null!==t&&void 0!==t&&t.fullName&&i.searchParams.append("fullName","".concat(t.fullName)),null!==t&&void 0!==t&&t.truckNumber&&i.searchParams.append("truckNumber","".concat(t.truckNumber)),o(i).then((function(n){return n.json()}))},v=function(n){var e=new URL("/driver/".concat(n),c);return o(e,{method:"DELETE"}).then((function(n){return n.json()}))},P=function(n,e,r,a,t){var i=new URL("/coordinator",c);return i.searchParams.append("limit","".concat(e)),i.searchParams.append("offset","".concat(e*n)),r&&a&&(i.searchParams.append("orderby","".concat(r)),i.searchParams.append("direction","".concat(a))),null!==t&&void 0!==t&&t.fullName&&i.searchParams.append("fullName","".concat(t.fullName)),null!==t&&void 0!==t&&t.truckNumber&&i.searchParams.append("truckNumber","".concat(t.truckNumber)),o(i).then((function(n){return n.json()}))},w=function(n){var e=new URL("/coordinator/".concat(n),c);return o(e,{method:"DELETE"}).then((function(n){return n.json()}))},k=function(n,e,r,a,t){var i=new URL("/user",c);return i.searchParams.append("limit","".concat(e)),i.searchParams.append("offset","".concat(e*n)),r&&a&&(i.searchParams.append("orderby","".concat(r)),i.searchParams.append("direction","".concat(a))),null!==t&&void 0!==t&&t.fullName&&i.searchParams.append("fullName","".concat(t.fullName)),o(i).then((function(n){return n.json()}))},E=function(n){var e=new URL("/user/".concat(n),c);return o(e,{method:"DELETE"}).then((function(n){return n.json()}))}}}]);
//# sourceMappingURL=56.3c243139.chunk.js.map