"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[9056,8936],{9056:function(n,i,o){o.r(i),o.d(i,{default:function(){return d}});o(2791);var t=o(2917),e=o(8936),l=o(1605),r=o(344),a=o(184);function d(){var n=(0,t.a)({queryKey:["trucksForMap"],queryFn:r.vD,keepPreviousData:!1,retry:!1}),i=n.isLoading,o=n.isFetching,d=(n.data||[]).filter((function(n){return n.lastLocation}));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.default,{truckListData:d}),(0,a.jsx)(l.Z,{visible:i||o})]})}},8936:function(n,i,o){o.r(i),o.d(i,{default:function(){return A}});var t=o(5987),e=o(9439),l=o(1413),r=o(2791),a=o(2917),d=o(9259),c=o(1697),u=o(5931),s=o(5574),v=o(7123),f=o(9157),p=o(4294),h=o(1691),m=o(5661),x=o(4554),j=o(3400),C=o(194),g=o(1605),w=o(344),k=o(9063),Z=o(5916),y=o(7004),E=o(4633),L=o(184),b=["onCLick","clusterer","map","position"],M={lat:39.828922654821866,lng:-98.57947970000001},T=5,F="865ca10c27c22749",N=r.forwardRef((function(n,i){return(0,L.jsx)(u.Z,(0,l.Z)({direction:"up",ref:i},n))}));function A(n){var i,o,t,c,u=n.truckListData,k=M,b=T;1===u.length&&u[0].lastLocation&&(k={lat:u[0].lastLocation[0],lng:u[0].lastLocation[1]},b*=2);var A=r.useState(""),D=(0,e.Z)(A,2),I=D[0],R=D[1],O=r.useState(null),P=(0,e.Z)(O,2),q=P[0],K=P[1],G=(0,a.a)({queryKey:["truckForMap",I],queryFn:w.dC,keepPreviousData:!1,retry:!1,enabled:!1}),V=G.isFetching,B=G.data,W=G.refetch;r.useEffect((function(){I?W():K(null)}),[I]),r.useEffect((function(){K(B||null)}),[B]);var X=function(){R("")};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(x.Z,{component:"main",sx:{flexGrow:1,p:1,height:"100%",width:"100%"},children:(0,L.jsx)(d.Wrapper,(0,l.Z)((0,l.Z)({},(0,E.z)()),{},{render:S,children:(0,L.jsx)(U,{center:k,zoom:b,mapId:F,children:(0,L.jsx)(z,{children:u.map((function(n){var i,o,t,e;return(0,L.jsx)(_,{onCLick:function(){return i=n.id,void R(i);var i},optimized:!0,animation:null===(i=window)||void 0===i||null===(o=i.google)||void 0===o||null===(t=o.maps)||void 0===t||null===(e=t.Animation)||void 0===e?void 0:e.DROP,title:"".concat(n.truckNumber,"\n").concat(n.status),position:{lat:n.lastLocation[0],lng:n.lastLocation[1]}},n.id)}))})})}))}),(0,L.jsxs)(s.Z,{open:!!q,TransitionComponent:N,keepMounted:!0,onClose:X,"aria-describedby":"alert-dialog-slide-description",children:[(0,L.jsx)(m.Z,{children:(0,L.jsxs)("span",{children:["TRUCK NUMBER:\xa0",(0,L.jsx)("a",{href:"./trucks/view/".concat(null===q||void 0===q?void 0:q.id),target:"_blank",children:null===q||void 0===q?void 0:q.truckNumber})]})}),(0,L.jsxs)(f.Z,{children:[(0,L.jsx)(h.Z,{id:"truck-status",children:"CURRENT STATUS: ".concat(null===q||void 0===q?void 0:q.status)}),(0,L.jsx)(h.Z,{id:"main-contact",children:(0,L.jsxs)("span",{children:["MAIN CONTACT: ",(0,L.jsx)("b",{children:"".concat(null!==q&&void 0!==q&&q.coordinator||null!==q&&void 0!==q&&q.owner?(0,Z.oL)((null===q||void 0===q?void 0:q.coordinator)||(null===q||void 0===q?void 0:q.owner)):"")})," ".concat(null!==q&&void 0!==q&&q.coordinator||null!==q&&void 0!==q&&q.owner?((null===q||void 0===q?void 0:q.coordinator)||(null===q||void 0===q?void 0:q.owner)).fullName:""),(0,L.jsx)(j.Z,{size:"small",onClick:function(n){var i;(0,y.U)(n),navigator.clipboard.writeText(" ".concat(null!==q&&void 0!==q&&q.coordinator||null!==q&&void 0!==q&&q.owner?((null===q||void 0===q?void 0:q.coordinator)||(null===q||void 0===q?void 0:q.owner)).fullName:""," ").concat((null===(i=(null===q||void 0===q?void 0:q.coordinator)||(null===q||void 0===q?void 0:q.owner))||void 0===i?void 0:i.phone)||""))},children:(0,L.jsx)(C.Z,{sx:{height:"16px",width:"16px"}})})]})}),(0,L.jsx)(h.Z,{id:"main-contact-number",children:(0,L.jsxs)("span",{children:["MAIN CONTACT #: ",(0,L.jsx)("a",{href:null!==q&&void 0!==q&&q.coordinator||null!==q&&void 0!==q&&q.owner?"tel:".concat(((null===q||void 0===q?void 0:q.coordinator)||(null===q||void 0===q?void 0:q.owner)).phone):void 0,target:"_blank",onClick:y.U,children:(null===(i=(null===q||void 0===q?void 0:q.coordinator)||(null===q||void 0===q?void 0:q.owner))||void 0===i?void 0:i.phone)||""})]})}),(0,L.jsx)(h.Z,{id:"last-location",children:(0,L.jsxs)("span",{children:["LAST LOCATION #: ",(0,L.jsx)("a",{href:"".concat(null!==q&&void 0!==q&&q.lastCity?"./locations/view/"+(null===q||void 0===q?void 0:q.lastCity.id):""),target:"_blank",onClick:y.U,children:"".concat(null===q||void 0===q||null===(o=q.lastCity)||void 0===o?void 0:o.name,", ").concat(null===q||void 0===q||null===(t=q.lastCity)||void 0===t?void 0:t.stateCode,", ").concat(null===q||void 0===q||null===(c=q.lastCity)||void 0===c?void 0:c.zipCode)}),(0,L.jsx)(j.Z,{size:"small",onClick:function(n){var i,o,t;(0,y.U)(n),navigator.clipboard.writeText("".concat(null===q||void 0===q||null===(i=q.lastCity)||void 0===i?void 0:i.name,", ").concat(null===q||void 0===q||null===(o=q.lastCity)||void 0===o?void 0:o.stateCode,", ").concat(null===q||void 0===q||null===(t=q.lastCity)||void 0===t?void 0:t.zipCode))},children:(0,L.jsx)(C.Z,{sx:{height:"16px",width:"16px"}})})]})})]}),(0,L.jsx)(v.Z,{children:(0,L.jsx)(p.Z,{onClick:X,children:"Close"})})]}),(0,L.jsx)(g.Z,{visible:V})]})}var S=function(n){var i=(0,k.Ds)();return n===d.Status.FAILURE&&i({severity:"error",message:"Error loading maps!"}),(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(g.Z,{visible:n===d.Status.LOADING})})};function U(n){var i=n.center,o=n.zoom,t=n.mapId,l=n.children,a=r.useRef(null),d=r.useState(),c=(0,e.Z)(d,2),u=c[0],s=c[1];r.useEffect((function(){a.current&&!u&&s(new window.google.maps.Map(a.current,{center:i,zoom:o,mapId:t}))}),[a,u]);var v=r.Children.only(l);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{style:{height:"100%",width:"100%"},ref:a,id:"map"}),r.isValidElement(v)&&r.cloneElement(v,{map:u})]})}function z(n){var i=n.map,o=n.children,t=r.useState(),l=(0,e.Z)(t,2),a=l[0],d=l[1];return r.useEffect((function(){return a||d(new c.XL({})),function(){a&&a.setMap(null)}}),[a]),r.useEffect((function(){a&&i&&a.setMap(i)}),[i]),r.useEffect((function(){a&&a.render()}),[i,o]),null===a||void 0===a||a.render(),(0,L.jsx)(L.Fragment,{children:r.Children.map(o,(function(n){if(r.isValidElement(n))return r.cloneElement(n,{map:i,clusterer:a})}))})}var _=function(n){var i=n.onCLick,o=n.clusterer,l=n.map,a=n.position,d=(0,t.Z)(n,b),c=r.useState(),u=(0,e.Z)(c,2),s=u[0],v=u[1];return r.useEffect((function(){if(!s){var n=new window.google.maps.Marker;v(n),n.addListener("click",i)}return function(){s&&(s.setMap(null),null===o||void 0===o||o.removeMarker(s,!1))}}),[s]),r.useEffect((function(){s&&s.setMap(l||null)}),[s,l]),r.useEffect((function(){s&&s.setPosition(a)}),[s,a&&"".concat(null===a||void 0===a?void 0:a.lat,",").concat(null===a||void 0===a?void 0:a.lng)]),r.useEffect((function(){s&&(null===o||void 0===o||o.addMarker(s,!1))}),[s,o]),r.useEffect((function(){s&&s.setOptions(d)}),[s,d]),null}},7004:function(n,i,o){function t(n){n.stopPropagation()}o.d(i,{U:function(){return t}})}}]);
//# sourceMappingURL=9056.1a198c4c.chunk.js.map