"use strict";(self.webpackChunk_log4u_admin_frontend=self.webpackChunk_log4u_admin_frontend||[]).push([[5295],{5295:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Y});var a=r(5043),n=r(3216),i=r(9781),s=r(2836),o=r(5604),l=r(4535),c=r(310),d=r(7784),h=r(1962),u=r(7739),x=r(2420),m=r(3851),p=r(6353),A=r(3462),g=r(6446),j=r(1806),v=r(3460),f=r(9650),b=r(4882),k=r(9090),y=r(8076),C=r(8093),S=r(5263),w=r(5865),D=r(3336),N=r(1045),P=r(5721),F=r(681),I=r(8968),T=r(6600),E=r(7392),M=r(2505),R=r(5540),O=r(3471),_=r(8242),z=r(1833),L=r(532),q=r(2088),H=r(8612),K=r(1079),B=r(908),Q=r(6431),U=r(7166),W=r(579);const G=[{id:"fullName",orderField:"fullName",getData:e=>({data:"".concat(e.fullName)}),numeric:!1,disablePadding:!0,label:"First\xa0name/Last\xa0name"},{id:"type",getData:e=>{const t="".concat((0,Q.Pw)(e)," ");let r="";return"Coordinator"===e.type&&(r="Coordinator"),"CoordinatorDriver"===e.type&&(r="Coordinator/Driver"),{data:(0,W.jsx)("span",{children:(0,W.jsx)("b",{children:t})}),title:r}},numeric:!1,disablePadding:!0,label:"Type"},{id:"phone",getData:e=>{const t="".concat(e.phone),r="".concat(e.phone2?e.phone2:"");return{data:(0,W.jsxs)("span",{children:[(0,W.jsx)("a",{href:"tel:".concat(t),target:"_blank",onClick:U.d,children:t}),(0,W.jsx)("br",{}),(0,W.jsx)("a",{href:r?"tel:".concat(r):void 0,target:"_blank",onClick:U.d,children:r||"\xa0"})]}),title:t+"\n"+r}},numeric:!1,disablePadding:!0,label:"Mobile\xa0phone"},{id:"email",getData:e=>{const t="".concat(e.email);return{data:(0,W.jsx)("span",{children:(0,W.jsx)("a",{href:"mailto:".concat(t),target:"_blank",onClick:U.d,children:t})}),title:t}},numeric:!1,disablePadding:!0,label:"Email"},{id:"address",getData:e=>{const t="".concat(e.address);return{data:(0,W.jsx)("span",{children:t}),title:t}},numeric:!1,disablePadding:!0,label:"Home\xa0address"},{id:"coordinateTrucks",getData:e=>{if(e.coordinateTrucks&&e.coordinateTrucks.length){const t=e.coordinateTrucks;return{data:(0,W.jsx)("span",{children:t.map(((e,r)=>(0,W.jsx)("a",{href:"/trucks/view/".concat(e.id),target:"_blank",onClick:U.d,children:"".concat(e.truckNumber).concat(r===t.length-1?"":", ")},r)))}),title:t.map((e=>e.truckNumber)).join(", ")}}return{data:""}},numeric:!1,disablePadding:!0,label:"COORDINATE\xa0TRUCKS"}],J=(0,l.Ay)(b.A)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.background.default}})),V=(0,l.Ay)(x.A)((e=>{let{theme:t}=e;return{maxWidth:"100px",paddingTop:"6px",paddingBottom:"6px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}));function Z(e){const{onSelectAllClick:t,order:r,orderBy:a,numSelected:n,rowCount:i,onRequestSort:s}=e;return(0,W.jsx)(J,{children:(0,W.jsxs)(y.A,{children:[(0,W.jsx)(V,{padding:"checkbox",children:(0,W.jsx)(h.A,{name:"enhanced-table-checkbox-select-all",color:"primary",indeterminate:n>0&&n<i,checked:i>0&&n===i,onChange:t,inputProps:{"aria-label":"enhanced-table-checkbox-select-all"}})}),G.map((e=>{return(0,W.jsx)(V,{align:e.numeric?"right":"center",padding:e.disablePadding?"none":"normal",sortDirection:a===e.id&&r,children:(0,W.jsxs)(C.A,{active:e.orderField&&a===e.orderField,hideSortIcon:!e.orderField,direction:a===e.orderField?r:"asc",onClick:e.orderField?(t=e.orderField,e=>{s(e,t)}):()=>{},children:[e.label,e.orderField&&a===e.orderField?(0,W.jsx)(g.A,{component:"span",sx:q.A,children:"desc"===r?"sorted descending":"sorted ascending"}):null]})},e.id);var t}))]})})}function X(e){const{selected:t,setQueryParams:r}=e,[o,l]=a.useState(!1),[h,x]=a.useState(""),[j,v]=a.useState(0),[f,b]=a.useState(!1),k=(0,n.zy)(),y=(0,n.Zp)(),C=(0,i.jE)(),D=(0,B.dh)(),{mutate:q,isLoading:Q}=(0,s.n)(K.Oh,{onSuccess:()=>{D({severity:"success",message:"Deleted"}),C.invalidateQueries(["coordinators"])},onError:e=>{D({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),U=()=>{b(!1),x(""),v(0),r({})},G=()=>{b(!1);const e={};h&&(e.fullName=h),j&&(e.truckNumber=j),r(e)},J=e=>{"Enter"===e.key&&(h||j?G():U())};return(0,W.jsxs)(S.A,{sx:{overflow:"hidden",pl:{sm:2},pr:{xs:1,sm:1},...t.length>0&&{bgcolor:e=>(0,c.X4)(e.palette.primary.main,e.palette.action.activatedOpacity)}},children:[t.length>0?(0,W.jsxs)(w.A,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t.length," selected"]}):(0,W.jsx)(w.A,{sx:{flex:"1 1 100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},variant:"h6",id:"tableTitle",component:"div",children:"Coordinators"}),(0,W.jsx)(g.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,W.jsx)(d.A,{label:"First name/Last name",value:h,onChange:e=>{x(e.target.value),b(!0)},onKeyUp:J,size:"small"})}),(0,W.jsx)(g.A,{component:"div",sx:{"& .MuiTextField-root":{m:1,width:"140px"}},children:(0,W.jsx)(d.A,{label:"Truck Number",value:j||"",onChange:e=>{Number.isFinite(Number(e.target.value))&&(v(Number(e.target.value)),b(!0))},onKeyUp:J,size:"small"})}),(0,W.jsx)(u.A,{title:"Filter list",children:!f&&(h||j)||f&&!h&&f&&!j?(0,W.jsx)("span",{children:(0,W.jsx)(E.A,{onClick:U,children:(0,W.jsx)(z.A,{})})}):(0,W.jsx)("span",{children:(0,W.jsx)(E.A,{disabled:!h&&!j,onClick:G,children:(0,W.jsx)(_.A,{})})})}),(0,W.jsxs)(g.A,{sx:{p:1,display:"inline-flex"},children:[(0,W.jsx)(u.A,{title:"Create",children:(0,W.jsx)("span",{children:(0,W.jsx)(E.A,{onClick:()=>{l(!0)},children:(0,W.jsx)(M.A,{})})})}),(0,W.jsx)(u.A,{title:"Edit",children:(0,W.jsx)("span",{children:(0,W.jsx)(E.A,{disabled:1!==t.length,onClick:()=>{y("./edit/".concat(t[0]),{relative:"path",state:{from:k},replace:!1})},children:(0,W.jsx)(R.A,{})})})}),(0,W.jsx)(u.A,{title:"Delete",children:(0,W.jsx)("span",{children:(0,W.jsx)(E.A,{disabled:1!==t.length,onClick:()=>{q("".concat(t[0]))},children:(0,W.jsx)(O.A,{})})})})]}),(0,W.jsxs)(A.A,{onClose:()=>{l(!1)},open:o,children:[(0,W.jsx)(T.A,{children:"Select, what type of coordinator to create"}),(0,W.jsxs)(P.A,{sx:{pt:0},children:[(0,W.jsx)(F.Ay,{disableGutters:!0,children:(0,W.jsxs)(I.A,{onClick:()=>{y("../coordinators/create",{relative:"path",state:{from:k},replace:!1})},children:[(0,W.jsx)(m.A,{children:(0,W.jsx)(N.A,{children:(0,W.jsx)(L.A,{})})}),(0,W.jsx)(p.A,{primary:"Coordinator"})]})},"coordinator"),(0,W.jsx)(F.Ay,{disableGutters:!0,children:(0,W.jsxs)(I.A,{onClick:()=>{y("../coordinatorsDrivers/create",{relative:"path",state:{from:k},replace:!1})},children:[(0,W.jsx)(m.A,{children:(0,W.jsx)(N.A,{children:(0,W.jsx)(L.A,{})})}),(0,W.jsx)(p.A,{primary:"Coordinator-Driver"})]})},"coordinatorsDriver")]})]}),(0,W.jsx)(H.A,{visible:Q})]})}function Y(){const[e,t]=a.useState("asc"),[r,i]=a.useState("fullName"),[s,l]=a.useState([]),[c,d]=a.useState(0),[u,x]=a.useState(15),[m,p]=a.useState({}),A=a.useRef(null),b=(0,n.zy)(),C=(0,n.Zp)(),S=(0,B.dh)(),{isLoading:w,isFetching:N,data:{items:P,total:F}={items:[],total:0}}=(0,o.I)({queryKey:["coordinators",c,u,r,e,m],queryFn:K.gS,keepPreviousData:!0,retry:!1,onError:e=>{S({severity:"error",message:e instanceof Error?e.message:JSON.stringify(e)})}}),I=P||[];a.useEffect((()=>{if(A.current){A.current.scrollTo({top:0,left:0,behavior:"smooth"})}}),[I]),a.useEffect((()=>{const e=[];s.forEach((t=>{I.find((e=>e.id===t))&&e.push(t)})),l(e)}),[I]);return(0,W.jsxs)(g.A,{sx:{width:"100%",height:"100%"},children:[(0,W.jsxs)(D.A,{sx:{width:"100%",height:"100%",backgroundColor:"unset"},children:[(0,W.jsx)(X,{selected:s,setQueryParams:e=>{p(e),d(0)}}),(0,W.jsx)(f.A,{ref:A,sx:{height:"calc(100% - 115px)"},children:(0,W.jsxs)(j.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"small",stickyHeader:!0,children:[(0,W.jsx)(Z,{numSelected:s.length,order:e,orderBy:r,onSelectAllClick:e=>{if(e.target.checked){const e=I.map((e=>e.id));l(e)}else l([])},onRequestSort:(a,n)=>{const s=r===n&&"asc"===e;r===n&&"desc"===e?(t(void 0),i(void 0)):(t(s?"desc":"asc"),i(n))},rowCount:I.length}),(0,W.jsx)(v.A,{children:I.map(((e,t)=>{const r=(a="".concat(e.id),-1!==s.indexOf(a));var a;const n="enhanced-table-checkbox-".concat(t);return(0,W.jsxs)(y.A,{hover:!0,onDoubleClick:t=>{return r=e,void C("../".concat((0,Q.Yn)(r),"/view/").concat(r.id),{relative:"path",state:{from:b},replace:!1});var r},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,sx:{cursor:"pointer"},children:[(0,W.jsx)(V,{padding:"checkbox",children:(0,W.jsx)(h.A,{id:"".concat(n),color:"primary",checked:r,inputProps:{"aria-labelledby":n},onClick:t=>((e,t)=>{e.stopPropagation();const r=s.indexOf(t);let a=[];-1===r?a=a.concat(s,t):0===r?a=a.concat(s.slice(1)):r===s.length-1?a=a.concat(s.slice(0,-1)):r>0&&(a=a.concat(s.slice(0,r),s.slice(r+1))),l(a)})(t,"".concat(e.id))})}),G.map((t=>{const r=t.getData(e);return(0,W.jsx)(V,{title:r.title,align:t.numeric?"right":"center",children:r.data},t.id)}))]},e.id)}))})]})}),(0,W.jsx)(k.A,{rowsPerPageOptions:[5,10,15,20,25,35,50],component:"div",count:F,rowsPerPage:u,page:c,onPageChange:(e,t)=>{d(t)},onRowsPerPageChange:e=>{x(parseInt(e.target.value,10)),d(0)}})]}),(0,W.jsx)(H.A,{visible:w||N})]})}},3471:(e,t,r)=>{var a=r(4994);t.A=void 0;var n=a(r(39)),i=r(579);t.A=(0,n.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},5540:(e,t,r)=>{var a=r(4994);t.A=void 0;var n=a(r(39)),i=r(579);t.A=(0,n.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},6600:(e,t,r)=>{r.d(t,{A:()=>A});var a=r(8168),n=r(8587),i=r(5043),s=r(8387),o=r(8606),l=r(5865),c=r(4535),d=r(2876),h=r(7034),u=r(2563),x=r(579);const m=["className","id"],p=(0,c.Ay)(l.A,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),A=i.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiDialogTitle"}),{className:l,id:c}=r,A=(0,n.A)(r,m),g=r,j=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},h.t,t)})(g),{titleId:v=c}=i.useContext(u.A);return(0,x.jsx)(p,(0,a.A)({component:"h2",className:(0,s.A)(j.root,l),ownerState:g,ref:t,variant:"h6",id:null!=c?c:v},A))}))},3851:(e,t,r)=>{r.d(t,{A:()=>g});var a=r(8587),n=r(8168),i=r(5043),s=r(8387),o=r(8606),l=r(1347),c=r(4535),d=r(2876),h=r(7056),u=r(2400);function x(e){return(0,u.Ay)("MuiListItemAvatar",e)}(0,h.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var m=r(579);const p=["className"],A=(0,c.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"flex-start"===r.alignItems&&t.alignItemsFlexStart]}})((e=>{let{ownerState:t}=e;return(0,n.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})})),g=i.forwardRef((function(e,t){const r=(0,d.A)({props:e,name:"MuiListItemAvatar"}),{className:c}=r,h=(0,a.A)(r,p),u=i.useContext(l.A),g=(0,n.A)({},r,{alignItems:u.alignItems}),j=(e=>{const{alignItems:t,classes:r}=e,a={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,o.A)(a,x,r)})(g);return(0,m.jsx)(A,(0,n.A)({className:(0,s.A)(j.root,c),ownerState:g,ref:t},h))}))}}]);
//# sourceMappingURL=5295.5ac0d83f.chunk.js.map